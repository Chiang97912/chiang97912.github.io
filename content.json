{"meta":{"title":"Peter's Blog","subtitle":null,"description":"Stay hungry, stay foolish!","author":"Peter Chiang","url":"http://chiang97912.github.io","root":"/"},"pages":[{"title":"tags","date":"2017-08-25T10:29:35.000Z","updated":"2020-08-01T03:20:40.000Z","comments":true,"path":"tags/index.html","permalink":"http://chiang97912.github.io/tags/index.html","excerpt":"","text":""},{"title":"å…³äº","date":"2017-08-25T10:34:44.000Z","updated":"2025-12-13T12:29:09.992Z","comments":true,"path":"about/index.html","permalink":"http://chiang97912.github.io/about/index.html","excerpt":"","text":"ç®€ä»‹ ä¸»ä¸šæ˜¯ç®—æ³•å·¥ç¨‹å¸ˆï¼Œæ¯å¤©å’Œ NLPã€å¤§æ¨¡å‹ â€œæ–—æ™ºæ–—å‹‡â€ï¼Œè‡´åŠ›äºè®© AI æ›´æ‡‚äººç±»è¯­è¨€ï¼›å‰¯ä¸šæ˜¯è¯»ä¹¦çˆ±å¥½è€…ã€æ—…è¡Œæ‰“å¡é€‰æ‰‹ã€é‡ç”Ÿæ‘„å½±å¸ˆã€‚æ—¢èƒ½å†™å¾—åŠ¨å¤æ‚ä»£ç ï¼Œä¹Ÿèƒ½æ‰›å¾—åŠ¨ç›¸æœºèµ°å››æ–¹ï¼Œè¿˜èƒ½åœ¨ä¹¦æœ¬é‡Œè¹²ä¸€ä¸‹åˆã€‚åšå®¢ä¸»æ‰“ä¸€ä¸ª â€œæŠ€æœ¯ç¡¬æ ¸ + ç”Ÿæ´»æŸ”è½¯â€ï¼Œæ¬¢è¿æ¥æˆ‘çš„å°å¤©åœ°ä¸€èµ·å” æŠ€æœ¯ã€èŠç”Ÿæ´»ï¼ è”ç³»æ–¹å¼ E-Mail: chiang97912@gmail.com Github: https://github.com/Chiang97912"},{"title":"åˆ†ç±»","date":"2017-08-20T06:56:53.000Z","updated":"2020-08-01T03:20:40.000Z","comments":false,"path":"categories/index.html","permalink":"http://chiang97912.github.io/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"æ··åˆä¸“å®¶æ¨¡å‹ç¬”è®°","slug":"æ··åˆä¸“å®¶æ¨¡å‹ç¬”è®°","date":"2025-12-16T13:17:52.000Z","updated":"2025-12-16T14:32:51.548Z","comments":true,"path":"2025/12/16/æ··åˆä¸“å®¶æ¨¡å‹ç¬”è®°/","permalink":"http://chiang97912.github.io/2025/12/16/%E6%B7%B7%E5%90%88%E4%B8%93%E5%AE%B6%E6%A8%A1%E5%9E%8B%E7%AC%94%E8%AE%B0/","excerpt":"è®ºæ–‡ï¼š Outrageously Large Neural Networks: The Sparsely-Gated Mixture-of-Experts Layer Switch Transformers: Scaling to Trillion Parameter Models with Simple and Efficient Sparsity ä»£ç ï¼šhttps://github.com/jingyaogong/minimind/blob/master/model/model_minimind.py","text":"è®ºæ–‡ï¼š Outrageously Large Neural Networks: The Sparsely-Gated Mixture-of-Experts Layer Switch Transformers: Scaling to Trillion Parameter Models with Simple and Efficient Sparsity ä»£ç ï¼šhttps://github.com/jingyaogong/minimind/blob/master/model/model_minimind.py æ¨¡å‹è§„æ¨¡æ˜¯æå‡æ¨¡å‹æ€§èƒ½çš„å…³é”®å› ç´ ä¹‹ä¸€ã€‚åœ¨æœ‰é™çš„è®¡ç®—èµ„æºé¢„ç®—ä¸‹ï¼Œç”¨æ›´å°‘çš„è®­ç»ƒæ­¥æ•°è®­ç»ƒä¸€ä¸ªæ›´å¤§çš„æ¨¡å‹ï¼Œå¾€å¾€æ¯”ç”¨æ›´å¤šçš„æ­¥æ•°è®­ç»ƒä¸€ä¸ªè¾ƒå°çš„æ¨¡å‹æ•ˆæœæ›´ä½³ã€‚ æ··åˆä¸“å®¶æ¨¡å‹ (MoE) çš„ä¸€ä¸ªæ˜¾è‘—ä¼˜åŠ¿æ˜¯å®ƒä»¬èƒ½å¤Ÿåœ¨è¿œå°‘äºç¨ å¯†æ¨¡å‹æ‰€éœ€çš„è®¡ç®—èµ„æºä¸‹è¿›è¡Œæœ‰æ•ˆçš„é¢„è®­ç»ƒã€‚è¿™æ„å‘³ç€åœ¨ç›¸åŒçš„è®¡ç®—é¢„ç®—æ¡ä»¶ä¸‹ï¼Œæ‚¨å¯ä»¥æ˜¾è‘—æ‰©å¤§æ¨¡å‹æˆ–æ•°æ®é›†çš„è§„æ¨¡ã€‚ç‰¹åˆ«æ˜¯åœ¨é¢„è®­ç»ƒé˜¶æ®µï¼Œä¸ç¨ å¯†æ¨¡å‹ç›¸æ¯”ï¼Œæ··åˆä¸“å®¶æ¨¡å‹é€šå¸¸èƒ½å¤Ÿæ›´å¿«åœ°è¾¾åˆ°ç›¸åŒçš„è´¨é‡æ°´å¹³ã€‚ æ··åˆä¸“å®¶æ¨¡å‹ (MoEs): ä¸ç¨ å¯†æ¨¡å‹ç›¸æ¯”ï¼Œ é¢„è®­ç»ƒé€Ÿåº¦æ›´å¿« ä¸å…·æœ‰ç›¸åŒå‚æ•°æ•°é‡çš„æ¨¡å‹ç›¸æ¯”ï¼Œå…·æœ‰æ›´å¿«çš„ æ¨ç†é€Ÿåº¦ éœ€è¦ å¤§é‡æ˜¾å­˜ï¼Œå› ä¸ºæ‰€æœ‰ä¸“å®¶ç³»ç»Ÿéƒ½éœ€è¦åŠ è½½åˆ°å†…å­˜ä¸­ åœ¨ å¾®è°ƒæ–¹é¢å­˜åœ¨è¯¸å¤šæŒ‘æˆ˜ï¼Œä½† è¿‘æœŸçš„ç ”ç©¶ è¡¨æ˜ï¼Œå¯¹æ··åˆä¸“å®¶æ¨¡å‹è¿›è¡Œ æŒ‡ä»¤è°ƒä¼˜å…·æœ‰å¾ˆå¤§çš„æ½œåŠ›ã€‚ æ¨¡å‹æ¶æ„ æ··åˆä¸“å®¶æ¨¡å‹ä¸»è¦ç”±ä¸¤ä¸ªå…³é”®éƒ¨åˆ†ç»„æˆ: ç¨€ç– MoE å±‚: è¿™äº›MoEå±‚ä»£æ›¿äº†ä¼ ç»Ÿ Transformer æ¨¡å‹ä¸­çš„å‰é¦ˆç½‘ç»œ (FFN) å±‚ã€‚MoE å±‚åŒ…å«è‹¥å¹²â€œä¸“å®¶â€(ä¾‹å¦‚ 8 ä¸ª)ï¼Œæ¯ä¸ªä¸“å®¶æœ¬èº«æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¥ç»ç½‘ç»œã€‚ é—¨æ§ç½‘ç»œæˆ–è·¯ç”±: è¿™ä¸ªéƒ¨åˆ†ç”¨äºå†³å®šå“ªäº›tokenè¢«å‘é€åˆ°å“ªä¸ªä¸“å®¶ã€‚ä¸€ä¸ªtokenå¯ä»¥è¢«å‘é€åˆ°å¤šä¸ªä¸“å®¶ã€‚ æ€»ç»“æ¥è¯´ï¼Œåœ¨æ··åˆä¸“å®¶æ¨¡å‹ (MoE) ä¸­ï¼Œå°†ä¼ ç»Ÿ Transformer æ¨¡å‹ä¸­çš„æ¯ä¸ªå‰é¦ˆç½‘ç»œ (FFN) å±‚æ›¿æ¢ä¸º MoE å±‚ï¼Œå…¶ä¸­ MoE å±‚ç”±ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ç»„æˆ: ä¸€ä¸ªé—¨æ§ç½‘ç»œå’Œè‹¥å¹²æ•°é‡çš„ä¸“å®¶ã€‚ ç¨€ç–æ€§çš„æ¦‚å¿µé‡‡ç”¨äº†æ¡ä»¶è®¡ç®—çš„æ€æƒ³ã€‚åœ¨ä¼ ç»Ÿçš„ç¨ å¯†æ¨¡å‹ä¸­ï¼Œæ‰€æœ‰çš„å‚æ•°éƒ½ä¼šå¯¹æ‰€æœ‰è¾“å…¥æ•°æ®è¿›è¡Œå¤„ç†ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç¨€ç–æ€§å…è®¸æˆ‘ä»¬ä»…é’ˆå¯¹æ•´ä¸ªç³»ç»Ÿçš„æŸäº›ç‰¹å®šéƒ¨åˆ†æ‰§è¡Œè®¡ç®—ã€‚è¿™æ„å‘³ç€å¹¶éæ‰€æœ‰å‚æ•°éƒ½ä¼šåœ¨å¤„ç†æ¯ä¸ªè¾“å…¥æ—¶è¢«æ¿€æ´»æˆ–ä½¿ç”¨ï¼Œè€Œæ˜¯æ ¹æ®è¾“å…¥çš„ç‰¹å®šç‰¹å¾æˆ–éœ€æ±‚ï¼Œåªæœ‰éƒ¨åˆ†å‚æ•°é›†åˆè¢«è°ƒç”¨å’Œè¿è¡Œã€‚ 2017 å¹´ï¼ŒShazeer ç­‰äººå°†MoEåº”ç”¨äº 137B çš„ LSTMï¼ŒGShardé¦–æ¬¡å°† MoE å¼•å…¥åˆ° Transformer æ¨¡å‹ä¸­ï¼ŒSwitch Transformerç›¸æ¯” Gshard ç­‰æ–¹æ¡ˆä¸»è¦åšäº†ä¸‰ç‚¹æ”¹è¿›ï¼š ç®€åŒ–ç¨€ç–è·¯ç”± é«˜æ•ˆç¨€ç–è·¯ç”± å¢å¼ºçš„è®­ç»ƒå’Œå¾®è°ƒæŠ€å·§ ä¸“å®¶é€‰æ‹© è·¯ç”±å™¨å…¶å®æ˜¯ MoE ä¸­æœ€æ ¸å¿ƒçš„ç»„ä»¶ä¹‹ä¸€ã€‚å®ƒä¸ä»…å†³å®šæ¨ç†é˜¶æ®µè¯¥é€‰å“ªäº›ä¸“å®¶ï¼Œä¹Ÿå†³å®šè®­ç»ƒé˜¶æ®µå“ªäº›ä¸“å®¶è¦è¢«æ›´æ–°ã€‚ æœ€åŸºç¡€çš„åšæ³•æ˜¯ï¼Œå°†è¾“å…¥ token è¡¨ç¤ºå‘é‡ x ï¼Œä¹˜ä»¥ä¸€ä¸ªè·¯ç”±æƒé‡çŸ©é˜µ Wg ï¼Œå¯¹æ‰“åˆ†ç»“æœåš softmaxï¼Œå¾—åˆ°ä¸€ä¸ªä¸åŒä¸“å®¶çš„æ¦‚ç‡åˆ†å¸ƒG( x ) ï¼š VÏ€(S)=âˆ‘aÏ€(aâˆ£s)Q(s,a)V_{\\pi} ( S )=\\sum_{a} \\pi( a | s ) Q ( s , a ) VÏ€â€‹(S)=aâˆ‘â€‹Ï€(aâˆ£s)Q(s,a) ç„¶åæ ¹æ®è¿™äº›æ¦‚ç‡å€¼ï¼Œé€‰å‡ºå’Œè¾“å…¥æœ€ç›¸å…³çš„ä¸“å®¶ã€‚ æœ€åæŠŠæ¯ä¸ªè·¯ç”±å™¨çš„è¾“å‡ºä¸å¯¹åº”çš„ä¸“å®¶ç›¸ä¹˜ï¼ŒåŠ æƒæ±‚å’Œï¼Œå¾—åˆ°è¯¥ token çš„æœ€ç»ˆè¾“å‡ºï¼š y=âˆ‘i=1nG(x)iEi(x)y=\\sum_{i=1}^{n} G ( x )_{i} E_{i} ( x ) y=i=1âˆ‘nâ€‹G(x)iâ€‹Eiâ€‹(x) è´Ÿè½½å‡è¡¡ è™½ç„¶ä¸“å®¶é€‰æ‹©æœºåˆ¶çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†å®é™…ä¸Šä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼ŒæŸäº›ä¸“å®¶å­¦å¾—æ›´å¿«ï¼Œå¯¼è‡´è·¯ç”±å™¨æ€»æ˜¯é€‰å®ƒä»¬ã€‚è¿™ä¼šå¯¼è‡´é€‰æ‹©çš„ä¸“å®¶ä¸å‡åŒ€ï¼Œä¸€äº›ä¸“å®¶å‡ ä¹ä¸ä¼šè¢«è®­ç»ƒåˆ°ï¼Œæœ€ç»ˆè®­ç»ƒå’Œæ¨ç†æ—¶éƒ½å®¹æ˜“å‡ºç°åç§»å’Œæ€§èƒ½ä¸‹é™çš„é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†è´Ÿè½½å‡è¡¡ï¼ˆLoad Balancingï¼‰ ï¼šå®ƒçš„ç›®çš„æ˜¯è®©æ¯ä¸ªä¸“å®¶åœ¨è®­ç»ƒå’Œæ¨ç†ä¸­éƒ½èƒ½è¢«å…¬å¹³åœ°ä½¿ç”¨ï¼Œé¿å…æŸåœ¨æŸå‡ ä¸ªä¸“å®¶ä¸Šè¿‡æ‹Ÿåˆã€‚ Qï¼šå¦‚ä½•è§£å†³MoEæ¶æ„ä¸­è´Ÿè½½ä¸å¹³è¡¡çš„é—®é¢˜ï¼Ÿ å¦‚æœæ‰€æœ‰çš„tokenéƒ½è¢«å‘é€åˆ°åªæœ‰å°‘æ•°å‡ ä¸ªå—æ¬¢è¿çš„ä¸“å®¶ï¼Œé‚£ä¹ˆè®­ç»ƒæ•ˆç‡å°†ä¼šé™ä½ã€‚åœ¨é€šå¸¸çš„æ··åˆä¸“å®¶æ¨¡å‹ (MoE) è®­ç»ƒä¸­ï¼Œé—¨æ§ç½‘ç»œå¾€å¾€å€¾å‘äºä¸»è¦æ¿€æ´»ç›¸åŒçš„å‡ ä¸ªä¸“å®¶ã€‚è¿™ç§æƒ…å†µå¯èƒ½ä¼šè‡ªæˆ‘åŠ å¼ºï¼Œå› ä¸ºå—æ¬¢è¿çš„ä¸“å®¶è®­ç»ƒå¾—æ›´å¿«ï¼Œå› æ­¤å®ƒä»¬æ›´å®¹æ˜“è¢«é€‰æ‹©ã€‚ä¸ºäº†ç¼“è§£è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº†ä¸€ä¸ª è¾…åŠ©æŸå¤±ï¼ˆaux_lossï¼‰ï¼Œæ—¨åœ¨é¼“åŠ±ç»™äºˆæ‰€æœ‰ä¸“å®¶ç›¸åŒçš„é‡è¦æ€§ã€‚è¿™ä¸ªæŸå¤±ç¡®ä¿æ‰€æœ‰ä¸“å®¶æ¥æ”¶åˆ°å¤§è‡´ç›¸ç­‰æ•°é‡çš„è®­ç»ƒæ ·æœ¬ï¼Œä»è€Œå¹³è¡¡äº†ä¸“å®¶ä¹‹é—´çš„é€‰æ‹©ã€‚æ¥ä¸‹æ¥çš„éƒ¨åˆ†è¿˜å°†æ¢è®¨ä¸“å®¶å®¹é‡çš„æ¦‚å¿µï¼Œå®ƒå¼•å…¥äº†ä¸€ä¸ªå…³äºä¸“å®¶å¯ä»¥å¤„ç†å¤šå°‘ä»¤ç‰Œçš„é˜ˆå€¼ã€‚åœ¨ transformers åº“ä¸­ï¼Œå¯ä»¥é€šè¿‡ aux_loss å‚æ•°æ¥æ§åˆ¶è¾…åŠ©æŸå¤±ã€‚ KeepTopK ç­–ç•¥ ä¸€ç§å¸¸è§çš„è·¯ç”±è´Ÿè½½å‡è¡¡æ–¹æ³•æ˜¯é€šè¿‡ä¸€ä¸ªå«åšKeepTopKçš„ç®€å•çš„æ‰©å±•ï¼Œå¼•å…¥å¯è®­ç»ƒçš„é«˜æ–¯å™ªå£°ï¼Œä»¥é˜²æ­¢æ¨¡å‹æ€»æ˜¯é€‰ä¸­åŒä¸€æ‰¹ä¸“å®¶ï¼š H(x)i=(xâ‹…Wg)i+StandardNormal()â‹…Softplus((xâ‹…Wnoise)i)H ( x )_{i}=( x \\cdot W_{g} )_{i}+S t a n d a r d N o r m a l ( ) \\cdot S o f t p l u s ( ( x \\cdot W_{n o i s e} )_{i} ) H(x)iâ€‹=(xâ‹…Wgâ€‹)iâ€‹+StandardNormal()â‹…Softplus((xâ‹…Wnoiseâ€‹)iâ€‹) æ¥ä¸‹æ¥ï¼Œé™¤äº†ä½ æƒ³è¦æ¿€æ´»çš„ Top-k ä¸ªä¸“å®¶ï¼ˆæ¯”å¦‚å‰ 2 ä¸ªï¼‰ï¼Œå…¶ä»–ä¸“å®¶çš„åˆ†æ•°å…¨éƒ¨è®¾ä¸º -âˆï¼š KeepTopK(v,k)i={viif vi is in the top k elements of v .âˆ’âˆotherwise.K e e p T o p K ( v , k )_{i}=\\begin{cases} {v_{i}} &amp; {\\mathrm{i f ~ v_i ~ i s ~ i n ~ t h e ~ t o p ~ k ~ e l e m e n t s ~ o f ~ v ~} .} \\\\ {-\\infty} &amp; {\\mathrm{o t h e r w i s e} .} \\\\ \\end{cases} KeepTopK(v,k)iâ€‹={viâ€‹âˆ’âˆâ€‹if viâ€‹ is in the top k elements of v .otherwise.â€‹ è¿™æ ·ä¸€æ¥ï¼Œåœ¨åš SoftMax æ—¶ï¼Œåˆ†æ•°ä¸º -âˆ çš„ä¸“å®¶å¯¹åº”çš„æ¦‚ç‡å°±æ˜¯ 0ï¼Œä¸ä¼šè¢«é€‰ä¸­ ï¼š G(x)=Softmax(KeepTopK(H(x),k))G ( x )=S o f t m a x ( K e e p T o p K ( H ( x ) , k ) ) G(x)=Softmax(KeepTopK(H(x),k)) Token Choice KeepTopK ç­–ç•¥æ˜¯æ¯ä¸ª token ä¼šè¢«é€åˆ°å°‘æ•°å‡ ä¸ªä¸“å®¶é‚£é‡Œå¤„ç†ã€‚è¿™ç§æ–¹æ³•è¢«ç§°ä¸º Token Choice ã€‚Top-1 è·¯ç”±æ¯ä¸ª token åªäº¤ç»™ä¸€ä¸ªä¸“å®¶å¤„ç†ã€‚Top-k è·¯ç”±æ¯ä¸ª token è¢«åŒæ—¶é€ç»™kä¸ªä¸“å®¶ï¼Œç„¶åå†æ ¹æ®å®ƒä»¬çš„è¾“å‡ºåŠ æƒåˆå¹¶ ã€‚è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼šå¯ä»¥æ ¹æ®æ¯ä¸ªä¸“å®¶çš„æƒé‡è´¡çŒ®ï¼Œèåˆå¤šä¸ªä¸“å®¶çš„çŸ¥è¯†ï¼Œæ›´çµæ´»ã€‚ è¾…åŠ©æŸå¤± ä¸ºäº†è®©è®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¸“å®¶ä½¿ç”¨æ›´åŠ å¹³å‡ï¼Œç ”ç©¶è€…åœ¨ä¸»æŸå¤±ä¹‹å¤–ï¼Œå¼•å…¥äº†ä¸€ä¸ªè¾…åŠ©æŸå¤±ï¼ˆAuxiliary Lossï¼‰æˆ–è€…å«è´Ÿè½½å‡è¡¡æŸå¤±ï¼ˆLoad Balancing Lossï¼‰ã€‚è¿™ä¸ªæŸå¤±é¡¹çš„ä½œç”¨æ˜¯å¼ºåˆ¶æ¯ä¸ªä¸“å®¶åœ¨è®­ç»ƒä¸­æœ‰å·®ä¸å¤šçš„â€œé‡è¦æ€§â€ã€‚ è¾…åŠ©æŸå¤±çš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯å¯¹æ•´ä¸ª batch ä¸­æ¯ä¸ªä¸“å®¶çš„è·¯ç”±æ¦‚ç‡å€¼æ±‚å’Œä¹Ÿå°±æ˜¯ç»Ÿè®¡åœ¨è¿™ä¸ª batch ä¸­ï¼Œæ¯ä¸ªä¸“å®¶ä¸€å…±â€œè¢«é€‰ä¸­çš„æ¦‚ç‡â€åŠ èµ·æ¥æ˜¯å¤šå°‘ ï¼š Importance(X)=âˆ‘xâˆˆXG(x)I m p o r t a n c e ( X )=\\sum_{x \\in X} G ( x ) Importance(X)=xâˆˆXâˆ‘â€‹G(x) è¿™æ ·å°±å¾—åˆ°äº†æ¯ä¸ªä¸“å®¶çš„ä¸€ä¸ªé‡è¦æ€§åˆ†æ•°ï¼ˆimportance scoreï¼‰ï¼Œè¡¨ç¤ºè¿™ä¸ªä¸“å®¶åœ¨æ•´ä¸ª batch ä¸­ï¼Œåœ¨ä¸è€ƒè™‘è¾“å…¥å†…å®¹çš„æƒ…å†µä¸‹ï¼Œæœ‰å¤šå¤§å¯èƒ½è¢«é€‰ä¸­ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™äº›é‡è¦æ€§åˆ†æ•°ï¼Œè®¡ç®—æ¯ä¸ªä¸“å®¶é‡è¦æ€§åˆ†æ•°çš„å˜å¼‚ç³»æ•°ï¼ˆCoefficient of Variation, CVï¼‰ ï¼Œè¡¨ç¤ºå„ä¸ªä¸“å®¶çš„é‡è¦æ€§å·®å¼‚æœ‰å¤šå¤§ï¼š CV=ÏƒÎ¼.C V=\\frac{\\sigma} {\\mu} . CV=Î¼Ïƒâ€‹. å…¶ä¸­ï¼ŒÏƒè¡¨ç¤ºImportance(X)çš„æ ‡å‡†å·®ï¼ŒÎ¼è¡¨ç¤ºImportance(X)å¹³å‡å€¼ã€‚ å¦‚æœ CV å¾ˆé«˜ï¼Œè¯´æ˜æŸäº›ä¸“å®¶æ€»è¢«é€‰ä¸­ï¼Œè€Œå…¶ä»–ä¸“å®¶å‡ ä¹æ²¡è¢«ç”¨ï¼›å¦‚æœ CV å¾ˆä½ï¼Œè¯´æ˜æ‰€æœ‰ä¸“å®¶è¢«ä½¿ç”¨å¾—å·®ä¸å¤šï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„â€œè´Ÿè½½å‡è¡¡â€çŠ¶æ€ã€‚ åˆ©ç”¨è¿™ä¸ª CV åˆ†æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸æ–­æ›´æ–°è¾…åŠ©æŸå¤±ï¼Œä½¿æ¨¡å‹çš„ä¼˜åŒ–ç›®æ ‡ä¹‹ä¸€å°±æ˜¯å°½å¯èƒ½é™ä½ CV å€¼ï¼Œä»è€Œè®©æ¯ä¸ªä¸“å®¶çš„ä½¿ç”¨é‡è¦æ€§è¶‹äºä¸€è‡´ï¼š Limportance(X)=wimportanceâ‹…CV(Importance(X))2L_{i m p o r t a n c e} ( X )=w_{i m p o r t a n c e} \\cdot C V ( I m p o r t a n c e ( X ) )^{2} Limportanceâ€‹(X)=wimportanceâ€‹â‹…CV(Importance(X))2 å…¶ä¸­ï¼Œw_{importance}æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œè¡¨ç¤ºç¼©æ”¾å› å­ã€‚ æœ€åï¼Œè¿™ä¸ªè¾…åŠ©æŸå¤±ä¼šä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æŸå¤±é¡¹ï¼ŒåŠ å…¥åˆ°æ•´ä½“è®­ç»ƒç›®æ ‡ä¸­ä¸€èµ·ä¼˜åŒ–ã€‚ ä¸“å®¶å®¹é‡ æ¨¡å‹ä¸­çš„ä¸å¹³è¡¡ï¼Œä¸ä»…ä½“ç°åœ¨è¢«é€‰ä¸­çš„ä¸“å®¶ä¸å¹³å‡ï¼Œä¹Ÿä½“ç°åœ¨å‘é€ç»™ä¸“å®¶çš„ token åˆ†å¸ƒä¸å‡ã€‚ æ¯”å¦‚ï¼šå¦‚æœå¤§é‡è¾“å…¥ token éƒ½è¢«ä¸å‡è¡¡åœ°è·¯ç”±åˆ°äº†æŸä¸€ä¸ªä¸“å®¶ï¼ˆè€Œå…¶ä»–ä¸“å®¶å‡ ä¹ä¸ä¼šæ¥æ”¶åˆ° tokenï¼‰ï¼Œé‚£å¯èƒ½ä¼šå¯¼è‡´è®­ç»ƒä¸å……åˆ†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å¼•å…¥ä¸€ä¸ªé™åˆ¶æœºåˆ¶ï¼Œé™åˆ¶æ¯ä¸ªä¸“å®¶ä¸€æ¬¡æœ€å¤šèƒ½å¤„ç†å¤šå°‘ä¸ª tokenï¼Œç§°ä¹‹ä¸ºä¸“å®¶å®¹é‡ï¼ˆExpert Capacityï¼‰ã€‚ä¸€æ—¦æŸä¸ªä¸“å®¶è¾¾åˆ°å®¹é‡ä¸Šé™ï¼Œå‰©ä¸‹çš„ token å°±ä¼šè¢«è·¯ç”±ç»™ä¸‹ä¸€ä¸ªå€™é€‰ä¸“å®¶ï¼Œå¦‚æœæ‰€æœ‰å€™é€‰ä¸“å®¶éƒ½å·²æ»¡ï¼Œtoken å°†ä¸ä¼šè¢«ä»»ä½•ä¸“å®¶å¤„ç†ï¼Œè€Œæ˜¯è·³è¿‡å½“å‰ MoE å±‚ï¼Œè¿›å…¥ä¸‹ä¸€å±‚ã€‚è¿™ç§æƒ…å†µè¢«ç§°ä¸º token overflowï¼ˆtoken æº¢å‡ºï¼‰ ã€‚ Switch Transformerå…è®¸è®¾ç½®ä¸“å®¶å®¹é‡å› å­ï¼ˆcapacity factorï¼‰ï¼Œæ˜¾å¼åœ°æ§åˆ¶ä¸“å®¶å®¹é‡ï¼š expert capacity=(tokens per batchnumber of experts)Ã—capacity factor.\\mathrm{e x p e r t ~ c a p a c i t y=} \\left( \\frac{\\mathrm{t o k e n s ~ p e r ~ b a t c h}} {\\mathrm{n u m b e r ~ o f ~ e x p e r t s}} \\right) \\times\\mathrm{c a p a c i t y ~ f a c t o r} . expert capacity=(number of expertstokens per batchâ€‹)Ã—capacity factor. å®¹é‡å› å­è®¾ç½®å¾—è¶Šå¤§ï¼Œæ¯ä¸ªä¸“å®¶å°±èƒ½å¤„ç†æ›´å¤šçš„ tokenã€‚å¦‚æœå®¹é‡å› å­å¤ªå¤§ï¼Œåˆ™ä¼šæµªè´¹è®¡ç®—èµ„æºã€‚ç›¸åï¼Œå¦‚æœå®¹é‡å› å­å¤ªå°ï¼Œåˆ™ Token æº¢å‡ºä¼šå¯¼è‡´æ¨¡å‹æ€§èƒ½ä¸‹é™ã€‚ å‚è€ƒæ–‡ç« ï¼š https://huggingface.co/blog/zh/moe https://zhuanlan.zhihu.com/p/81886457827 https://zhuanlan.zhihu.com/p/653796685","categories":[{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"http://chiang97912.github.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"http://chiang97912.github.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"},{"name":"å¤§æ¨¡å‹","slug":"å¤§æ¨¡å‹","permalink":"http://chiang97912.github.io/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"},{"name":"MoE","slug":"MoE","permalink":"http://chiang97912.github.io/tags/MoE/"},{"name":"æ··åˆä¸“å®¶æ¨¡å‹","slug":"æ··åˆä¸“å®¶æ¨¡å‹","permalink":"http://chiang97912.github.io/tags/%E6%B7%B7%E5%90%88%E4%B8%93%E5%AE%B6%E6%A8%A1%E5%9E%8B/"}]},{"title":"Transformerç³»åˆ—æ¨¡å‹ç¬”è®°","slug":"Transformerç³»åˆ—æ¨¡å‹ç¬”è®°","date":"2025-12-13T13:43:50.000Z","updated":"2025-12-17T03:23:45.562Z","comments":true,"path":"2025/12/13/Transformerç³»åˆ—æ¨¡å‹ç¬”è®°/","permalink":"http://chiang97912.github.io/2025/12/13/Transformer%E7%B3%BB%E5%88%97%E6%A8%A1%E5%9E%8B%E7%AC%94%E8%AE%B0/","excerpt":"Transformer æ€»ä½“æ¶æ„ è®ºæ–‡ï¼šAttention Is All You Need ä»£ç ï¼šharvardnlp/annotated-transformer","text":"Transformer æ€»ä½“æ¶æ„ è®ºæ–‡ï¼šAttention Is All You Need ä»£ç ï¼šharvardnlp/annotated-transformer Transformerçš„åŸºæœ¬ç»“æ„ï¼Œé€šè¿‡æ¨¡å‹ç»“æ„å›¾å¯çœ‹å‡ºTransformeræ˜¯ç”±Encoderä¸Decoderæ„æˆï¼š å·¦è¾¹çš„éƒ¨åˆ†æ˜¯ç¼–ç å™¨Encoderï¼Œå³è¾¹çš„éƒ¨åˆ†æ˜¯è§£ç å™¨Decoderï¼Œæ ¹æ®ä¸åŒçš„ä»»åŠ¡éœ€è¦ï¼Œä½¿ç”¨å¯¹åº”çš„éƒ¨åˆ†ï¼Œä¸€èˆ¬ç¼–ç å™¨éƒ¨åˆ†å¸¸ç”¨äºæ–‡æœ¬ç¼–ç åˆ†ç±»ï¼Œè§£ç å™¨éƒ¨åˆ†ç”¨äºè¯­è¨€æ¨¡å‹ç”Ÿæˆï¼ŒEncoderå’ŒDecoderéƒ½åŒ…å«6ä¸ªblockå±‚ï¼Œç¼–ç å™¨å’Œè§£ç å™¨å¹¶ä¸æ˜¯ç®€å•çš„ä¸²è”å…³ç³»ã€‚ ç¼–ç å™¨Encoder æ¯ä¸ªç¼–ç å™¨ç”±ä¸¤å±‚ç»“æ„ç»„æˆã€‚ ç¬¬ä¸€å±‚åŒ…æ‹¬ï¼šå¤šå¤´è‡ªæ³¨æ„åŠ›å±‚ï¼Œ è§„èŒƒåŒ–å±‚ï¼ˆLayerNormï¼‰ã€æ®‹å·®è¿æ¥ã€‚ ç¬¬äºŒå±‚åŒ…æ‹¬ï¼šå‰é¦ˆå…¨è¿æ¥å±‚ã€è§„èŒƒåŒ–å±‚ï¼ˆLayerNormï¼‰ã€æ®‹å·®è¿æ¥ã€‚ ç¼–ç å™¨Encoder ç”±6ä¸ªç›¸åŒå±‚blockç»„æˆï¼Œæ¯ä¸€å±‚ç”±ç›¸åŒçš„ä¸¤éƒ¨åˆ†ç»„æˆï¼šä¸€ä¸ªå¤šå¤´æ³¨æ„åŠ›å±‚å’Œä¸€ä¸ªFeed Forwardå±‚ã€‚è¿™ä¸¤ä¸ªéƒ¨åˆ†åé¢éƒ½è¿›è¡Œæ®‹å·®è¿æ¥å’ŒLayerNormå½’ä¸€åŒ– LayerNorm(x +Sublayer(x))ã€‚Feed Forwardå±‚å…¶å®å°±æ˜¯ç®€å•çš„MLPå±‚ï¼Œç”±ä¸¤ä¸ªçº¿æ€§å±‚ç»„æˆï¼Œä¸­é—´ç”¨ReLUå‡½æ•°è¿›è¡Œæ¿€æ´»ã€‚ è§£ç å™¨Decoder æ¯ä¸ªç¼–ç å™¨ç”±ä¸‰å±‚ç»“æ„ç»„æˆã€‚ ç¬¬ä¸€å±‚åŒ…æ‹¬ï¼šå¤šå¤´è‡ªæ³¨æ„åŠ›å±‚ï¼ˆMasked Multi-Head Attentionï¼‰ã€è§„èŒƒåŒ–å±‚ï¼ˆLayerNormï¼‰ã€æ®‹å·®è¿æ¥ã€‚ ç¬¬äºŒå±‚åŒ…å«ï¼šå¤šå¤´æ³¨æ„åŠ›å±‚ï¼ˆMulti-Head Attentionï¼‰ã€è§„èŒƒåŒ–å±‚ï¼ˆLayerNormï¼‰ã€æ®‹å·®è¿æ¥ã€‚ ç¬¬ä¸‰å±‚åŒ…å«ï¼šå‰é¦ˆå…¨è¿æ¥å±‚ã€è§„èŒƒåŒ–å±‚ï¼ˆLayerNormï¼‰ã€æ®‹å·®è¿æ¥ã€‚ è§£ç å™¨Decoder ä¹Ÿæ˜¯ç”±6ä¸ªç›¸åŒå±‚ç»„æˆï¼Œæ¯ä¸€å±‚ç”±ç›¸åŒçš„ä¸‰éƒ¨åˆ†ç»„æˆï¼šä¸€ä¸ªå¸¦æ©ç çš„å¤šå¤´æ³¨æ„åŠ›å±‚ï¼ˆMasked Multi-Head Attentionï¼‰ã€ä¸€ä¸ªå¤šå¤´äº¤å‰æ³¨æ„åŠ›å±‚ï¼ˆMulti-Head Cross Attentionï¼‰å’Œä¸€ä¸ªMLPå±‚ã€‚ä¸ç¼–ç å™¨ä¸€æ ·éƒ½åœ¨å„éƒ¨åˆ†åæ·»åŠ æ®‹å·®å’ŒLayerNormå½’ä¸€åŒ–ï¼Œä¸åŒçš„æ˜¯åœ¨å¤šå¤´æ³¨æ„åŠ›å±‚ä¸­è¾“å…¥çš„æ˜¯ç”±ç¼–ç å™¨è¾“å‡ºçš„keyã€valueå’Œç»è¿‡å¸¦æ©ç çš„å¤šå¤´æ³¨æ„åŠ›å±‚è¾“å‡ºçš„queryã€‚ Masked Multi-Head Attentionï¼š Masked Multi-Head Attentionæ˜¯å¸¦attention maskçš„MHAï¼ˆMulti-Head Attentionï¼‰ï¼ŒEncoderä¸­ç”¨çš„æ˜¯ä¸å¸¦attention maskçš„MHAï¼ŒEncoderè¾“å…¥srcåªè¿›è¡Œäº†padding maskï¼ŒDecoderåŒæ—¶ä½¿ç”¨äº†padding maskå’Œattention maskã€‚ Q: Transformer çš„ Encoderã€Decoder å’Œ GPT çš„æ¶æ„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ Decoder ç›¸è¾ƒäº Encoder å¤šäº†æ©ç æœºåˆ¶å’Œäº¤å‰æ³¨æ„åŠ›ï¼Œå®é™…ä¸ŠçœŸæ­£åŒºåˆ†äºŒè€…çš„æ˜¯è‡ªæ³¨æ„åŠ›ä¸­çš„æ©ç æœºåˆ¶ï¼Œé˜²æ­¢æ¨¡å‹åœ¨ç”Ÿæˆæ—¶çœ‹åˆ°æœªæ¥çš„è¯ã€‚äº¤å‰æ³¨æ„åŠ›ä¹Ÿè¢«ç§°ä¸ºç¼–ç å™¨-è§£ç å™¨æ³¨æ„åŠ›ï¼ˆEncoder-Decoder Attentionï¼‰ã€‚ è¾“å…¥è¾“å‡ºå±‚ æ¨¡å‹è¾“å…¥ï¼š Transformerè¾“å…¥å‘é‡Xç”±è¯å‘é‡Embeddingå’Œä½ç½®å‘é‡Positional Encodingç›¸åŠ å¾—åˆ°ã€‚ Transformerä½¿ç”¨çš„æ˜¯æ­£ä½™å¼¦ä½ç½®ç¼–ç ã€‚ä½ç½®ç¼–ç é€šè¿‡ä½¿ç”¨ä¸åŒé¢‘ç‡çš„æ­£å¼¦ã€ä½™å¼¦å‡½æ•°ç”Ÿæˆï¼Œä½ç½®ç¼–ç å…¬å¼å¦‚ä¸‹ï¼š PE(pos,2i)=sinâ¡(pos/100002i/dmodel )PE(pos,2i+1)=cosâ¡(pos/100002i/dmodel )\\begin{aligned} P E_{(p o s, 2 i)} &amp; =\\sin \\left(p o s / 10000^{2 i / d_{\\text {model }}}\\right) \\\\ P E_{(p o s, 2 i+1)} &amp; =\\cos \\left(p o s / 10000^{2 i / d_{\\text {model }}}\\right) \\end{aligned} PE(pos,2i)â€‹PE(pos,2i+1)â€‹â€‹=sin(pos/100002i/dmodel â€‹)=cos(pos/100002i/dmodel â€‹)â€‹ posè¡¨ç¤ºæ•°æ®åœ¨åºåˆ—ä¸­çš„ç»å¯¹ä½ç½®ï¼Œpos=0,1,2â€¦, d_{model}è¡¨ç¤ºè¯å‘é‡çš„ç»´åº¦ï¼Œ2iå’Œ2i+1è¡¨ç¤ºå¥‡å¶æ€§ æ¨¡å‹è¾“å‡ºï¼š Transformerä¸­è¾“å‡ºå±‚ç”±ä¸€å±‚çº¿æ€§å±‚Linearå’Œä¸€å±‚Softmaxç»„æˆã€‚ å‚è€ƒæ–‡ç« ï¼šhttps://www.cnblogs.com/tian777/p/17917392.html è‡ªæ³¨æ„åŠ›æœºåˆ¶ æ ¸å¿ƒå…¬å¼ï¼š Attentionâ¡(Q,K,V)=softmaxâ¡(QKTdk)V\\operatorname{Attention}(Q, K, V)=\\operatorname{softmax}\\left(\\frac{Q K^T}{\\sqrt{d_k}}\\right) V Attention(Q,K,V)=softmax(dkâ€‹â€‹QKTâ€‹)V Q ä»£è¡¨queryï¼Œä»£è¡¨è¦æŸ¥è¯¢çš„ä¿¡æ¯ï¼Œåç»­ä¼šå»å’Œæ¯ä¸ªKè¿›è¡ŒåŒ¹é…ã€‚ K ä»£è¡¨keyï¼Œ ä»£è¡¨ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯è¢«æŸ¥è¯¢çš„å‘é‡ï¼Œ åç»­ä¼šè¢«æ¯ä¸ªQåŒ¹é…ã€‚ V ä»£è¡¨valueï¼Œä»£è¡¨æŸ¥è¯¢åˆ°çš„å€¼ï¼ŒQå’ŒKåŒ¹é…çš„è¿‡ç¨‹å¯ä»¥ç†è§£æˆè®¡ç®—ä¸¤è€…çš„ç›¸å…³æ€§ï¼Œç›¸å…³æ€§è¶Šå¤§å¯¹åº”Vçš„æƒé‡ä¹Ÿå°±è¶Šå¤§ã€‚ ä»£ç å®ç°ï¼š def attention(query, key, value, mask=None, dropout=None): &quot;Compute &#x27;Scaled Dot Product Attention&#x27;&quot; d_k = query.size(-1) scores = torch.matmul(query, key.transpose(-2, -1)) / math.sqrt(d_k) if mask is not None: scores = scores.masked_fill(mask == 0, -1e9) p_attn = scores.softmax(dim=-1) if dropout is not None: p_attn = dropout(p_attn) return torch.matmul(p_attn, value), p_attn å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ï¼š Feed Forwardå±‚ Feed Forward å±‚æ˜¯ä¸€ä¸ªä¸¤å±‚çš„å…¨è¿æ¥å±‚ï¼Œç¬¬ä¸€å±‚çš„æ¿€æ´»å‡½æ•°ä¸º ReLUï¼Œç¬¬äºŒå±‚ä¸ä½¿ç”¨æ¿€æ´»å‡½æ•°ã€‚ BERT è®ºæ–‡ï¼šBERT: Pre-training of Deep Bidirectional Transformers for Language Understanding æºç ï¼ˆPyTorchç‰ˆæœ¬ï¼‰ï¼šcodertimo/BERT-pytorch æ¨¡å‹é…ç½® Google è®ºæ–‡ä¸­æå‡ºäº†Baseå’ŒLargeä¸¤ç§BERTæ¨¡å‹ã€‚ æ¨¡å‹ Layers Hidden Size Attention Head å‚æ•°æ•°é‡ Base 12 768 12 110M Large 24 1024 16 340M æ¨¡å‹ç»“æ„ BERTåªæ˜¯ä½¿ç”¨äº†Transformerä¸­çš„Encoderéƒ¨åˆ†ï¼Œæ²¡æœ‰Decoderéƒ¨åˆ†ï¼Œå› æ­¤ç›¸è¾ƒäºTransformerä¸­çš„ä¸¤ç§maskï¼ˆkey padding maskå’Œattention maskï¼‰ï¼ŒBERTä¸­åªæœ‰key padding maskï¼Œä¹Ÿå°±æ˜¯å¿½ç•¥æ‰paddingéƒ¨åˆ†çš„ä¿¡æ¯ï¼Œè€Œåœ¨Transformerçš„è§£ç é˜¶æ®µè¿˜éœ€è¦å¿½ç•¥æ‰å½“å‰ä½ç½®ä¹‹åçš„ä¿¡æ¯æ‰€ä»¥è¿˜è¦ä½¿ç”¨attention maskã€‚ ğŸ’¡ BERTé‡‡ç”¨å’ŒTransformerç›¸åŒçš„Post-Normç»“æ„ã€‚ è¾“å…¥è¡¨ç¤º é’ˆå¯¹ä¸åŒçš„ä»»åŠ¡ï¼ŒBERTæ¨¡å‹çš„è¾“å…¥å¯ä»¥æ˜¯å•å¥æˆ–è€…å¥å¯¹ã€‚å¯¹äºæ¯ä¸€ä¸ªè¾“å…¥çš„Tokenï¼Œå®ƒçš„è¡¨å¾ç”±å…¶å¯¹åº”çš„è¯è¡¨å¾ï¼ˆToken Embeddingï¼‰ã€æ®µè¡¨å¾ï¼ˆSegment Embeddingï¼‰å’Œä½ç½®è¡¨å¾ï¼ˆPosition Embeddingï¼‰ç›¸åŠ äº§ç”Ÿï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Token Embeddingsæ˜¯è¯å‘é‡ï¼Œç¬¬ä¸€ä¸ªå•è¯æ˜¯CLSæ ‡å¿—ï¼Œå¯ä»¥ç”¨äºä¹‹åçš„åˆ†ç±»ä»»åŠ¡ï¼Œå¯¹äºè‹±æ–‡æ¨¡å‹ï¼Œä½¿ç”¨äº†Wordpieceæ¨¡å‹æ¥äº§ç”ŸSubwordä»è€Œå‡å°è¯è¡¨è§„æ¨¡ï¼Œå¯¹äºä¸­æ–‡æ¨¡å‹ï¼Œç›´æ¥è®­ç»ƒåŸºäºå­—çš„æ¨¡å‹ã€‚ Segment Embeddingsç”¨æ¥åŒºåˆ«ä¸¤ç§å¥å­ï¼Œå› ä¸ºé¢„è®­ç»ƒä¸ä»…åšLMè¿˜è¦åšä»¥ä¸¤ä¸ªå¥å­ä¸ºè¾“å…¥çš„åˆ†ç±»ä»»åŠ¡ï¼Œä¸ºåŒºåˆ«ä¸¤ä¸ªå¥å­ï¼Œç”¨ä¸€ä¸ªç‰¹æ®Šæ ‡è®°ç¬¦[SEP]è¿›è¡Œåˆ†éš”ï¼Œå¯¹äºå•å¥è¾“å…¥ï¼Œåªæœ‰ä¸€ç§Segment Embeddingï¼Œå¯¹äºå¥å¯¹è¾“å…¥ï¼Œä¼šæœ‰ä¸¤ç§Segment Embeddingã€‚ Position Embeddingså’ŒTransformerçš„ä½ç½®ç¼–ç ä¸åŒï¼Œä¸æ˜¯ä¸‰è§’å‡½æ•°è€Œæ˜¯å­¦ä¹ å‡ºæ¥çš„ã€‚ é¢„è®­ç»ƒç›®æ ‡ BERTé¢„è®­ç»ƒè¿‡ç¨‹åŒ…å«ä¸¤ä¸ªä¸åŒçš„é¢„è®­ç»ƒä»»åŠ¡ï¼Œåˆ†åˆ«æ˜¯Masked Language Modelå’ŒNext Sentence Predictionä»»åŠ¡ã€‚ Masked Language Modelï¼ˆMLMï¼‰ é€šè¿‡éšæœºæ©ç›–ä¸€äº›è¯ï¼ˆæ›¿æ¢ä¸ºç»Ÿä¸€æ ‡è®°ç¬¦[MASK]ï¼‰ï¼Œç„¶åé¢„æµ‹è¿™äº›è¢«é®ç›–çš„è¯æ¥è®­ç»ƒåŒå‘è¯­è¨€æ¨¡å‹ï¼Œå¹¶ä¸”ä½¿æ¯ä¸ªè¯çš„è¡¨å¾å‚è€ƒä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ è¿™æ ·åšä¼šäº§ç”Ÿä¸¤ä¸ªç¼ºç‚¹ï¼šï¼ˆ1ï¼‰ä¼šé€ æˆé¢„è®­ç»ƒå’Œå¾®è°ƒæ—¶çš„ä¸ä¸€è‡´ï¼Œå› ä¸ºåœ¨å¾®è°ƒæ—¶[MASK]æ€»æ˜¯ä¸å¯è§çš„ï¼›ï¼ˆ2ï¼‰ç”±äºæ¯ä¸ªBatchä¸­åªæœ‰15%çš„è¯ä¼šè¢«é¢„æµ‹ï¼Œå› æ­¤æ¨¡å‹çš„æ”¶æ•›é€Ÿåº¦æ¯”èµ·å•å‘çš„è¯­è¨€æ¨¡å‹ä¼šæ…¢ï¼Œè®­ç»ƒèŠ±è´¹çš„æ—¶é—´ä¼šæ›´é•¿ã€‚å¯¹äºç¬¬ä¸€ä¸ªç¼ºç‚¹çš„è§£å†³åŠæ³•æ˜¯ï¼ŒæŠŠ80%éœ€è¦è¢«æ›¿æ¢æˆ[MASK]çš„è¯è¿›è¡Œæ›¿æ¢ï¼Œ10%çš„éšæœºæ›¿æ¢ä¸ºå…¶ä»–è¯ï¼Œ10%ä¿ç•™åŸè¯ã€‚ç”±äºTransformer Encoderå¹¶ä¸çŸ¥é“å“ªä¸ªè¯éœ€è¦è¢«é¢„æµ‹ï¼Œå“ªä¸ªè¯æ˜¯è¢«éšæœºæ›¿æ¢çš„ï¼Œè¿™æ ·å°±å¼ºè¿«æ¯ä¸ªè¯çš„è¡¨è¾¾éœ€è¦å‚ç…§ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚å¯¹äºç¬¬äºŒä¸ªç¼ºç‚¹ç›®å‰æ²¡æœ‰æœ‰æ•ˆçš„è§£å†³åŠæ³•ï¼Œä½†æ˜¯ä»æå‡æ”¶ç›Šçš„è§’åº¦æ¥çœ‹ï¼Œä»˜å‡ºçš„ä»£ä»·æ˜¯å€¼å¾—çš„ã€‚ Next Sentence Predictionï¼ˆNSPï¼‰ ä¸ºäº†è®­ç»ƒä¸€ä¸ªç†è§£å¥å­é—´å…³ç³»çš„æ¨¡å‹ï¼Œå¼•å…¥ä¸€ä¸ªä¸‹ä¸€å¥é¢„æµ‹ä»»åŠ¡ã€‚è¿™ä¸€ä»»åŠ¡çš„è®­ç»ƒè¯­æ–™å¯ä»¥ä»è¯­æ–™åº“ä¸­æŠ½å–å¥å­å¯¹åŒ…æ‹¬ä¸¤ä¸ªå¥å­Aå’ŒBæ¥è¿›è¡Œç”Ÿæˆï¼Œå…¶ä¸­50%çš„æ¦‚ç‡Bæ˜¯Açš„ä¸‹ä¸€ä¸ªå¥å­ï¼Œ50%çš„æ¦‚ç‡Bæ˜¯è¯­æ–™ä¸­çš„ä¸€ä¸ªéšæœºå¥å­ã€‚NSPä»»åŠ¡é¢„æµ‹Bæ˜¯å¦æ˜¯Açš„ä¸‹ä¸€å¥ã€‚NSPçš„ç›®çš„æ˜¯è·å–å¥å­é—´çš„ä¿¡æ¯ï¼Œè¿™ç‚¹æ˜¯è¯­è¨€æ¨¡å‹æ— æ³•ç›´æ¥æ•æ‰çš„ã€‚ Googleçš„è®ºæ–‡ç»“æœè¡¨æ˜ï¼Œè¿™ä¸ªç®€å•çš„ä»»åŠ¡å¯¹é—®ç­”å’Œè‡ªç„¶è¯­è¨€æ¨ç†ä»»åŠ¡ååˆ†æœ‰ç›Šï¼Œä½†æ˜¯åç»­ä¸€äº›æ–°çš„ç ”ç©¶[15]å‘ç°ï¼Œå»æ‰NSPä»»åŠ¡ä¹‹åæ¨¡å‹æ•ˆæœæ²¡æœ‰ä¸‹é™ç”šè‡³è¿˜æœ‰æå‡ã€‚æˆ‘ä»¬åœ¨é¢„è®­ç»ƒè¿‡ç¨‹ä¸­ä¹Ÿå‘ç°NSPä»»åŠ¡çš„å‡†ç¡®ç‡ç»è¿‡1-2ä¸ªEpochè®­ç»ƒåå°±èƒ½è¾¾åˆ°98%-99%ï¼Œå»æ‰NSPä»»åŠ¡ä¹‹åå¯¹æ¨¡å‹æ•ˆæœå¹¶ä¸ä¼šæœ‰å¤ªå¤§çš„å½±å“ã€‚ å‚è€ƒæ–‡ç« ï¼š â€‹ https://tech.meituan.com/2019/11/14/nlp-bert-practice.html â€‹ https://zhuanlan.zhihu.com/p/46652512 https://www.zhihu.com/question/404452350/answer/2217828686 GPT è®ºæ–‡ï¼š GPT-1ï¼šImproving Language Understanding by Generative Pre-Training GPT-2ï¼šLanguage Models are Unsupervised Multitask Learners GPT-3ï¼šLanguage Models are Few-Shot Learners æºç ï¼ˆPyTorchç‰ˆæœ¬ï¼‰: https://github.com/huggingface/transformers/blob/main/src/transformers/models/gpt2/modeling_gpt2.py https://github.com/graykode/gpt-2-Pytorch/blob/master/GPT2/model.py æ¨¡å‹ç»†èŠ‚ æ¨¡å‹æ¶æ„ ğŸ’¡ GPT ä¿ç•™äº† Decoder çš„Masked Multi-Head Attention å±‚å’Œ Feed Forward å±‚ï¼Œå¹¶æ‰©å¤§äº†ç½‘ç»œçš„è§„æ¨¡ã€‚ Text &amp; Position Embed Text Embedï¼šå°†è¾“å…¥çš„è¯è½¬åŒ–ä¸ºå¯è®­ç»ƒçš„åµŒå…¥å‘é‡ã€‚ Position Embedï¼šä½¿ç”¨å¯å­¦ä¹ çš„ä½ç½®ä¿¡æ¯åµŒå…¥ï¼Œè¿™é‡Œå’Œ Transformer é»˜è®¤çš„æ­£ä½™å¼¦ä½ç½®ç¼–ç ä¸åŒï¼Œä½† Transformer è®ºæ–‡çš„ Table 3 (E) ä¸­æœ‰å¯¹æ¯”äºŒè€…çš„æ€§èƒ½å·®å¼‚ï¼Œæ‰€ä»¥å¹¶éä¸€ä¸ªæ–°çš„æ–¹æ³•ã€‚ Transformer Block Masked Multi-Head Self-Attentionï¼šæ©ç å¤šå¤´è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œåœ¨ç”Ÿæˆä»»åŠ¡ä¸­ï¼Œæ¯æ¬¡é¢„æµ‹ä¸€ä¸ªè¯æ—¶ï¼Œå½“å‰è¯åªèƒ½çœ‹åˆ°å·¦ä¾§çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæœªæ¥çš„è¯å’Œé¢„æµ‹çš„è¯éƒ½ä¼šè¢«æ©ç›–ã€‚å¯¹åº”äº Transformer æ¶æ„ä¸­ Masked Multi-Head Attentionã€‚ Add &amp; Normï¼šLayer Norm (LN) + æ®‹å·®è¿æ¥ (+)ã€‚ Feed-Forwardï¼šå‰é¦ˆç½‘ç»œ (Feed-Forward Network, FFN)ã€‚ Add &amp; Normï¼šLayer Norm (LN) + æ®‹å·®è¿æ¥ (+)ã€‚ Prediction å’Œ Task Classifier Text Predictionï¼šç”¨äºç”Ÿæˆä»»åŠ¡ï¼Œé¢„æµ‹ä¸‹ä¸€ä¸ªè¯ã€‚ Task Classifierï¼šç”¨äºåˆ†ç±»ä»»åŠ¡ï¼Œå¦‚æƒ…æ„Ÿåˆ†ææˆ–æ–‡æœ¬è•´å«ä»»åŠ¡ã€‚ ğŸ’¡ å·¦ä¾§çš„ 12x è¡¨ç¤ºå †å äº†12å±‚ transformer_blockã€‚ æ— ç›‘ç£é¢„è®­ç»ƒ ç»™å®šä¸€ä¸ªæ— æ ‡æ³¨æ ·æœ¬åº“çš„tokenåºåˆ—é›†åˆ U={u1,u2â€¦un} ï¼Œè¯­è¨€æ¨¡å‹çš„ç›®æ ‡å°±æ˜¯æœ€å¤§åŒ–ä¸‹é¢çš„ä¼¼ç„¶å€¼ã€‚ä¹Ÿå°±æ˜¯é€šè¿‡å‰é¢çš„tokensï¼Œé¢„æµ‹ä¸‹ä¸€ä¸ªtokenã€‚ L1(U)=âˆ‘ilogâ¡P(uiâˆ£uiâˆ’k,â€¦,uiâˆ’1;Î˜)L_1(\\mathcal{U})=\\sum_i \\log P\\left(u_i \\mid u_{i-k}, \\ldots, u_{i-1} ; \\Theta\\right) L1â€‹(U)=iâˆ‘â€‹logP(uiâ€‹âˆ£uiâˆ’kâ€‹,â€¦,uiâˆ’1â€‹;Î˜) å…¶ä¸­ï¼Œkæ˜¯æ»‘åŠ¨çª—å£çš„å¤§å°ï¼ŒPæ˜¯æ¡ä»¶æ¦‚ç‡ã€‚æ¨¡å‹å‚æ•°ä½¿ç”¨SGDè¿›è¡Œä¼˜åŒ–ã€‚ GPT-1ä½¿ç”¨äº†12å±‚Transformer decoderç»“æ„ã€‚è¾“å…¥åŒ…æ‹¬æ–‡æœ¬å‘é‡å’Œä½ç½®å‘é‡ã€‚ h0=UWe+Wphl= transformer block (hlâˆ’1)âˆ€iâˆˆ[1,n]P(u)=softmaxâ¡(hnWeT)\\begin{aligned} h_0 &amp; =U W_e+W_p \\\\ h_l &amp; =\\text { transformer block }\\left(h_{l-1}\\right) \\forall i \\in[1, n] \\\\ P(u) &amp; =\\operatorname{softmax}\\left(h_n W_e^T\\right) \\end{aligned} h0â€‹hlâ€‹P(u)â€‹=UWeâ€‹+Wpâ€‹= transformer block (hlâˆ’1â€‹)âˆ€iâˆˆ[1,n]=softmax(hnâ€‹WeTâ€‹)â€‹ å…¶ä¸­ï¼ŒUè¡¨ç¤ºtokençš„æ–‡æœ¬å‘é‡ï¼Œ We è¡¨ç¤ºtoken embeddingçŸ©é˜µï¼Œ Wp è¡¨ç¤ºä½ç½®å‘é‡çŸ©é˜µã€‚æ¯ä¸ªtokenä¼šé€šè¿‡transformer blockè¢«ç¼–ç ï¼Œæœ€åå†ç»è¿‡ä¸€ä¸ªçº¿æ€§å±‚+softmaxï¼Œå¾—åˆ°ä¸‹ä¸€ä¸ªtokençš„é¢„æµ‹åˆ†å¸ƒã€‚ æœ‰ç›‘ç£å¾®è°ƒ å¾—åˆ°æ— ç›‘ç£çš„é¢„è®­ç»ƒæ¨¡å‹åï¼Œå°†å¾—åˆ°çš„å‚æ•°å€¼ç›´æ¥åº”ç”¨äºæœ‰ç›‘ç£ä»»åŠ¡ä¸­ã€‚å¯¹äºä¸€ä¸ªæœ‰æ ‡ç­¾çš„æ•°æ®é›†Cï¼Œæ¯ä¸ªå®ä¾‹æœ‰mä¸ªè¾“å…¥tokensï¼š {x1,â€¦xm} ã€‚å°†è¿™äº›tokensè¾“å…¥åˆ°é¢„è®­ç»ƒæ¨¡å‹ä¸­ï¼Œå¾—åˆ°transformer blockçš„è¾“å‡ºå‘é‡ h ï¼Œå†ç»è¿‡ä¸€ä¸ªå…¨è¿æ¥+softmaxï¼Œå¾—åˆ°é¢„æµ‹ç»“æœyï¼š P(yâˆ£x1,â€¦,xm)=softmaxâ¡(hlmWy)P\\left(y \\mid x^1, \\ldots, x^m\\right)=\\operatorname{softmax}\\left(h_l^m W_y\\right) P(yâˆ£x1,â€¦,xm)=softmax(hlmâ€‹Wyâ€‹) æœ‰ç›‘ç£å­¦ä¹ çš„ç›®æ ‡å³æœ€å¤§åŒ–ä¸Šè¿°æ¦‚ç‡ï¼š L2(C)=âˆ‘(x,y)logâ¡P(yâˆ£x1,â€¦,xm)L_2(\\mathcal{C})=\\sum_{(x, y)} \\log P\\left(y \\mid x^1, \\ldots, x^m\\right) L2â€‹(C)=(x,y)âˆ‘â€‹logP(yâˆ£x1,â€¦,xm) å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä½œè€…å‘ç°ï¼ŒæŠŠé¢„è®­ç»ƒç›®æ ‡ä½œä¸ºè¾…åŠ©ç›®æ ‡åŠ å…¥ä¸‹æ¸¸ä»»åŠ¡lossä¸­ï¼Œå°†ä¼šæé«˜æœ‰ç›‘ç£æ¨¡å‹çš„æ³›åŒ–æ€§èƒ½ï¼Œå¹¶åŠ é€Ÿæ”¶æ•›ã€‚å› æ­¤ï¼Œæœ‰ç›‘ç£ä»»åŠ¡çš„æœ€ç»ˆä¼˜åŒ–ç›®æ ‡æ˜¯ï¼š L3(C)=L2(C)+Î»âˆ—L1(C)L_3(\\mathcal{C})=L_2(\\mathcal{C})+\\lambda * L_1(\\mathcal{C}) L3â€‹(C)=L2â€‹(C)+Î»âˆ—L1â€‹(C) GPT-2 GPT-1 å’Œ GPT-2 çš„åŒºåˆ«ï¼š GPT-2ç›¸æ¯”GPT-1æ‹¥æœ‰æ›´å¤§çš„æ•°æ®é›†ã€æ›´å¤§çš„æ¨¡å‹å‚æ•°ã€‚ GPT-1ï¼šPost-Normï¼Œå±‚å½’ä¸€åŒ–æ”¾ç½®åœ¨æ®‹å·®è¿æ¥ä¹‹åã€‚ GPT-2ï¼šPre-Normï¼Œå±‚å½’ä¸€åŒ–æ”¾ç½®åœ¨æ®‹å·®è¿æ¥ä¹‹å‰ã€‚ Post-Norm/Pre-Normï¼š # Post-Normdef forward(self, x, sublayer): # å­å±‚çš„è¾“å‡º + æ®‹å·®è¿æ¥åï¼Œè¿›è¡Œå½’ä¸€åŒ– return self.norm(x + sublayer(x))# Pre-Normdef forward(self, x, sublayer): # è¾“å…¥å…ˆè¿›è¡Œå½’ä¸€åŒ–ï¼Œå†ä¼ å…¥å­å±‚ï¼Œæœ€åè¿›è¡Œæ®‹å·®è¿æ¥ return x + sublayer(self.norm(x)) GPT-3 GPT-3 ï¼šç›¸æ¯”GPT-1å’ŒGPT-2æ‹¥æœ‰æ›´å¤§çš„æ•°æ®é›†å’Œæ›´å¤§çš„æ¨¡å‹ã€‚ å‚è€ƒæ–‡ç« ï¼š https://zhuanlan.zhihu.com/p/626494749 https://blog.csdn.net/weixin_42426841/article/details/145123776","categories":[{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"http://chiang97912.github.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"http://chiang97912.github.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"},{"name":"å¤§æ¨¡å‹","slug":"å¤§æ¨¡å‹","permalink":"http://chiang97912.github.io/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"},{"name":"Transformer","slug":"Transformer","permalink":"http://chiang97912.github.io/tags/Transformer/"},{"name":"BERT","slug":"BERT","permalink":"http://chiang97912.github.io/tags/BERT/"},{"name":"GPT","slug":"GPT","permalink":"http://chiang97912.github.io/tags/GPT/"}]},{"title":"æœºå™¨å­¦ä¹ æ¨¡å‹è¯„ä¼°æ–¹æ³•åŠä»£ç å®ç°","slug":"æœºå™¨å­¦ä¹ æ¨¡å‹è¯„ä¼°æ–¹æ³•åŠä»£ç å®ç°","date":"2020-01-09T16:04:46.000Z","updated":"2025-12-13T14:32:24.698Z","comments":true,"path":"2020/01/10/æœºå™¨å­¦ä¹ æ¨¡å‹è¯„ä¼°æ–¹æ³•åŠä»£ç å®ç°/","permalink":"http://chiang97912.github.io/2020/01/10/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E6%96%B9%E6%B3%95%E5%8F%8A%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/","excerpt":"","text":"æ··æ·†çŸ©é˜µ æ··æ·†çŸ©é˜µï¼ˆconfusion matrixï¼‰å¦‚ä¸‹æ‰€ç¤ºï¼š çœŸå®\\é¢„æµ‹ æ­£ä¾‹ åä¾‹ æ­£ä¾‹ TP(çœŸæ­£ä¾‹) FN(å‡åä¾‹) åä¾‹ FP(å‡æ­£ä¾‹) TN(çœŸåä¾‹) TP: å°†æ­£ä¾‹é¢„æµ‹ä¸ºæ­£ä¾‹ï¼ˆé¢„æµ‹æ­£ç¡®ï¼‰ï¼› FN: å°†æ­£ä¾‹é¢„æµ‹ä¸ºè´Ÿä¾‹ï¼ˆé¢„æµ‹é”™è¯¯ï¼‰ï¼› FP: å°†è´Ÿä¾‹é¢„æµ‹ä¸ºæ­£ä¾‹ï¼ˆé¢„æµ‹é”™è¯¯ï¼‰ï¼› TN: å°†è´Ÿä¾‹é¢„æµ‹ä¸ºè´Ÿä¾‹ï¼ˆé¢„æµ‹æ­£ç¡®ï¼‰ã€‚ æ­£ä¾‹åŒ…æ‹¬ TPã€FNï¼›åä¾‹åŒ…æ‹¬ TNã€FP å‡†ç¡®ç‡ï¼ˆAccuracyï¼‰ å®šä¹‰ï¼šæŒ‡çš„æ˜¯åˆ†ç±»æ­£ç¡®çš„æ ·æœ¬æ•°é‡å æ ·æœ¬æ€»æ•°çš„æ¯”ä¾‹ å…¬å¼ï¼š A=TP+TNTP+TN+FN+FPA=\\frac{TP+TN}{TP+TN+FN+FP} A=TP+TN+FN+FPTP+TNâ€‹ scikit-learnæ¥å£ï¼š import numpy as npfrom sklearn.metrics import accuracy_scorey_pred = [0, 2, 1, 3]y_true = [0, 1, 2, 3]accuracy_score(y_true, y_pred) ç²¾ç¡®ç‡(Precision) å®šä¹‰ï¼šç²¾ç¡®ç‡(Precision)ï¼Œå³æŸ¥å‡†ç‡ã€‚é€šå¸¸æˆ‘ä»¬æ‰€è¯´çš„ç²¾ç¡®ç‡æ˜¯æ­£ä¾‹çš„ç²¾ç¡®ç‡ï¼Œå®ƒæ˜¯è¢«åˆ¤å®šä¸ºæ­£ä¾‹çš„æ ·æœ¬ä¸­ï¼ŒçœŸæ­£çš„æ­£ä¾‹æ ·æœ¬çš„æ¯”ä¾‹ã€‚æˆ‘ä»¬åŒæ ·å¯ä»¥è®¡ç®—è´Ÿä¾‹çš„ç²¾ç¡®ç‡ï¼Œä½†æ˜¯é€šå¸¸æ²¡æœ‰äººè¿™æ ·åšã€‚ç²¾ç¡®ç‡ä¸»è¦ç”¨æ¥è¯„æµ‹æ˜¯å¦è¯¯æ£€ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ªç­çº§æœ‰10ä¸ªå­¦ç”Ÿï¼Œ5ç”·5å¥³ã€‚æˆ‘ä»¬ç›®æ ‡æ˜¯å¯»æ‰¾ç­çº§ä¸­çš„å¥³ç”Ÿï¼Œè¿”å›6ä¸ªç»“æœåˆ†åˆ«æ˜¯ç”· ã€ å¥³ ã€å¥³ ã€ ç”· ã€å¥³ ã€ ç”·ã€‚å¦‚æœè¿”å›çš„ç»“æœä¸­åªæœ‰3ä¸ªæ­£ç¡®ï¼Œé‚£ä¹ˆæŸ¥å‡†ç‡ä¸º3/6=0.5ã€‚ å…¬å¼ï¼ˆåˆ†ç±»ä»»åŠ¡ï¼‰ï¼š P=TPTP+FPæˆ–TNTN+FNP=\\frac{TP}{TP+FP}æˆ–\\frac{TN}{TN+FN} P=TP+FPTPâ€‹æˆ–TN+FNTNâ€‹ åœ¨ä¿¡æ¯æ£€ç´¢é¢†åŸŸï¼Œç²¾ç¡®ç‡æ˜¯è¿”å›ç»“æœä¸­ç›¸å…³æ–‡æ¡£çš„æ•°ç›®ä¸è¿”å›ç»“æœçš„æ•°ç›®çš„æ¯”ä¾‹ï¼š precision=âˆ£{relevant documents}âˆ©{retrieved documents}âˆ£{retrieved documents}precision=\\frac{|\\{relevant\\ documents\\}âˆ©\\{retrieved\\ documents\\}|}{\\{retrieved\\ documents\\}} precision={retrieved documents}âˆ£{relevant documents}âˆ©{retrieved documents}âˆ£â€‹ scikit-learnæ¥å£ï¼š from sklearn.metrics import precision_scorey_true = [0, 1, 2, 0, 1, 2]y_pred = [0, 2, 1, 0, 0, 1]precision_score(y_true, y_pred, average=&#x27;macro&#x27;)precision_score(y_true, y_pred, average=&#x27;micro&#x27;)precision_score(y_true, y_pred, average=&#x27;weighted&#x27;)precision_score(y_true, y_pred, average=None) æ³¨é‡Šï¼š macro åº¦é‡ï¼šå¯¹äºnä¸ªäºŒåˆ†ç±»æ··æ·†çŸ©é˜µï¼Œåœ¨å„æ··æ·†çŸ©é˜µä¸Šåˆ†åˆ«è®¡ç®—ç²¾ç¡®ç‡å’Œå¬å›ç‡ï¼Œè®°ï¼ˆP1,R1ï¼‰ï¼Œï¼ˆP2,R2ï¼‰â€¦ï¼ˆPnï¼ŒRnï¼‰ï¼Œå†è®¡ç®—å¹³å‡å€¼ï¼Œå¾—åˆ°å®ç²¾ç¡®ç‡ï¼ˆmacro-Pï¼‰ã€å®å¬å›ç‡ï¼ˆmacro-Rï¼‰ï¼Œç»§è€Œå¾—åˆ°å®F1ï¼ˆmacro-F1ï¼‰ã€‚ microåº¦é‡ï¼šå¯¹äºnä¸ªäºŒåˆ†ç±»æ··æ·†çŸ©é˜µï¼Œå…ˆå¯¹TPã€FNã€FPã€TNæ±‚å¹³å‡å€¼ï¼Œå†ç”¨å‡å€¼è®¡ç®—å¾—åˆ°å¾®ç²¾ç¡®ç‡ï¼ˆmicro-Pï¼‰ã€å¾®å¬å›ç‡ï¼ˆmicro-Pï¼‰ï¼Œç»§è€Œå¾—åˆ°å¾®F1ï¼ˆmicro-F1ï¼‰ã€‚ å¬å›ç‡(Recall) å®šä¹‰ï¼šå¬å›ç‡(Recall)ï¼Œå³æŸ¥å…¨ç‡ã€‚é€šå¸¸æˆ‘ä»¬æ‰€è¯´çš„å¬å›ç‡æ˜¯æ­£ä¾‹çš„å¬å›ç‡ï¼Œå®ƒæ˜¯è¢«æ­£ç¡®åˆ†ç±»çš„æ­£ä¾‹æ ·æœ¬ï¼Œå æ‰€æœ‰æ­£ä¾‹æ ·æœ¬çš„æ¯”ä¾‹ã€‚æˆ‘ä»¬åŒæ ·å¯ä»¥è®¡ç®—è´Ÿä¾‹çš„å¬å›ç‡ï¼Œä½†æ˜¯é€šå¸¸æ²¡æœ‰äººè¿™æ ·åšã€‚å¬å›ç‡ä¸»è¦ç”¨æ¥è¯„æµ‹æ˜¯å¦æ¼æ£€ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ªç­çº§æœ‰10ä¸ªå­¦ç”Ÿï¼Œ5ç”·5å¥³ã€‚æˆ‘ä»¬ç›®æ ‡æ˜¯å¯»æ‰¾ç­çº§ä¸­çš„å¥³ç”Ÿï¼Œè¿”å›6ä¸ªç»“æœåˆ†åˆ«æ˜¯ç”· ã€ å¥³ ã€å¥³ ã€ ç”· ã€å¥³ ã€ ç”·ã€‚æ€»å…±æœ‰5ä¸ªå¥³ç”Ÿï¼Œè¿”å›ç»“æœä¸­æœ‰3ä¸ªå¥³ç”Ÿï¼Œé‚£ä¹ˆæŸ¥å…¨ç‡ä¸º3/5=0.6ã€‚ å…¬å¼ï¼ˆåˆ†ç±»ä»»åŠ¡ï¼‰ï¼š R=TPTP+FNæˆ–TNTN+FPR=\\frac{TP}{TP+FN}æˆ–\\frac{TN}{TN+FP} R=TP+FNTPâ€‹æˆ–TN+FPTNâ€‹ åœ¨ä¿¡æ¯æ£€ç´¢é¢†åŸŸï¼Œå¬å›ç‡æ˜¯è¿”å›ç»“æœä¸­ç›¸å…³æ–‡æ¡£çš„æ•°ç›®ä¸æ‰€æœ‰ç›¸å…³æ–‡æ¡£çš„æ•°ç›®çš„æ¯”ä¾‹ï¼š precision=âˆ£{relevant documents}âˆ©{retrieved documents}âˆ£{relevant documents}precision=\\frac{|\\{relevant\\ documents\\}âˆ©\\{retrieved\\ documents\\}|}{\\{relevant\\ documents\\}} precision={relevant documents}âˆ£{relevant documents}âˆ©{retrieved documents}âˆ£â€‹ scikit-learnæ¥å£ï¼š from sklearn.metrics import recall_scorey_true = [0, 1, 2, 0, 1, 2]y_pred = [0, 2, 1, 0, 0, 1]recall_score(y_true, y_pred, average=&#x27;macro&#x27;)recall_score(y_true, y_pred, average=&#x27;micro&#x27;)recall_score(y_true, y_pred, average=&#x27;weighted&#x27;)recall_score(y_true, y_pred, average=None) F1_score å®šä¹‰ï¼šç²¾ç¡®ç‡å’Œå¬å›ç‡çš„è°ƒå’Œå¹³å‡å€¼ã€‚ å…¬å¼ï¼š 1F1=12.(1P+1R)ï¼Œå³F1=2Ã—PÃ—RP+R=2TP2TP+FP+FN\\frac{1}{F1}=\\frac{1}{2}.(\\frac{1}{P}+\\frac{1}{R})ï¼Œå³F1=\\frac{2\\times P\\times R}{P+R}=\\frac{2TP}{2TP+FP+FN} F11â€‹=21â€‹.(P1â€‹+R1â€‹)ï¼Œå³F1=P+R2Ã—PÃ—Râ€‹=2TP+FP+FN2TPâ€‹ scikit-learnæ¥å£ï¼š from sklearn.metrics import f1_scorey_true = [0, 1, 2, 0, 1, 2]y_pred = [0, 2, 1, 0, 0, 1]f1_score(y_true, y_pred, average=&#x27;macro&#x27;)f1_score(y_true, y_pred, average=&#x27;micro&#x27;)f1_score(y_true, y_pred, average=&#x27;weighted&#x27;)f1_score(y_true, y_pred, average=None) ROCå’ŒAUC å®šä¹‰ï¼š ROCæ›²çº¿ï¼Œæ˜¯ä»¥FPR(False Positive Rate, å¬å›ç‡) ä¸ºæ¨ªè½´ã€TPR(True Positive Rate, å–ä¼ªç‡)ä¸ºçºµè½´ï¼Œè¡¡é‡äºŒåˆ†ç±»ç³»ç»Ÿæ€§èƒ½çš„æ›²çº¿ã€‚åˆ†ç±»å™¨å¯¹åˆ†ç±»çš„ç½®ä¿¡åº¦ä¸€èˆ¬è®¾ä¸º50%ï¼Œå³ç½®ä¿¡åº¦è¶…è¿‡50%è®¤ä¸ºæ˜¯æ­£ä¾‹ï¼Œä½äº50%è®¤ä¸ºæ˜¯åä¾‹ã€‚ä¾æ¬¡æ”¹å˜è¿™ä¸ªç½®ä¿¡åº¦ä¸º10%~100%ï¼Œä¼šå¾—åˆ°ä¸€ç»„ä¸åŒçš„æ··æ·†çŸ©é˜µï¼Œå–å…¶ä¸­çš„FPRå’ŒTPRå€¼ç»„æˆåæ ‡ï¼Œè¿æ¥è¿™äº›å€¼ï¼Œå°±å¾—åˆ°ROCæ›²çº¿ã€‚ROCæ›²çº¿ä¸Xè½´å›´æˆçš„å›¾å½¢é¢ç§¯å¯ä»¥ä½œä¸ºä¸€ä¸ªç»¼åˆè¡¡é‡æŒ‡æ ‡ï¼Œå³AUCï¼ˆArea Under Curveï¼Œæ›²çº¿ä¸‹é¢ç§¯ï¼‰ã€‚AUCè¶Šå¤§ï¼Œæ›²çº¿å°±è¶Šå‡¸ï¼Œåˆ†ç±»å™¨çš„æ•ˆæœä¹Ÿå°±è¶Šå¥½ã€‚ROCæ›²çº¿åæ˜ äº†åˆ†ç±»å™¨å¯¹æ­£ä¾‹çš„è¦†ç›–èƒ½åŠ›å’Œå¯¹è´Ÿä¾‹çš„è¦†ç›–èƒ½åŠ›ä¹‹é—´çš„æƒè¡¡ã€‚ scikit-learnæ¥å£ï¼š import numpy as npfrom sklearn.metrics import roc_curve, auc, roc_auc_scorey = np.array([1,1,2,2])pred = np.array([0.1,0.4,0.35,0.8])fpr,tpr,thresholds = roc_curve(y,pred,pos_label=2)result = auc(fpr,tpr)print(result) AP/MAP å®šä¹‰ï¼šæˆ‘ä»¬é¦–å…ˆå¼•å…¥PRæ›²çº¿æ¦‚å¿µã€‚PRæ›²çº¿ï¼ˆPrecision-recallæ›²çº¿ï¼‰ä¸ROCæ›²çº¿çš„åŒºåˆ«æ˜¯æ¨ªè½´å’Œçºµè½´ä¸åŒï¼ŒPRæ›²çº¿çš„æ¨ªè½´Recallä¹Ÿå°±æ˜¯TPRï¼Œåæ˜ äº†åˆ†ç±»å™¨å¯¹æ­£ä¾‹çš„è¦†ç›–èƒ½åŠ›ã€‚è€Œçºµè½´Precisionçš„åˆ†æ¯æ˜¯è¯†åˆ«ä¸ºæ­£ä¾‹çš„æ•°ç›®ï¼Œè€Œä¸æ˜¯å®é™…æ­£ä¾‹æ•°ç›®ã€‚Precisionåæ˜ äº†åˆ†ç±»å™¨é¢„æµ‹æ­£ä¾‹çš„å‡†ç¡®ç¨‹åº¦ã€‚é‚£ä¹ˆï¼ŒPRæ›²çº¿åæ˜ äº†åˆ†ç±»å™¨å¯¹æ­£ä¾‹çš„è¯†åˆ«å‡†ç¡®ç¨‹åº¦å’Œå¯¹æ­£ä¾‹çš„è¦†ç›–èƒ½åŠ›ä¹‹é—´çš„æƒè¡¡ã€‚å¯¹äºéšæœºåˆ†ç±»å™¨è€Œè¨€ï¼Œå…¶Precisionå›ºå®šçš„ç­‰äºæ ·æœ¬ä¸­æ­£ä¾‹çš„æ¯”ä¾‹ï¼Œä¸éšrecallçš„å˜åŒ–è€Œå˜åŒ–ã€‚ä¸AUCç›¸ä¼¼ï¼ŒAPï¼ˆAverage Precisionï¼‰å°±æ˜¯PRæ›²çº¿ä¸Xè½´å›´æˆçš„å›¾å½¢é¢ç§¯ï¼Œ è‹¥PRæ›²çº¿ä¸ºè¿ç»­å‹ï¼Œåˆ™ï¼š AP=âˆ«01PR drAP=\\int_{0}^{1} PR\\, \\mathrm{d}r AP=âˆ«01â€‹PRdr è‹¥PRæ›²çº¿ä¸ºç¦»æ•£å‹ï¼Œåˆ™ï¼š AP=âˆ‘k=1nP(K)Î”r(k)AP=\\sum_{k=1}^n P(K)\\Delta r(k) AP=k=1âˆ‘nâ€‹P(K)Î”r(k) åœ¨ä¿¡æ¯æ£€ç´¢é¢†åŸŸï¼Œæˆ‘ä»¬å¼•å…¥MAP(Mean Average Precision, å‡å€¼å¹³å‡ç²¾åº¦)ï¼Œ MAP=âˆ‘q=1QAP(q)QMAP=\\frac{\\sum_{q=1}^Q AP(q)}{Q} MAP=Qâˆ‘q=1Qâ€‹AP(q)â€‹ å…¶ä¸­Qä¸ºæŸ¥è¯¢çš„æ€»æ¬¡æ•°ã€‚ APè®¡ç®—æ–¹æ³•ï¼šå‰é¢ç»™å‡ºçš„æ˜¯APçš„å®šä¹‰å¼ï¼Œä¸‹é¢æˆ‘ä»¬å°†ä»‹ç»åœ¨ä¿¡æ¯æ£€ç´¢é¢†åŸŸè®¡ç®—APçš„æ–¹æ³•ã€‚é¦–å…ˆæ±‚å‡ºæ¯ä¸ªä½ç½®ä¸Šçš„ç²¾ç¡®ç‡ï¼ˆPrecisionï¼‰ï¼Œç„¶åæ±‚æ‰€æœ‰çš„ä½ç½®çš„ç²¾ç¡®ç‡ï¼ˆPrecisionï¼‰çš„å¹³å‡å€¼ã€‚å¦‚æœè¯¥ä½ç½®çš„æ–‡æ¡£æ˜¯ä¸ç›¸å…³çš„åˆ™è¯¥ä½ç½® Precision=0ã€‚ AP=âˆ‘k=1n(P(k)Ã—rel(k))number of relevant documentsAP=\\frac{\\sum_{k=1}^n (P(k)\\times rel(k))}{number\\ of\\ relevant\\ documents} AP=number of relevant documentsâˆ‘k=1nâ€‹(P(k)Ã—rel(k))â€‹ æ³¨ï¼šå…¶ä¸­kæ˜¯è¿”å›ç»“æœåºåˆ—çš„æ’åˆ—æ¬¡åºï¼Œnæ˜¯è¿”å›ç»“æœçš„æ•°ç›®ï¼ŒP(k)æ˜¯è¿”å›åºåˆ—ä¸­ä»ç¬¬kä¸ªæ–‡æ¡£å¤„æˆªæ–­çš„ç²¾ç¡®ç‡ï¼Œrel(k)æ˜¯æŒ‡ç¤ºå‡½æ•°ï¼Œå¦‚æœç¬¬kä¸ªæ–‡æ¡£ä¸ºç›¸å…³æ–‡æ¡£åˆ™rel(k)=1ï¼Œå¦è€…rel(k)=0ã€‚ ä¾‹å¦‚ï¼š Prediction Correctness Points 1 wrong 0 2 right 1 / 2 3 right 2 / 3 4 wrong 0 5 right 3 / 5 6 wrong 0 7 wrong 0 8 wrong 0 9 right 4 / 9 10 wrong 0 ä¸Šè¡¨ä¸­Predictionåˆ—è¡¨ç¤ºæ–‡æ¡£çš„å¾—åˆ†æ’åºç»“æœï¼ŒCorrectnessåˆ—è¡¨ç¤ºç»“æœçš„æ­£ç¡®æ€§ï¼ŒPointsåˆ—ä¸ºç²¾ç¡®ç‡å¾—åˆ†ã€‚é‚£ä¹ˆæˆ‘ä»¬å°†è®¡ç®—å¾—åˆ°AP=(0+1/2+2/3+0+3/5+0+0+0+4/9+0)/4=0.55ã€‚ MAPè®¡ç®—æ–¹æ³•ï¼šä¸»é›†åˆçš„å¹³å‡å‡†ç¡®ç‡(MAP)æ˜¯æ¯ä¸ªä¸»é¢˜çš„å¹³å‡å‡†ç¡®ç‡ï¼ˆAPï¼‰çš„å¹³å‡å€¼ã€‚å‡è®¾åœ¨æµ‹è¯•é›†ä¸­ä¸€å…±æœ‰kä¸ªç±»åˆ«ã€‚æˆ‘ä»¬å…ˆç®—å‡ºæˆ‘ä»¬çš„æ¨¡å‹å¯¹äºæ¯ä¸ªç±»åˆ«çš„APï¼Œç„¶åå°†è¿™äº›APç›¸åŠ åœ¨ä¸€èµ·å†é™¤ä»¥æ‰€æœ‰ç±»åˆ«çš„æ•°é‡kï¼Œå°±å¯ä»¥å¾—åˆ°æœ€ç»ˆæ¨¡å‹çš„MAPã€‚ ä¾‹å¦‚ï¼šå‡è®¾æœ‰ä¸¤ä¸ªä¸»é¢˜ï¼Œä¸»é¢˜1æœ‰4ä¸ªç›¸å…³ç½‘é¡µï¼Œä¸»é¢˜2æœ‰3ä¸ªç›¸å…³ç½‘é¡µã€‚å¯¹äºä¸»é¢˜1æ£€ç´¢å‡º4ä¸ªç›¸å…³ç½‘é¡µï¼Œå…¶rankåˆ†åˆ«ä¸º1, 2, 4, 7ï¼Œå¹³å‡å‡†ç¡®ç‡ä¸º(1/1+2/2+3/4+4/7)/4=0.83ï¼›å¯¹äºä¸»é¢˜2æ£€ç´¢å‡º3ä¸ªç›¸å…³ç½‘é¡µï¼Œå…¶rankåˆ†åˆ«ä¸º1,3,5ï¼Œå¹³å‡å‡†ç¡®ç‡ä¸º(1/1+2/3+3/5+0+0)/5=0.45ã€‚åˆ™MAP= (0.83+0.45)/2=0.64ã€‚ scikit-learnæ¥å£ï¼š import numpy as npfrom sklearn.metrics import average_precision_scorey_true = np.array([0, 0, 1, 1])y_scores = np.array([0.1, 0.4, 0.35, 0.8])result = average_precision_score(y_true, y_scores) # è®¡ç®—APprint(result) MRR å®šä¹‰ï¼šMRR(Mean Reciprocal Rank, å¹³å‡å€’æ•°æ’å)æŠŠæ ‡å‡†ç­”æ¡ˆåœ¨æœç´¢ç»“æœä¸­åˆ†æ•°çš„æ’åºå–å€’æ•°ä½œä¸ºå®ƒçš„å‡†ç¡®åº¦ï¼Œå†å¯¹æ‰€æœ‰çš„é—®é¢˜å–å¹³å‡ã€‚ä¾‹å¦‚ï¼š Query Results Correct response Rank Reciprocal Rank cat catten, cati, cats cats 3 1/3 torus torri, tori, toruses tori 2 1/2 virus viruses, virii, viri viruses 1 1 æ³¨ï¼šé»‘ä½“ä¸ºè¿”å›ç»“æœä¸­æœ€åŒ¹é…çš„ä¸€é¡¹ ä¸Šè¡¨ä¸­çš„MRR=(1/3 + 1/2 + 1)/3 = 11/18=0.61 å…¬å¼ï¼š MRR=1Qâˆ‘i=1âˆ£Qâˆ£1rankiMRR=\\frac{1}{Q}\\sum_{i=1}^{|Q|} \\frac{1}{rank_i} MRR=Q1â€‹i=1âˆ‘âˆ£Qâˆ£â€‹rankiâ€‹1â€‹ å…¶ä¸­|Q|æ˜¯æŸ¥è¯¢ä¸ªæ•°ï¼Œrankirank_irankiâ€‹æ˜¯ç¬¬iä¸ªæŸ¥è¯¢ç›¸å¯¹äºç¬¬ä¸€ä¸ªç›¸å…³çš„ç»“æœæ‰€åœ¨çš„æ’åˆ—ä½ç½®ã€‚ scikit-learnæ¥å£ï¼š import numpy as npfrom sklearn.metrics import label_ranking_average_precision_scorey_true = np.array([[1, 0, 0], [0, 0, 1]])y_score = np.array([[0.75, 0.5, 1], [1, 0.2, 0.1]])result = label_ranking_average_precision_score(y_true, y_score)print(result) NDCG å®šä¹‰ï¼šNDCG(Normalized Discounted Cumulative Gain, å½’ä¸€åŒ–æŠ˜æŸç´¯è®¡å¢ç›Š)ï¼Œåœ¨MAPä¸­ï¼Œå››ä¸ªæ–‡æ¡£å’Œqueryè¦ä¹ˆç›¸å…³ï¼Œè¦ä¹ˆä¸ç›¸å…³ï¼Œå³ç›¸å…³åº¦åªèƒ½æ˜¯0æˆ–1ã€‚NDCGå¯¹MAPè¿›è¡Œäº†æ”¹è¿›ï¼Œç›¸å…³åº¦åˆ†æˆä»0åˆ°rç­‰çº§ã€‚å½“å–r=5æ—¶ï¼Œç­‰çº§è®¾å®šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Relevance Rating Gain Perfect 31=25âˆ’131=2^5-131=25âˆ’1 Excellent 15=24âˆ’115=2^4-115=24âˆ’1 Good 7=23âˆ’17=2^3-17=23âˆ’1 Fair 3=22âˆ’13=2^2-13=22âˆ’1 xxx 1=21âˆ’11=2^1-11=21âˆ’1 Bad 0=20âˆ’10=2^0-10=20âˆ’1 æˆ‘ä»¬å°†è¿™äº›å¢ç›Šç›¸åŠ å°±æ˜¯CG(Cumulative Gainï¼Œç´¯è®¡å¢ç›Š,),CGå°±æ˜¯å°†æ¯ä¸ªæ¨èç»“æœç›¸å…³æ€§çš„åˆ†æ”¯ç´¯åŠ åä½œä¸ºæ•´ä¸ªæ¨èåˆ—è¡¨çš„å¾—åˆ†ã€‚ CGk=âˆ‘i=1kreliCG_k=\\sum_{i=1}^k{rel_i} CGkâ€‹=i=1âˆ‘kâ€‹reliâ€‹ å…¶ä¸­relirel_ireliâ€‹è¡¨ç¤ºå¤„äºä½ç½®içš„æ¨èç»“æœçš„ç›¸å…³æ€§ã€‚ Relevance Rating Gain Cumulative Gain #1 http://abc.go.com/ 31 31=31x1 #2 http://www.abcteach.com/ 3 34=31+3 #3 http://abcnews.go.com/sections/scitech/ 15 49=31+3+15 #4 http://www.abc.net.au/ 15 64=31+3+15+15 #5 http://abcnews.go.com/ 15 79=31+3+15+15+15 #6 â€¦ â€¦ â€¦ è€ƒè™‘åˆ°ä¸€èˆ¬æƒ…å†µä¸‹ç”¨æˆ·ä¼šä¼˜å…ˆç‚¹é€‰æ’åœ¨å‰é¢çš„æœç´¢ç»“æœï¼Œæ‰€ä»¥åº”è¯¥å¼•å…¥ä¸€ä¸ªæŠ˜ç®—å› å­(discounting factor)ï¼Œè¿™æ—¶å°†è®¡ç®—å¾—åˆ°DCG(Discounted Cumulative Gain)å€¼ã€‚ DCGk=âˆ‘i=1k2reliâˆ’1log2(i+1)DCG_k=\\sum_{i=1}^k \\frac{2^{rel_i}-1}{log_2 (i+1)} DCGkâ€‹=i=1âˆ‘kâ€‹log2â€‹(i+1)2reliâ€‹âˆ’1â€‹ Relevance Rating Gain Discounted Cumulative Gain #1 http://abc.go.com/ 31 31=31x1 #2 http://www.abcteach.com/ 3 32.9=31+3x0.63 #3 http://abcnews.go.com/sections/scitech/ 15 40.4=32.9+15x0.50 #4 http://www.abc.net.au/ 15 46.9=40.4+15x0.43 #5 http://abcnews.go.com/ 15 52.7=46.9+15x0.39 #6 â€¦ â€¦ â€¦ æœ€åæˆ‘ä»¬å¯¹DCGè¿›è¡Œå½’ä¸€åŒ–å¾—åˆ°NDCG(Normalized Discounted Cumulative Gain,å½’ä¸€åŒ–æŠ˜æŸç´¯è®¡å¢ç›Š)ã€‚ NDCGk=DCGkIDCGkNDCG_k=\\frac{DCG_k}{IDCG_k} NDCGkâ€‹=IDCGkâ€‹DCGkâ€‹â€‹ å…¶ä¸­IDCG(Ideal DCG)ï¼ŒæŒ‡æ¨èç³»ç»Ÿä¸ºæŸä¸€ç”¨æˆ·è¿”å›çš„æœ€å¥½æ¨èç»“æœåˆ—è¡¨ï¼Œå³å‡è®¾è¿”å›ç»“æœæŒ‰ç…§ç›¸å…³æ€§æ’åºï¼Œæœ€ç›¸å…³çš„ç»“æœæ”¾åœ¨å‰é¢ï¼Œæ­¤åºåˆ—çš„DCGä¸ºIDCGã€‚å› æ­¤DCGçš„å€¼ä»‹äº(0, IDCG]ï¼Œæ•…NDCGçš„å€¼ä»‹äº(0,1]ã€‚ è¯„ä¼°æ–¹æ³•å®ç° å‚è€ƒ [1]: Precision and recall [2]: https://en.wikipedia.org/wiki/Evaluation_measures_(information_retrieval) [3]: Precision/Recallã€ROC/AUCã€AP/MAPç­‰æ¦‚å¿µåŒºåˆ† [4]: IRçš„è¯„ä»·æŒ‡æ ‡-MAP,NDCGå’ŒMRR [5]: Mean reciprocal rank [6]: äºŒåˆ†ç±»æ¨¡å‹è¯„ä¼°æŒ‡æ ‡çš„è®¡ç®—æ–¹æ³•ä¸ä»£ç å®ç° [7]: Discounted cumulative gain [8]: ä¸€ä¸ªè¯„æµ‹æŒ‡æ ‡å°±æ˜¯MAP(Mean Average Precision)å¹³å‡ç²¾åº¦å‡å€¼ã€‚","categories":[{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"http://chiang97912.github.io/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"æ¨¡å‹è¯„ä¼°","slug":"æ¨¡å‹è¯„ä¼°","permalink":"http://chiang97912.github.io/tags/%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0/"},{"name":"Accuracy","slug":"Accuracy","permalink":"http://chiang97912.github.io/tags/Accuracy/"},{"name":"Precision","slug":"Precision","permalink":"http://chiang97912.github.io/tags/Precision/"},{"name":"Recall","slug":"Recall","permalink":"http://chiang97912.github.io/tags/Recall/"},{"name":"F1","slug":"F1","permalink":"http://chiang97912.github.io/tags/F1/"},{"name":"ROC","slug":"ROC","permalink":"http://chiang97912.github.io/tags/ROC/"},{"name":"AUC","slug":"AUC","permalink":"http://chiang97912.github.io/tags/AUC/"},{"name":"MAP","slug":"MAP","permalink":"http://chiang97912.github.io/tags/MAP/"},{"name":"MRR","slug":"MRR","permalink":"http://chiang97912.github.io/tags/MRR/"},{"name":"NDCG","slug":"NDCG","permalink":"http://chiang97912.github.io/tags/NDCG/"}]},{"title":"è½»é‡çº§GitæœåŠ¡Gogsæ­å»ºæ•™ç¨‹","slug":"è½»é‡çº§GitæœåŠ¡Gogsæ­å»ºæ•™ç¨‹","date":"2019-12-30T13:37:48.000Z","updated":"2025-12-13T12:17:39.262Z","comments":true,"path":"2019/12/30/è½»é‡çº§GitæœåŠ¡Gogsæ­å»ºæ•™ç¨‹/","permalink":"http://chiang97912.github.io/2019/12/30/%E8%BD%BB%E9%87%8F%E7%BA%A7Git%E6%9C%8D%E5%8A%A1Gogs%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B/","excerpt":"å‰è¨€ Gogsæ˜¯ä¸€ä¸ªç±»ä¼¼äºGitlabçš„å¼€æºGitæœåŠ¡ï¼Œå®ƒå…·æœ‰æ˜“å®‰è£…ã€è·¨å¹³å°ã€è½»é‡çº§ç­‰ç‰¹ç‚¹ã€‚ç›¸æ¯”äºGitlabå®ƒçš„èµ„æºå æœ‰ç‡æä½ï¼Œå¯¹äºä¸ªäººå¼€å‘è€…æˆ–è€…å°å‹å›¢é˜Ÿæ˜¯éå¸¸å®ç”¨çš„ä¸€æ¬¾GitæœåŠ¡ã€‚","text":"å‰è¨€ Gogsæ˜¯ä¸€ä¸ªç±»ä¼¼äºGitlabçš„å¼€æºGitæœåŠ¡ï¼Œå®ƒå…·æœ‰æ˜“å®‰è£…ã€è·¨å¹³å°ã€è½»é‡çº§ç­‰ç‰¹ç‚¹ã€‚ç›¸æ¯”äºGitlabå®ƒçš„èµ„æºå æœ‰ç‡æä½ï¼Œå¯¹äºä¸ªäººå¼€å‘è€…æˆ–è€…å°å‹å›¢é˜Ÿæ˜¯éå¸¸å®ç”¨çš„ä¸€æ¬¾GitæœåŠ¡ã€‚ åˆ›å»ºç³»ç»Ÿç”¨æˆ· åˆ›å»ºæ–°çš„ç³»ç»Ÿç”¨æˆ· â€œgitâ€ï¼Œå¹¶åˆ‡æ¢ä¸º â€œgitâ€ ç”¨æˆ·: sudo useradd -m gitsudo su - git åˆ›å»ºæ•°æ®åº“ åˆ›å»ºæ–°çš„æ•°æ®åº“å¹¶å‘½åä¸ºgogsï¼š mysql&gt;create database gogs; å®‰è£…Gogs æœ¬æ–‡ä»¥v0.11.53 ç‰ˆæœ¬ä¸ºä¾‹ï¼Œæœ€æ–°ç‰ˆæœ¬è¯»è€…å¯ä»¥å‰å¾€dl.gogs.ioæŸ¥çœ‹ï¼š wget https://dl.gogs.io/0.11.53/gogs_0.11.53_linux_amd64.tar.gztar xzvf gogs_0.11.53_linux_amd64.tar.gz è¿è¡ŒGogs è¿›å…¥è§£å‹åçš„æ–‡ä»¶å¤¹ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤ï¼š ./gogs web æœ€åæµè§ˆå™¨è®¿é—®http://:3000å®Œæˆç›¸åº”çš„é…ç½®å³å¯ã€‚ é—®é¢˜ Gogsä¸æ”¯æŒç§»åŠ¨é€‚é…ï¼Œä½†æ˜¯å®ƒçš„å¼€æºåˆ†æ”¯Giteaæ”¯æŒï¼Œä¸”Giteaçš„å®‰è£…æµç¨‹åŸºæœ¬å’ŒGogsä¸€è‡´ã€‚","categories":[{"name":"æœåŠ¡å™¨é…ç½®","slug":"æœåŠ¡å™¨é…ç½®","permalink":"http://chiang97912.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://chiang97912.github.io/tags/Git/"},{"name":"Gogs","slug":"Gogs","permalink":"http://chiang97912.github.io/tags/Gogs/"},{"name":"Gitea","slug":"Gitea","permalink":"http://chiang97912.github.io/tags/Gitea/"}]},{"title":"Pyinstalleræ‰“åŒ…Pythonç¨‹åºæ”»ç•¥","slug":"Pyinstalleræ‰“åŒ…Pythonç¨‹åºæ”»ç•¥","date":"2019-08-25T08:38:04.000Z","updated":"2025-12-13T12:15:59.369Z","comments":true,"path":"2019/08/25/Pyinstalleræ‰“åŒ…Pythonç¨‹åºæ”»ç•¥/","permalink":"http://chiang97912.github.io/2019/08/25/Pyinstaller%E6%89%93%E5%8C%85Python%E7%A8%8B%E5%BA%8F%E6%94%BB%E7%95%A5/","excerpt":"PyInstalleråŸºæœ¬ä½¿ç”¨æ–¹æ³• ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªå¸¸è§çš„å¯é€‰å‚æ•°ï¼š pyinstaller [options] my_script.py[options]: -h æ˜¾ç¤ºå¸®åŠ©å¹¶é€€å‡º -D ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆé»˜è®¤ï¼‰ -F ç”Ÿæˆå•ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ -w ç”Ÿæˆä¸€ä¸ªæ— å‘½ä»¤è¡Œç•Œé¢çš„ç¨‹åº -i file.ico æŒ‡å®šå›¾æ ‡ --add-data SRC;DEST åœ¨ç¨‹åºä¸­ç”¨åˆ°çš„å…¶ä»–ï¼ˆéäºŒè¿›åˆ¶ï¼‰æ–‡ä»¶ï¼Œä¸å»ºè®®ç”¨ --hidden-import MODULENAME åœ¨ç¨‹åºä¸­éšå¼å¯¼å…¥çš„åº“ï¼Œå¯å¤šæ¬¡ä½¿ç”¨ --exclude-module MODULENAME ä¸å¸Œæœ›å¯¼å…¥çš„åº“ï¼Œå¯å¤šæ¬¡ä½¿ç”¨ æ›´è¯¦ç»†çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚çœ‹å®˜æ–¹æ‰‹å†Œï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚","text":"PyInstalleråŸºæœ¬ä½¿ç”¨æ–¹æ³• ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªå¸¸è§çš„å¯é€‰å‚æ•°ï¼š pyinstaller [options] my_script.py[options]: -h æ˜¾ç¤ºå¸®åŠ©å¹¶é€€å‡º -D ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆé»˜è®¤ï¼‰ -F ç”Ÿæˆå•ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ -w ç”Ÿæˆä¸€ä¸ªæ— å‘½ä»¤è¡Œç•Œé¢çš„ç¨‹åº -i file.ico æŒ‡å®šå›¾æ ‡ --add-data SRC;DEST åœ¨ç¨‹åºä¸­ç”¨åˆ°çš„å…¶ä»–ï¼ˆéäºŒè¿›åˆ¶ï¼‰æ–‡ä»¶ï¼Œä¸å»ºè®®ç”¨ --hidden-import MODULENAME åœ¨ç¨‹åºä¸­éšå¼å¯¼å…¥çš„åº“ï¼Œå¯å¤šæ¬¡ä½¿ç”¨ --exclude-module MODULENAME ä¸å¸Œæœ›å¯¼å…¥çš„åº“ï¼Œå¯å¤šæ¬¡ä½¿ç”¨ æ›´è¯¦ç»†çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚çœ‹å®˜æ–¹æ‰‹å†Œï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚ é—®é¢˜ï¼šæ‰“åŒ…åç¨‹åºä½“ç§¯å¤ªå¤§ ç”±äºç¬”è€…ä½¿ç”¨çš„æ˜¯Anacondaä½œä¸ºPythonç¯å¢ƒï¼Œæœ€è¿‘æœ‰ä¸ªé¡¹ç›®éœ€è¦å°†Pythonä»£ç æ‰“åŒ…æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨ä¹‹å‰çš„éœ€æ±‚ä¸­æ²¡æœ‰ä½¿ç”¨ç§‘å­¦è®¡ç®—åº“ï¼ˆä¾‹å¦‚numpyã€pandasç­‰ï¼‰æ‰€ä»¥æ‰“åŒ…å‡ºæ¥çš„ç»“æœä¹Ÿå°±10Må·¦å³ï¼Œå®Œå…¨å¯ä»¥æ¥å—ã€‚ä½†æ˜¯æœ€è¿‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†numpyç­‰ç§‘å­¦è®¡ç®—åº“ä¹‹åï¼Œç¨‹åºæ‰“åŒ…çš„ç»“æœæ¥è¿‘1Gå·¦å³ï¼Œè¿™æ ·çš„æ‰“åŒ…ç»“æœç®€ç›´ä»¤äººçª’æ¯ã€‚è¿™é‡Œä¸»è¦æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š1. ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒæ‰“åŒ… 2. ä½¿ç”¨çº¯å‡€ç‰ˆæœ¬çš„Pythonæ‰“åŒ… æ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ã€‚ ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒæ‰“åŒ… Pythonè™šæ‹Ÿç¯å¢ƒæœ‰Anacondaã€virtualenvä»¥åŠpipenvï¼Œä½†æ˜¯Anacondaæ‰“åŒ…çš„ç¨‹åºä½“ç§¯å¤ªå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é¿å¼€Anacondaã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»çš„è™šæ‹Ÿç¯å¢ƒæ˜¯pipenvï¼Œå®ƒæ˜¯pipå’Œvirtualenvçš„ç»“åˆï¼Œæ‰€ä»¥ä½¿ç”¨èµ·æ¥ä¹Ÿæ›´åŠ æ–¹ä¾¿ï¼Œå¦å¤–å€¼å¾—ä¸€æçš„æ˜¯ï¼Œpipenvå’Œrequestsï¼ˆPythonç½‘ç»œè¯·æ±‚åŒ…ï¼‰æ˜¯åŒä¸€ä¸ªä½œè€…ã€‚ Pipenvä½¿ç”¨æ•™ç¨‹ å®‰è£…pipenv pip install pipenv åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ é¦–å…ˆè¿›å…¥ä½ çš„é¡¹ç›®æ‰€åœ¨ç›®å½•ï¼Œç„¶åè¾“å…¥ä¸‹é¢çš„å‘½ä»¤å®‰è£…è™šæ‹Ÿç¯å¢ƒï¼š pipenv install --python path\\to\\python æ³¨ï¼š &quot;path\\to\\python&quot;æ˜¯python.exeå¯æ‰§è¡Œç¨‹åºçš„è·¯å¾„ï¼Œå¯ä»¥æ˜¯Anacondaç‰ˆæœ¬çš„Pythonä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°çº¯å‡€ç‰ˆæœ¬çš„Pythonã€‚å› ä¸ºæˆ‘ä»¬éœ€è¦é¿å¼€Anacondaæ‰€ä»¥è¯»è€…æœ€å¥½è‡ªå·±å‰å¾€Pythonå®˜ç½‘ä¸‹è½½çº¯å‡€ç‰ˆæœ¬çš„Pythonï¼Œç„¶åé€šè¿‡ä¸Šé¢å‘½ä»¤å®‰è£…è™šæ‹Ÿç¯å¢ƒã€‚ æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ pipenv shell è¾“å…¥ä¸Šé¢çš„å‘½ä»¤ä¹‹åæˆ‘ä»¬å°±è¿›å…¥äº†è™šæ‹Ÿç¯å¢ƒï¼Œç„¶åæˆ‘ä»¬å¯ä»¥åƒå¹³æ—¶ä¸€æ ·ä½¿ç”¨Pythonã€‚ å®‰è£…ä¾èµ–åº“ åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹å®‰è£… Pyinstaller å’Œä½ è‡ªå·±çš„è„šæœ¬ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“ pipenv install pyinstallerpipenv install numpypipenv install pandaspipenv install matplotlib å½“ç„¶ä¹Ÿå¯ä»¥è¿›å…¥è™šæ‹Ÿç¯å¢ƒåç›´æ¥ä½¿ç”¨pipè¿›è¡Œå®‰è£…ã€‚ é—®é¢˜ï¼šModuleNotFoundError pyinstalleræ‰“åŒ…æˆåŠŸåè¿è¡Œç¨‹åºæç¤ºModuleNotFoundError: No module named 'distutilsâ€™é”™è¯¯è§£å†³åŠæ³•ã€‚ é—®é¢˜åˆ†æï¼šç”±äºpandaséœ€è¦è°ƒç”¨distutilsåº“ï¼ˆPythonè‡ªå¸¦ï¼‰ï¼Œä½†æ˜¯æœ€æ–°ç‰ˆæœ¬çš„virtualenvå’Œpyinstallerå­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œå³æ‰“åŒ…çš„æ—¶å€™ä¼šé—æ¼distutilsåº“ï¼Œç›®å‰è¿™ä¸ªBUGè¿˜æ²¡æœ‰å¾—åˆ°è§£å†³ã€‚å½“ç„¶Githubä¸Šä¹Ÿæœ‰å¾ˆå¤šè§£å†³åŠæ³•ï¼Œå…·ä½“å¯ä»¥å‚è€ƒè¿™é‡Œã€‚ è§£å†³æ–¹æ³•ï¼šç”±äº16.1ç‰ˆæœ¬çš„virtualenvå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é™çº§å®‰è£…virtualenvã€‚1. é¦–å…ˆæˆ‘ä»¬éœ€è¦å¸è½½æ–°ç‰ˆçš„virtualenvï¼Œç„¶åå®‰è£…16.1ç‰ˆæœ¬çš„virtualenvï¼›2. å¸è½½åŸæ¥çš„è™šæ‹Ÿç¯å¢ƒï¼Œç„¶åä½¿ç”¨16.1ç‰ˆæœ¬çš„virtualenvé‡æ–°å®‰è£…è™šæ‹Ÿç¯å¢ƒï¼ˆä½¿ç”¨pipenvå®‰è£…ï¼‰ï¼›3. æœ€åå®‰è£…ç›¸å…³çš„ä¾èµ–åº“é‡æ–°æ‰“åŒ…å³å¯ã€‚ ä½¿ç”¨çº¯å‡€ç‰ˆæœ¬çš„Pythonæ‰“åŒ… ç”±äºæœ¬åœ°å·²ç»å­˜åœ¨Anacondaç¯å¢ƒï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³å†å®‰è£…çº¯å‡€ç‰ˆæœ¬çš„Pythonå¯ä»¥ä½¿ç”¨è™šæ‹Ÿæœºï¼Œä½†æ˜¯ä½¿ç”¨è™šæ‹Ÿæœºå®‰è£…Pythonéœ€è¦å®‰è£…è™šæ‹Ÿæœºè½¯ä»¶ï¼Œç„¶åå®‰è£…Windowsé•œåƒï¼Œæ­¥éª¤è¿‡äºç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¦è¾Ÿè¹Šå¾„â€”â€”ä½¿ç”¨ä¸´æ—¶ç¯å¢ƒå˜é‡ã€‚ é¦–å…ˆå‰å¾€Pythonå®˜ç½‘ä¸‹è½½çº¯å‡€çš„Pythonç¯å¢ƒå¹¶å®‰è£…åˆ°æœ¬åœ°ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ‰¹å¤„ç†è„šæœ¬è®¾ç½®ä¸´æ—¶ç¯å¢ƒå˜é‡ï¼Œä¸ºäº†æ–¹ä¾¿å¯ä»¥å°†ä¸‹é¢çš„è„šæœ¬ä¿å­˜åˆ°batchè„šæœ¬æ–‡ä»¶ä¸­ï¼ˆä¾‹å¦‚å‘½åä¸ºset_python_path.batï¼‰ï¼Œå¹¶å°†è¯¥è„šæœ¬æ”¾åˆ°c:\\windowsä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ä»»ä½•ç›®å½•ä¸‹åˆ‡æ¢Pythonç¯å¢ƒäº†ã€‚ set_python_path.bat: @echo offset conda_path=d:\\anaconda3set python_path=d:\\program files\\python36rem Approach one: Replace the anaconda installation path with the new python installation pathcall call set path=%%path:%conda_path%=%python_path%%%rem Approach two: Let the new python installation path overwrite the anaconda installation pathrem set path=%python_path%;%python_path%\\Scripts;%path% ä¸Šé¢çš„ä»£ç ä¸­conda_pathæ˜¯Anacondaçš„å®‰è£…è·¯å¾„ï¼Œpython_pathæ˜¯çº¯å‡€ç‰ˆæœ¬çš„Pythonå®‰è£…è·¯å¾„ã€‚è®¾ç½®ä¸´æ—¶çš„Pythonç¯å¢ƒå˜é‡ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼šæ–¹æ³•ä¸€æ˜¯æ›¿æ¢ç¯å¢ƒå˜é‡ä¸­Anacondaå®‰è£…è·¯å¾„ä¸ºçº¯å‡€ç‰ˆæœ¬çš„Pythonå®‰è£…è·¯å¾„ï¼›æ–¹æ³•äºŒæ˜¯å°†çº¯å‡€ç‰ˆæœ¬çš„Pythonå®‰è£…è·¯å¾„æ”¾åˆ°æ‰€æœ‰è·¯å¾„ä¹‹å‰è¿™æ ·å°±å¯ä»¥è¦†ç›–Anacondaçš„è·¯å¾„ã€‚ æˆ‘ä»¬åœ¨è¿è¡Œå®Œä¸Šé¢çš„è„šæœ¬ä¹‹åå°±å¯ä»¥åˆ‡æ¢åˆ°æ–°çš„Pythonç¯å¢ƒï¼Œç„¶åå®‰è£…Pyinstallerå’Œç›¸å…³çš„ä¾èµ–åŒ…è¿›è¡Œæ‰“åŒ…ã€‚ æœ€å ä½¿ç”¨ä¸Šé¢ä¸¤è€…æ–¹æ³•ä¹‹ä¸€ï¼ŒåŸå…ˆæ¥è¿‘1Gçš„ç¨‹åºï¼Œç°åœ¨åªæœ‰40Må·¦å³ã€‚ Enjoy it!","categories":[{"name":"python","slug":"python","permalink":"http://chiang97912.github.io/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"http://chiang97912.github.io/tags/python/"},{"name":"Pyinstaller","slug":"Pyinstaller","permalink":"http://chiang97912.github.io/tags/Pyinstaller/"},{"name":"pythonç¨‹åºæ‰“åŒ…","slug":"pythonç¨‹åºæ‰“åŒ…","permalink":"http://chiang97912.github.io/tags/python%E7%A8%8B%E5%BA%8F%E6%89%93%E5%8C%85/"},{"name":"pipenv","slug":"pipenv","permalink":"http://chiang97912.github.io/tags/pipenv/"},{"name":"virtualenv","slug":"virtualenv","permalink":"http://chiang97912.github.io/tags/virtualenv/"}]},{"title":"ä½¿ç”¨VIMä½œä¸ºIDE","slug":"ä½¿ç”¨VIMä½œä¸ºIDE","date":"2019-08-01T02:40:24.000Z","updated":"2025-12-13T12:18:36.570Z","comments":true,"path":"2019/08/01/ä½¿ç”¨VIMä½œä¸ºIDE/","permalink":"http://chiang97912.github.io/2019/08/01/%E4%BD%BF%E7%94%A8VIM%E4%BD%9C%E4%B8%BAIDE/","excerpt":"Windowsç¯å¢ƒ æ’ä»¶ç®¡ç†å™¨ VIMçš„æ’ä»¶ç®¡ç†å™¨ä¸»è¦æœ‰vim-plugå’Œvundle","text":"Windowsç¯å¢ƒ æ’ä»¶ç®¡ç†å™¨ VIMçš„æ’ä»¶ç®¡ç†å™¨ä¸»è¦æœ‰vim-plugå’Œvundle Vim-plug é¦–å…ˆä¸‹è½½vim-plugï¼Œå¯ä»¥å»githubä¸‹è½½ ä¸‹è½½å®Œæˆåè§£å‹å‹ç¼©åŒ…å°†plug.vimå¤åˆ¶åˆ°vimå®‰è£…ç›®å½•ä¸‹çš„autoloadæ–‡ä»¶å¤¹ä¸‹ï¼Œå³å¯å®Œæˆvim-plugçš„å®‰è£…ã€‚ ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œgvim,ï¼Œç„¶åç‚¹å‡»gvimçš„â€œç¼–è¾‘â€â€”â€”â€œå¯åŠ¨è®¾å®šâ€ï¼Œæ‰“å¼€_vimrcé…ç½®æ–‡ä»¶ã€‚ æ’ä»¶å®‰è£…ç¤ºä¾‹ åœ¨_vimrcä¸­æ·»åŠ å¦‚ä¸‹çš„å†…å®¹ï¼Œè¿™é‡Œä»¥vim-plugä¸‹è½½nerdtreeæ’ä»¶ä¸ºä¾‹ã€‚è®¾ç½®å®Œæˆåä¿å­˜è®¾ç½®ã€‚ call plug#begin(&#x27;~/.vim/plugged&#x27;) &quot;æ’ä»¶ä¿å­˜çš„ç›®å½•Plug &#x27;scrooloose/nerdtree&#x27;, &#123;&#x27;on&#x27;: &#x27;NERDTreeToggle&#x27;&#125; &quot;NERDTreeæ’ä»¶call plug#end() å¸¸ç”¨æ“ä½œ å‘½ä»¤ è§£é‡Š :PlugStatus æŸ¥çœ‹æ’ä»¶å®‰è£…çŠ¶æ€ :PlugInstall å®‰è£…åœ¨_vimrcä¸­é…ç½®çš„æ’ä»¶ã€‚æ³¨æ„å‘½ä»¤çš„å¤§å°å†™ï¼Œæ‰§è¡Œåvim-plugä¼šè‡ªåŠ¨å…‹éš†å¹¶å®‰è£…æ’ä»¶ :PlugUpdate æ›´æ–°æ’ä»¶ :PlugClean æ¸…ç†æ’ä»¶ï¼ˆéœ€è¦å…ˆåœ¨_vimrcä¸­åˆ é™¤æˆ–æ³¨é‡Šï¼‰ :PlugUpgrade æ›´æ–°vim-plug Vundle é¦–å…ˆä¸‹è½½vundleï¼Œå¯ä»¥å»githubä¸‹è½½ ä¸‹è½½å®Œæˆåè§£å‹å‹ç¼©åŒ…åˆ°vimå®‰è£…ç›®å½•ä¸‹çš„bundleæ–‡ä»¶å¤¹ä¸‹ï¼ˆæ²¡æœ‰å°±æ–°å»ºï¼‰ï¼Œå³å¯å®Œæˆvundleçš„å®‰è£…ã€‚ ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œgvim,ï¼Œç„¶åç‚¹å‡»gvimçš„â€œç¼–è¾‘â€â€”â€”â€œå¯åŠ¨è®¾å®šâ€ï¼Œæ‰“å¼€_vimrcé…ç½®æ–‡ä»¶ã€‚ æ’ä»¶å®‰è£…ç¤ºä¾‹ åœ¨_vimrcä¸­æ·»åŠ å¦‚ä¸‹çš„å†…å®¹ï¼Œè¿™é‡Œä»¥vundleä¸‹è½½nerdtreeæ’ä»¶ä¸ºä¾‹ã€‚è®¾ç½®å®Œæˆåä¿å­˜è®¾ç½®ã€‚ set rtp+=~/.vim/bundle/Vundle.vimcall vundle#begin()Plugin &#x27;VundleVim/Vundle.vim&#x27;Plugin &#x27;scrooloose/nerdtree&#x27;call vundle#end() å¸¸ç”¨æ“ä½œ å‘½ä»¤ è§£é‡Š :PluginList æŸ¥çœ‹æ’ä»¶å®‰è£…çŠ¶æ€ :PluginInstall å®‰è£…åœ¨_vimrcä¸­é…ç½®çš„æ’ä»¶ã€‚æ³¨æ„å‘½ä»¤çš„å¤§å°å†™ï¼Œæ‰§è¡Œåvundleä¼šè‡ªåŠ¨å…‹éš†å¹¶å®‰è£…æ’ä»¶ :PluginUpdate æ›´æ–°æ’ä»¶ :PluginClean æ¸…ç†æ’ä»¶ï¼ˆéœ€è¦å…ˆåœ¨_vimrcä¸­åˆ é™¤æˆ–æ³¨é‡Šï¼‰ :PluginSearch æœç´¢æ’ä»¶ï¼Œä¾‹å¦‚:PluginSearch xmlå¯ä»¥æœåˆ°xmlç›¸å…³çš„æ’ä»¶ Pythonè‡ªåŠ¨è¡¥å…¨ Pythonè‡ªåŠ¨è¡¥å…¨æ’ä»¶è¿™é‡Œä¸»è¦ä½¿ç”¨jedi-vimï¼Œå…·ä½“é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š åœ¨_vimrcä¸­æ·»åŠ å¦‚ä¸‹çš„å†…å®¹ï¼Œè®¾ç½®å®Œæˆåä¿å­˜è®¾ç½®ã€‚ &quot;æ’ä»¶ç®¡ç† vim-plugcall plug#begin(&#x27;~/.vim/plugged&#x27;) &quot;æ’ä»¶ä¿å­˜çš„ç›®å½•Plug &#x27;davidhalter/jedi-vim&#x27;,call plug#end() ç„¶ååœ¨gvimä¸­è¾“å…¥:PlugInstallå®‰è£…jedi-vimæ’ä»¶ æ³¨æ„: Vimå’Œç‰ˆæœ¬ä¸€å®šè¦å’ŒPythonç›¸åŒ¹é…ï¼Œå³32ä½Vimé…32ä½Python, 64ä½Vimé…64ä½Pythonã€‚ Vimä½¿ç”¨Pythonç¼–è¯‘çš„ç‰ˆæœ¬ä¸€å®šè¦å’Œç”µè„‘ä¸Šå®‰è£…çš„Pythonç‰ˆæœ¬å¯¹åº”ï¼Œå¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š Error: jedi-vim failed to initialize Python: jedi-vim requires Vim with support for Python 2 or 3. (in function jedi#init_python[4]..48_init_python, line 10) æˆ–è€…åœ¨gvimä¸­è¾“å…¥:python3 print(&quot;Hello world&quot;)å‡ºç°å¦‚ä¸‹ç±»ä¼¼çš„é”™è¯¯ï¼š E370: Could not load library python37.dllE263: Sorry, this command is disabled, the Python library could not be loaded. é‚£ä¹ˆå¯ä»¥åœ¨_vimrcä¸­æ·»åŠ å¦‚ä¸‹å‘½ä»¤æŒ‡å®šPython3ç‰ˆæœ¬ï¼š set pythonthreedll=python36.dll ç”±äºç¬”è€…å®‰è£…çš„vim8.1ä½¿ç”¨çš„æ˜¯Python3.7ç¼–è¯‘ï¼Œä½†æ˜¯ç”µè„‘ç¯å¢ƒè£…çš„æ˜¯Python3.6ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸Šé¢é…ç½®æ¥è§£å†³Windowsç¯å¢ƒä¸­gvimä¸æ”¯æŒpython3.6çš„é—®é¢˜ã€‚ C/C++è‡ªåŠ¨è¡¥å…¨ C/C++è‡ªåŠ¨è¡¥å…¨æ’ä»¶è¿™é‡Œä¸»è¦ä½¿ç”¨ctags + OmniCppCompleteæ–¹æ¡ˆï¼Œå…·ä½“é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š Ctags å…¨å Exuberant Ctagsï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºã€‚å®ƒå¯ä»¥ä¸ºå„ç§è¯­è¨€çš„æºä»£ç ç”Ÿæˆè¯­è¨€å…ƒç´ ï¼ˆlanguage objectï¼‰ç´¢å¼•æ–‡ä»¶ã€‚å¯¹äº C/C++ è€Œè¨€ï¼Œå°±æ˜¯æŠŠæºä»£ç ä¸­çš„å„ç§å®ã€å‡½æ•°ã€ç±»ã€ç±»æˆå‘˜ç­‰ç­‰å…ƒç´ å’Œå®ƒä»¬çš„ç›¸å…³ä¿¡æ¯ç”Ÿæˆç´¢å¼•æ–‡ä»¶ï¼Œä¾›å…¶å®ƒç¨‹åºä½¿ç”¨ã€‚OmniCppComplete æ˜¯ä¸“ä¸º C/C++ ç¼–å†™çš„OmniCompleteä¸€ä¸ªè¡¥å…¨è„šæœ¬ï¼Œå®ƒæ ¹æ® Ctags ç”Ÿæˆçš„ç´¢å¼•æ–‡ä»¶å¯¹ä»£ç è¿›è¡Œè¡¥å…¨ã€‚ å®‰è£…Ctags ä»Ctagså®˜ç½‘ä¸‹è½½ Ctags å¯æ‰§è¡Œæ–‡ä»¶ å°†ä¸‹è½½åˆ°çš„æ–‡ä»¶ï¼ˆä»… EXE æ–‡ä»¶å³å¯ï¼‰è§£å‹åˆ°ä¸€ä¸ªç›®å½•ï¼Œä¾‹å¦‚ C:/ctags å°†è¯¥ç›®å½•åŠ å…¥ç¯å¢ƒå˜é‡ PATH ç”Ÿæˆç´¢å¼•æ–‡ä»¶ ä»¥ç”Ÿæˆ C++ æ ‡å‡†åº“ç´¢å¼•æ–‡ä»¶ä¸ºä¾‹ï¼š ä¸‹è½½ä¸“ä¸º Ctags ä¿®æ”¹è¿‡çš„ libstdc++ å¤´æ–‡ä»¶ å°†å…¶è§£å‹åˆ°ä¸€ä¸ªç›®å½•ï¼Œä¾‹å¦‚ C:/ctags/cpp_src ä½¿ç”¨å‘½ä»¤è¡Œè¿›å…¥ D:/ctags/cpp_src åæ‰§è¡Œï¼š ctags -R --sort=1 --c++-kinds=+p --fields=+iaS --extra=+q --language-force=C++ -f cpp . å»ºè®®å°†ä¸Šä¸€æ­¥ç”Ÿæˆçš„ C:/ctags/cpp_src/cpp æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªä¸“é—¨æ”¾ç½®ç´¢å¼•æ–‡ä»¶çš„ç›®å½•ä»¥ä¾¿åé¢çš„ç»Ÿä¸€è®¾ç½®ï¼Œä¾‹å¦‚æ”¾åˆ° C:/ctags/tags å…¶å®ƒåº“çš„ç´¢å¼•æ–‡ä»¶ä¹Ÿå¯ä»¥ä¾æ³•ç‚®åˆ¶ï¼Œåªéœ€åˆ‡æ¢åˆ°è¯¥åº“çš„ include æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œï¼š ctags -R --sort=yes --c++-kinds=+p --fields=+iaS --extra=+q --language-force=C++ -f &lt;æ–‡ä»¶å&gt; . å®‰è£…OmniCppComplete ä½¿ç”¨æ’ä»¶ç®¡ç†å™¨å®‰è£…OmniCppComplete ä¿®æ”¹VIMé…ç½®æ–‡ä»¶_vimrcï¼ŒåŠ å…¥å¦‚ä¸‹å†…å®¹ï¼š &quot; ctags ç´¢å¼•æ–‡ä»¶set tags+=C:/ctags/tags/cpp &quot; æŒ‡å®štagså­˜æ”¾è·¯å¾„&quot; OmniCppCompletelet OmniCpp_NamespaceSearch = 1let OmniCpp_GlobalScopeSearch = 1let OmniCpp_ShowAccess = 1let OmniCpp_ShowPrototypeInAbbr = 1 &quot; æ˜¾ç¤ºå‡½æ•°å‚æ•°åˆ—è¡¨let OmniCpp_MayCompleteDot = 1 &quot; è¾“å…¥ . åè‡ªåŠ¨è¡¥å…¨let OmniCpp_MayCompleteArrow = 1 &quot; è¾“å…¥ -&gt; åè‡ªåŠ¨è¡¥å…¨let OmniCpp_MayCompleteScope = 1 &quot; è¾“å…¥ :: åè‡ªåŠ¨è¡¥å…¨let OmniCpp_DefaultNamespaces = [&quot;std&quot;, &quot;_GLIBCXX_STD&quot;]&quot; è‡ªåŠ¨å…³é—­è¡¥å…¨çª—å£au CursorMovedI,InsertLeave * if pumvisible() == 0|silent! pclose|endifset completeopt=menuone,menu,longestfiletype plugin indent on åœ¨æ’å…¥æ¨¡å¼ç¼–è¾‘ C/C++ æºæ–‡ä»¶æ—¶æŒ‰ä¸‹ . æˆ– -&gt; æˆ– ::ï¼Œæˆ–è€…æ‰‹åŠ¨æŒ‰ä¸‹ Ctrl+X Ctrl+O åå°±ä¼šå¼¹å‡ºè‡ªåŠ¨è¡¥å…¨çª—å£ï¼Œæ­¤æ—¶å¯ä»¥ç”¨ Ctrl+N å’Œ Ctrl+P ä¸Šä¸‹ç§»åŠ¨å…‰æ ‡è¿›è¡Œé€‰æ‹©ã€‚ è‡ªåŠ¨ç”Ÿæˆtagsæ–‡ä»¶ omniæ’ä»¶çš„è¡¥å…¨æ˜¯ä¾èµ–äºtagsæ–‡ä»¶çš„ï¼Œå› æ­¤éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»ºç«‹tagsæ–‡ä»¶: ctags -R --sort=yes --c++-kinds=+p --fields=+iaS --extra=+q --language-force=C++ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç è®©vimåœ¨ä¿å­˜æ–‡ä»¶åè‡ªåŠ¨ç”Ÿæˆtagsæ–‡ä»¶: au BufWritePost *.c,*.cpp,*.cc,*.h silent! !ctags -R --sort=yes --c++-kinds=+p --fields=+iaS --extra=+q --language-force=C++ å…¶ä¸­silent!è¡¨ç¤ºé™é»˜è¿è¡Œå‘½ä»¤ï¼Œä¸ç„¶æ¯æ¬¡ä¿å­˜æ–‡ä»¶çš„æ—¶å€™ï¼ŒVim æ€»æ˜¯ä¼šæœ‰ä¸€ä¸ªâ€ctags æ‰§è¡Œå®Œæ¯•â€œçš„æç¤ºï¼ŒæŒ‰ä»»æ„é”®ç¡®è®¤ã€‚ ç”Ÿäº§åŠ›æ’ä»¶ Pythonä»£ç æ£€æŸ¥ï¼šflake8 å®ç”¨æ’ä»¶ç®¡ç†å™¨å®‰è£…flake8 é…ç½®_vimrcæ–‡ä»¶ au BufWritePost *.py call Flake8() æ³¨é‡Š/å–æ¶ˆæ³¨é‡Šï¼švim-commentary è¿™ä¸ªæ’ä»¶å¯ä»¥å¿«é€Ÿæ³¨é‡Šä¸åæ³¨é‡Šå¤šè¡Œå†…å®¹, ä½†æ˜¯å®ƒçš„æ³¨é‡Šç¬¦ä½¿ç”¨çš„æ˜¯ commentstring, é»˜è®¤æ˜¯ /* %s */, ä½†è¿™ä¸ªå€¼æ»¡è¶³ä¸äº†Python å’Œ Shellè¿™æ ·çš„è¯­è¨€, åœ¨ _vimrc æ·»åŠ å¦‚ä¸‹å†…å®¹ &quot;ä¸ºpythonå’Œshellç­‰æ·»åŠ æ³¨é‡Šautocmd FileType python,shell,coffee set commentstring=#\\ %s&quot;ä¿®æ”¹æ³¨é‡Šé£æ ¼autocmd FileType java,c,cpp set commentstring=//\\ %s æ™®é€šæ¨¡å¼ä¸‹gcc æŒ‡ä»¤å¯ä»¥æ³¨é‡Š/å–æ¶ˆæ³¨é‡Š å¯è§†æ¨¡å¼ä¸‹gc å‘½ä»¤å¯ä»¥æ³¨é‡Š/æ’¤é”€æ³¨é‡Š ç¼©è¿›æç¤ºï¼šindentLine indentLineæ˜¯ä¸€æ¬¾Vimä¸‹ç”¨äºæ˜¾ç¤ºç¼©è¿›æŒ‡ç¤ºçº¿çš„æ’ä»¶ã€‚å¯¹äºPythonã€Golangç­‰é ä»£ç ç¼©è¿›æ¥æ ‡è¯†ä»£ç å—çš„è¯­è¨€æ¥è¯´ï¼ŒindentLineæä¾›çš„ç¼©è¿›æŒ‡ç¤ºåŠŸèƒ½éå¸¸æœ‰ç”¨ã€‚indentLineå®‰è£…ä¹‹åå³å¯ä½¿ç”¨ï¼Œä¸éœ€è¦é¢å¤–çš„é…ç½®ã€‚ è®¾ç½®indentLineï¼š set list lcs=tab:\\|\\ &quot; æœ€åé¢æœ‰ç©ºæ ¼let g:indentLine_leadingSpaceChar = &#x27;.&#x27;let g:indentLine_leadingSpaceEnabled = 1 å®ç”¨é…ç½® ä»£ç æŠ˜å  &quot; Enable foldingset foldmethod=syntax &quot; è¯­æ³•æŠ˜å set foldlevelstart=99 &quot; å…³é—­è‡ªåŠ¨æŠ˜å  zc å…³é—­æŠ˜å  zo æ‰“å¼€æŠ˜å  za æ‰“å¼€/å…³é—­æŠ˜å äº’ç›¸åˆ‡æ¢ ç³»ç»Ÿå‰ªè´´æ¿ é€šå¸¸Vimä¼šå¿½è§†ç³»ç»Ÿå‰ªè´´æ¿ï¼Œè€Œä½¿ç”¨è‡ªå¸¦çš„å‰ªè´´æ¿ã€‚ä½†æ˜¯æœ‰æ—¶å€™ä½ æƒ³ä»Vimä¹‹å¤–çš„ç¨‹åºä¸­å‰ªåˆ‡ã€å¤åˆ¶ã€ç²˜è´´æ–‡æœ¬ã€‚ä½ å¯ä»¥é€šè¿‡è¿™è¡Œä»£ç è®¿é—®ä½ çš„ç³»ç»Ÿå‰ªè´´æ¿ï¼š set clipboard=unnamed ç¦æ­¢ç”Ÿæˆç¼“å­˜æ–‡ä»¶ æ¯æ¬¡è¾“å…¥ä¿å­˜å‘½ä»¤ä¹‹åç³»ç»Ÿéƒ½ä¼šç”Ÿæˆä»¥.un~å’Œ.bakç»“å°¾çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„é…ç½®ç¦æ­¢vimç”Ÿæˆundoæ–‡ä»¶å’Œå¤‡ä»½æ–‡ä»¶: set noundofileset nobackupset noswapfile ä¸»é¢˜æ’ä»¶ ä¸»é¢˜æ’ä»¶æ¨èä½¿ç”¨flazz/vim-colorschemes å¯ä»¥ä½¿ç”¨vim-plugå®‰è£…ï¼Œç„¶åå†é…ç½®_vimrcæ–‡ä»¶ï¼Œä¾‹å¦‚åœ¨é…ç½®æ–‡ä»¶ä¸­å¢åŠ ä¸‹é¢çš„ä»£ç ï¼š colorscheme wombat Mac &amp; Linuxç¯å¢ƒ æ’ä»¶ç®¡ç†å™¨å®‰è£… ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…plug-vimæ’ä»¶: mkdir -vp ~/.vim/autoload/cd ~/.vim/autoload/wget https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim å®‰è£…ç¤ºä¾‹ ä»ç„¶ä»¥NERDTreeæ’ä»¶å®‰è£…ä¸ºä¾‹ï¼š ç¼–è¾‘é…ç½®æ–‡ä»¶vim ~/.vimrc &quot;æ’ä»¶ç®¡ç† vim-plugcall plug#begin(&#x27;~/.vim/plugged&#x27;) &quot;æ’ä»¶ä¿å­˜çš„ç›®å½•Plug &#x27;scrooloose/nerdtree&#x27;, &#123;&#x27;on&#x27;: &#x27;NERDTreeToggle&#x27;&#125; &quot;NERDTreeæ’ä»¶call plug#end() å…¶ä»–æ“ä½œå’ŒWindowsç³»ç»Ÿç›¸åŒã€‚","categories":[{"name":"VIM","slug":"VIM","permalink":"http://chiang97912.github.io/categories/VIM/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://chiang97912.github.io/tags/Python/"},{"name":"VIM","slug":"VIM","permalink":"http://chiang97912.github.io/tags/VIM/"},{"name":"C/C++","slug":"C-C","permalink":"http://chiang97912.github.io/tags/C-C/"}]},{"title":"MaskçŸ©é˜µåœ¨æ·±åº¦å­¦ä¹ ä¸­çš„åº”ç”¨","slug":"MaskçŸ©é˜µåœ¨æ·±åº¦å­¦ä¹ ä¸­çš„åº”ç”¨","date":"2019-07-31T17:20:49.000Z","updated":"2025-12-13T14:02:51.261Z","comments":true,"path":"2019/08/01/MaskçŸ©é˜µåœ¨æ·±åº¦å­¦ä¹ ä¸­çš„åº”ç”¨/","permalink":"http://chiang97912.github.io/2019/08/01/Mask%E7%9F%A9%E9%98%B5%E5%9C%A8%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/","excerpt":"å®šä¹‰ maskçŸ©é˜µæ˜¯ä¸€ä¸ªç”±0å’Œ1ç»„æˆçš„çŸ©é˜µã€‚åœ¨NLPä¸­ï¼Œä¸€ä¸ªå¸¸è§çš„é—®é¢˜æ˜¯è¾“å…¥åºåˆ—é•¿åº¦ä¸ç­‰ï¼Œè€Œmaskå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¤„ç†ã€‚è™½ç„¶RNNç­‰æ¨¡å‹å¯ä»¥å¤„ç†ä¸å®šé•¿çš„è¾“å…¥ï¼Œä½†æ˜¯åœ¨å®è·µä¸­ï¼Œéœ€è¦å¯¹è¾“å…¥ä¸­é•¿åº¦è¾ƒçŸ­çš„å¥å­è¿›è¡Œå¡«å……ï¼Œå³åœ¨å¥å°¾å¡«å……0å ä½ï¼Œè½¬æ¢æˆå›ºå®šå¤§å°çš„tensorï¼Œæ–¹ä¾¿çŸ©é˜µæ“ä½œã€‚","text":"å®šä¹‰ maskçŸ©é˜µæ˜¯ä¸€ä¸ªç”±0å’Œ1ç»„æˆçš„çŸ©é˜µã€‚åœ¨NLPä¸­ï¼Œä¸€ä¸ªå¸¸è§çš„é—®é¢˜æ˜¯è¾“å…¥åºåˆ—é•¿åº¦ä¸ç­‰ï¼Œè€Œmaskå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¤„ç†ã€‚è™½ç„¶RNNç­‰æ¨¡å‹å¯ä»¥å¤„ç†ä¸å®šé•¿çš„è¾“å…¥ï¼Œä½†æ˜¯åœ¨å®è·µä¸­ï¼Œéœ€è¦å¯¹è¾“å…¥ä¸­é•¿åº¦è¾ƒçŸ­çš„å¥å­è¿›è¡Œå¡«å……ï¼Œå³åœ¨å¥å°¾å¡«å……0å ä½ï¼Œè½¬æ¢æˆå›ºå®šå¤§å°çš„tensorï¼Œæ–¹ä¾¿çŸ©é˜µæ“ä½œã€‚ ä¸¾ä¸ªä¾‹å­ï¼š case 1: I like cats.case 2: He does not like cats. å‡è®¾é»˜è®¤çš„åºåˆ—é•¿åº¦æ˜¯5ï¼Œä¸€èˆ¬ä¼šå¯¹case 1åšpadå¤„ç†ï¼Œå˜æˆ I like cats &lt;PAD&gt; &lt;PAD&gt; åœ¨ä¸Šè¿°ä¾‹å­æ•°å­—ç¼–ç åï¼Œå¼€å§‹åšembeddingï¼Œè€Œpadä¹Ÿä¼šæœ‰embeddingå‘é‡ï¼Œä½†padæœ¬èº«æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œå‚ä¸è®­ç»ƒå¯èƒ½è¿˜æ˜¯æœ‰å®³çš„ã€‚å› æ­¤ï¼Œæœ‰å¿…è¦ç»´æŠ¤ä¸€ä¸ªmask tensoræ¥è®°å½•å“ªäº›æ˜¯çœŸå®çš„valueï¼Œä¸Šè¿°ä¾‹å­çš„ä¸¤ä¸ªmaskå¦‚ä¸‹ï¼š 1 1 1 0 01 1 1 1 1 åç»­å†æ¢¯åº¦ä¼ æ’­ä¸­ï¼Œmaskèµ·åˆ°äº†è¿‡æ»¤çš„ä½œç”¨ã€‚ ä½¿ç”¨TensorFlowå®ç°ä¸Šè¿°è¿‡ç¨‹ï¼š import tensorflow as tfmaxlen = 5lengths = [[3, 5, 4], [1, 3, 2]]mask = tf.cast(tf.sequence_mask(lengths, maxlen), tf.float32)sess = tf.Session()mask = sess.run(mask)print(mask) è¿è¡Œç»“æœï¼š [[[1. 1. 1. 0. 0.] [1. 1. 1. 1. 1.] [1. 1. 1. 1. 0.]] [[1. 0. 0. 0. 0.] [1. 1. 1. 0. 0.] [1. 1. 0. 0. 0.]]] ä½œç”¨ ä½¿ç”¨maskçŸ©é˜µæ˜¯ä¸ºäº†è®©é‚£äº›è¢«maskæ‰çš„tensorä¸ä¼šè¢«æ›´æ–°ã€‚ä¸€ä¸ªtensor Tå’ŒåŒæ ·å¤§å°çš„maskçŸ©é˜µMç›¸ä¹˜åœ¨æ¢¯åº¦å›ä¼ çš„æ—¶å€™ï¼ŒTå¯¹åº”maskä¸º0çš„åœ°æ–¹æ¢¯åº¦ä¸º0ã€‚å› æ­¤æƒé‡ä¸ä¼šè¢«æ›´æ–°ã€‚ è¯­è¨€æ¨¡å‹ä¸­å¯ä»¥é˜²æ­¢æœªæ¥ä¿¡æ¯æ³„éœ² åœ¨è¯­è¨€æ¨¡å‹ä¸­ï¼Œå¸¸å¸¸éœ€è¦ä»ä¸Šä¸€ä¸ªè¯é¢„æµ‹ä¸‹ä¸€ä¸ªè¯ï¼Œè€Œç°é˜¶æ®µattentionæ˜¯æ ‡é…ï¼Œæ¯”å¦‚Transformerä¸­çš„self attentionï¼Œå¦‚æœä¸åšmaskï¼Œåœ¨decoderçš„æ—¶å€™å¾ˆå®¹æ˜“æŠŠä¸‹ä¸€ä¸ªè¯çš„ä¿¡æ¯æ³„éœ²äº†ï¼Œå³æŒ‰ä¸Šè¯‰ä¾‹å­ï¼Œä¸èƒ½åœ¨é¢„æµ‹likeè¿™ä¸ªè¯æ—¶å·²ç»çŸ¥é“likeåé¢çš„è¯äº†ã€‚ä½¿ç”¨maskçŸ©é˜µå¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸€é—®é¢˜ã€‚ TensorFlowç”Ÿæˆmaskå¯¹è§’çŸ©é˜µï¼š import tensorflow as tfimport matplotlib.pyplot as pltdef subsequent_mask(size): &quot;Mask out subsequent positions.&quot; attn_mask = tf.ones([size, size]) mask = tf.matrix_band_part(attn_mask, -1, 0) return mask sess = tf.Session()mask = sess.run(subsequent_mask(10))print(mask)# Display matrixplt.matshow(mask)plt.show() è¿è¡Œç»“æœï¼š [[1. 0. 0. 0. 0. 0. 0. 0. 0. 0.] [1. 1. 0. 0. 0. 0. 0. 0. 0. 0.] [1. 1. 1. 0. 0. 0. 0. 0. 0. 0.] [1. 1. 1. 1. 0. 0. 0. 0. 0. 0.] [1. 1. 1. 1. 1. 0. 0. 0. 0. 0.] [1. 1. 1. 1. 1. 1. 0. 0. 0. 0.] [1. 1. 1. 1. 1. 1. 1. 0. 0. 0.] [1. 1. 1. 1. 1. 1. 1. 1. 0. 0.] [1. 1. 1. 1. 1. 1. 1. 1. 1. 0.] [1. 1. 1. 1. 1. 1. 1. 1. 1. 1.]] å‚è€ƒ [1]: MaskçŸ©é˜µåœ¨æ·±åº¦å­¦ä¹ ä¸­æœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ [2]: æµ…è°ˆmaskçŸ©é˜µ","categories":[{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"http://chiang97912.github.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"},{"name":"NLP","slug":"æ·±åº¦å­¦ä¹ /NLP","permalink":"http://chiang97912.github.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/NLP/"}],"tags":[{"name":"tensorflow","slug":"tensorflow","permalink":"http://chiang97912.github.io/tags/tensorflow/"},{"name":"Python","slug":"Python","permalink":"http://chiang97912.github.io/tags/Python/"},{"name":"Deep Learning","slug":"Deep-Learning","permalink":"http://chiang97912.github.io/tags/Deep-Learning/"},{"name":"NLP","slug":"NLP","permalink":"http://chiang97912.github.io/tags/NLP/"}]},{"title":"Gitå¸¸ç”¨æ“ä½œè®°å½•","slug":"Gitå¸¸ç”¨æ“ä½œè®°å½•","date":"2019-03-24T07:26:30.000Z","updated":"2025-12-13T14:03:07.177Z","comments":true,"path":"2019/03/24/Gitå¸¸ç”¨æ“ä½œè®°å½•/","permalink":"http://chiang97912.github.io/2019/03/24/Git%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/","excerpt":"åŸºæœ¬æ“ä½œ GitåŸºæœ¬é…ç½®ï¼ˆgit configï¼‰ git configå¯ä»¥é…ç½®gitçš„å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨git config --listæŸ¥çœ‹å·²ç»é…ç½®çš„gitå‚æ•°ã€‚å…¶ä¸­æœ‰ä¸‰ä¸ªçº§åˆ«çš„ä¿å­˜ä½ç½®ï¼Œâ€“systemã€â€“globalã€â€“localï¼Œåˆ†åˆ«è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·ï¼ˆæœ¬ç³»ç»Ÿï¼‰ã€å½“å‰ç”¨æˆ·ï¼ˆå…¨å±€ï¼‰ã€æœ¬åœ°é…ç½®ï¼ˆå½“å‰ç›®å½•ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨â€“localã€‚","text":"åŸºæœ¬æ“ä½œ GitåŸºæœ¬é…ç½®ï¼ˆgit configï¼‰ git configå¯ä»¥é…ç½®gitçš„å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨git config --listæŸ¥çœ‹å·²ç»é…ç½®çš„gitå‚æ•°ã€‚å…¶ä¸­æœ‰ä¸‰ä¸ªçº§åˆ«çš„ä¿å­˜ä½ç½®ï¼Œâ€“systemã€â€“globalã€â€“localï¼Œåˆ†åˆ«è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·ï¼ˆæœ¬ç³»ç»Ÿï¼‰ã€å½“å‰ç”¨æˆ·ï¼ˆå…¨å±€ï¼‰ã€æœ¬åœ°é…ç½®ï¼ˆå½“å‰ç›®å½•ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨â€“localã€‚ é…ç½®ç”¨æˆ·ååŠé‚®ç®± åœ¨ä½¿ç”¨Gitæäº¤å‰ï¼Œå¿…é¡»é…ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼Œè¿™äº›ä¿¡æ¯ä¼šæ°¸ä¹…ä¿å­˜åˆ°å†å²è®°å½•ä¸­ã€‚ git config --global user.name &quot;Peter&quot;git config --global user.email Peter@gmail.com åˆ›å»ºGitä»“åº“ï¼ˆgit initï¼‰ å¯ä»¥ç›´æ¥è°ƒç”¨git initåˆå§‹åŒ–å½“å‰ç›®å½•ï¼Œå³åˆ›å»ºGitä»“åº“ã€‚ è·å–Gitä»“åº“ï¼ˆgit cloneï¼‰ å¦‚æœéœ€è¦å…‹éš†è¿œç¨‹ä»“åº“ï¼Œå¯ä»¥ä½¿ç”¨git cloneï¼Œæ¯”å¦‚ï¼š git clone https://github.com/tensorflow/tensorflow.git æäº¤æ›´æ–° Gitä¸­æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸‰ç§çŠ¶æ€ï¼šcommittedã€stagedã€modifiedã€‚å®ƒä»¬ä¹‹é—´å…³ç³»å¦‚ä¸‹ï¼š modified=&gt; staged=&gt; committed å¦‚æœä½ åœ¨æœ¬åœ°ä¿®æ”¹äº†æ–‡ä»¶ï¼Œåˆ™æ–‡ä»¶çŠ¶æ€å°±å˜æˆmodifiedï¼›å¦‚æœä½¿ç”¨git addå‘½ä»¤ï¼Œæ–‡ä»¶çš„çŠ¶æ€å˜æˆstagedï¼›å¦‚æœä½¿ç”¨git commitå‘½ä»¤ï¼Œæ–‡ä»¶çš„çŠ¶æ€å°±å˜æˆcommitedã€‚ è¿˜æœ‰ä¸€ç§æ–‡ä»¶çŠ¶æ€ï¼Œæœªè·Ÿè¸ªçŠ¶æ€ï¼ˆunversioned/untrackedï¼‰ï¼Œé€šè¿‡ä½¿ç”¨git addå¯ä»¥æŠŠæœªè·Ÿè¸ªçŠ¶æ€å˜æ›´ä¸ºstagedï¼›é€šè¿‡git rmå¯ä»¥å°†stagedæˆ–è€…committedçŠ¶æ€å˜ä¸ºæœªè·Ÿè¸ªçŠ¶æ€ã€‚ git status: æŸ¥çœ‹åœ¨ä½ ä¸Šæ¬¡æäº¤ä¹‹åæ˜¯å¦æœ‰ä¿®æ”¹ã€‚ git add: å°†æƒ³è¦å¿«ç…§çš„å†…å®¹å†™å…¥ç¼“å­˜åŒº git commit: å°†ç¼“å­˜åŒºå†…å®¹æ·»åŠ åˆ°ä»“åº“ä¸­ git rm: å¦‚æœåªæ˜¯ç®€å•åœ°ä»å·¥ä½œç›®å½•ä¸­æ‰‹å·¥åˆ é™¤æ–‡ä»¶ï¼Œè¿è¡Œ git status æ—¶å°±ä¼šåœ¨ Changes not staged for commit çš„æç¤ºã€‚è¦ä» Git ä¸­ç§»é™¤æŸä¸ªæ–‡ä»¶ï¼Œå°±å¿…é¡»è¦ä»å·²è·Ÿè¸ªæ–‡ä»¶æ¸…å•ä¸­ç§»é™¤ï¼Œç„¶åæäº¤ã€‚å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤å®Œæˆæ­¤é¡¹å·¥ä½œ æŸ¥çœ‹æäº¤å†å²ï¼ˆgit logï¼‰ ä½¿ç”¨git logæŸ¥çœ‹å½“å‰å·¥ç¨‹çš„æ‰€æœ‰æäº¤çš„æ—¥å¿—ã€‚ git log --stat # ä»…æ˜¾ç¤ºæ‘˜è¦é€‰é¡¹git log --pretty=oneline # å®šåˆ¶è®°å½•æ ¼å¼git log --graph # å›¾åƒåŒ–åˆ†æ”¯å’Œç‰ˆæœ¬æ›´æ–° è¿œç¨‹ä»“åº“ å¯ä»¥ä½¿ç”¨git remoteæŸ¥çœ‹å½“å‰çš„è¿œç¨‹åº“ã€‚ git remote -vå¯ä»¥æ˜¾ç¤ºå¯¹åº”çš„å…‹éš†åœ°å€ã€‚ï¼ˆå¯¹äºå¤šä¸ªè¿œç¨‹ä»“åº“å¾ˆæœ‰ç”¨ï¼‰ æ·»åŠ è¿œç¨‹ä»“åº“ git remote add [short_name] [url]å¯ä»¥æ·»åŠ æ–°çš„è¿œç¨‹ä»“åº“ã€‚ ä¾‹å¦‚ï¼š git remote add origin https://github.com/username/projectname.git ä¿®æ”¹è¿œç¨‹ä»“åº“ æ–¹æ³•ä¸€ï¼šä¿®æ”¹å‘½ä»¤ git remote set-url origin [url] æ³¨ï¼š[url]è¡¨ç¤ºä½ çš„Githubä»“åº“åœ°å€ã€‚ æ–¹æ³•äºŒï¼šå…ˆåˆ é™¤åæ·»åŠ  git remote rm origingit remote add origin [url] æ–¹æ³•ä¸‰ï¼šç›´æ¥ä¿®æ”¹configæ–‡ä»¶ ä»è¿œç¨‹ä»“åº“æŠ“å–æ•°æ® git fetch [remote-name]å¯ä»¥ä»è¿œç¨‹ä»“åº“æŠ“å–æ•°æ®åˆ°æœ¬åœ°ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨git pull æ¨é€æ•°æ®åˆ°è¿œç¨‹ä»“åº“ git push [remote_name] [branch_name] é»˜è®¤ä½¿ç”¨originå’Œmasterã€‚ é»˜è®¤ä½¿ç”¨originå’Œmasterã€‚ â­å¼ºåˆ¶æ¨é€æ•°æ®åˆ°è¿œç¨‹ä»“åº“â­ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨git push --force origin masterå¼ºåˆ¶æ¨é€æœ¬åœ°ä»£ç åˆ°è¿œç¨‹ä»“åº“ï¼Œè¿™æ„å‘³ç€å°†è¦†ç›–æ‰è¿œç¨‹ä»“åº“çš„ä»£ç ã€‚ï¼ˆæ³¨ï¼šâ€“forceå‚æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨-fæ›¿ä»£ï¼‰ æŸ¥çœ‹è¿œç¨‹ä»“åº“ä¿¡æ¯ git remote show origin è¿œç¨‹ä»“åº“çš„åˆ é™¤å’Œé‡å‘½å git remote rename [old_name] [new_name]git remote rm [remote_name] ä¿®æ”¹æäº¤ä¿¡æ¯ ç¬¬ä¸€ç§æƒ…å†µ å¦‚æœéœ€è¦ä¿®æ”¹çš„æäº¤ä¿¡æ¯æ˜¯æœ€åä¸€æ¬¡æäº¤å¹¶ä¸”æ²¡æœ‰æ¨é€ï¼ˆpushï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œä¿®æ”¹ï¼š git commit --amend -m &quot;your new comment&quot; ç¬¬äºŒç§æƒ…å†µ å¦‚æœéœ€è¦ä¿®æ”¹çš„ä¸æ˜¯æœ€åä¸€æ¬¡æäº¤çš„æäº¤ä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨git rebaseå‘½ä»¤ ç¡®å®šä¿®æ”¹çš„æäº¤ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨git logå‘½ä»¤æŸ¥çœ‹éœ€è¦ä¿®æ”¹çš„æäº¤æ˜¯å€’æ•°ç¬¬å‡ æ¬¡æäº¤ æŒ‡å®šå˜åŸºå¯¹è±¡ ä½¿ç”¨å‘½ä»¤git rebase -i HEAD~nå›é€€åˆ°å€’æ•°ç¬¬næ¬¡æäº¤ã€‚è¿è¡Œå‘½ä»¤åä¼šè¿›å…¥åˆ°ç¼–è¾‘å™¨ï¼Œå‡ºç°næ¡commitä¿¡æ¯ï¼Œè¦ä¿®æ”¹å“ªæ¡å°±å°†å…¶å‰é¢pickæ”¹æˆedit,ä¿å­˜å¹¶é€€å‡ºã€‚ ä¿®æ”¹æäº¤ä¿¡æ¯ ç»è¿‡å˜åŸºä¹‹åæˆ‘ä»¬å¯ä»¥åƒç¬¬ä¸€ç§æƒ…å†µä¸€æ ·ä½¿ç”¨git commit --amendå‘½ä»¤ä¿®æ”¹æäº¤ä¿¡æ¯ï¼ˆå¯ä»¥ç›´æ¥è¾“å…¥git commit --amendç„¶åè¿›å…¥ç¼–è¾‘å™¨ä¿®æ”¹æäº¤å†…å®¹ä¹Ÿå¯ä»¥ä½¿ç”¨-mç›´æ¥æŒ‡å®šæ–°çš„æäº¤å†…å®¹ï¼‰ã€‚ æ³¨ï¼šå˜åŸºï¼ˆrebaseï¼‰å’Œåˆå¹¶ï¼ˆmergeï¼‰éƒ½æ˜¯å¯¹åˆ†æ”¯è¿›è¡Œæ“ä½œï¼Œå®ƒä»¬çš„ä¸åŒä¹‹å¤„åœ¨äºå˜åŸºå¯ä»¥ä¿®æ”¹å†å²ã€‚æ‰§è¡Œgit commit --amendåä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼Œå¦‚æœéœ€è¦ä¿ç•™å½“å‰åˆ†æ”¯åˆ™éœ€è¦åˆ é™¤ä¹‹å‰çš„åˆ†æ”¯ï¼Œç„¶åå°†å½“å‰åˆ†æ”¯å‘½åä¸ºä¹‹å‰çš„åˆ†æ”¯åã€‚ æ‰§è¡Œå˜åŸº æ‰§è¡Œgit rebase â€“continueï¼Œå¦‚æœæç¤ºSuccessfully rebased and updatedåˆ™è¡¨ç¤ºå˜åŸºæˆåŠŸã€‚ åˆ†æ”¯æ“ä½œ æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯ ä½¿ç”¨git branchå¯æ˜¾ç¤ºå½“å‰æ‰€æœ‰åˆ†æ”¯ã€‚ å¯ä»¥ä½¿ç”¨â€“mergedå’Œâ€“no-mergedæŸ¥çœ‹å·²ç»åˆå¹¶ã€æœªåˆå¹¶çš„åˆ†æ”¯ã€‚ åˆ›å»ºåŠåˆ‡æ¢åˆ†æ”¯ git branch test # åˆ›å»ºtesting åˆ†æ”¯git checkout test # åˆ‡æ¢åˆ°testingåˆ†æ”¯ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤ç›´æ¥åˆ‡æ¢å¹¶åˆ›å»ºåˆ†æ”¯ git checkout -b test æ³¨æ„åˆ‡æ¢åˆ†æ”¯æ—¶è¯·ä¿æŒå·¥ä½œç›®å½•æ²¡æœ‰æœªæäº¤çš„ä¿®æ”¹ã€‚Gité¼“åŠ±ä½¿ç”¨åˆ†æ”¯ï¼Œå¤„ç†å®Œé—®é¢˜ä¹‹ååˆå¹¶åˆ†æ”¯å³å¯ã€‚ åˆ†æ”¯åˆå¹¶ å°†teståˆ†æ”¯åˆå¹¶åˆ°masterï¼ˆä¸»åˆ†æ”¯ï¼‰ä¸Šï¼Œéœ€è¦é€šè¿‡ä¸‹é¢å‘½ä»¤ï¼š git checkout mastergit merge test åˆå¹¶ä¹‹åå¯ä»¥ä½¿ç”¨git branch -d teståˆ é™¤åˆ†æ”¯ã€‚ å¦‚æœåˆå¹¶æ—¶å­˜åœ¨å†²çªï¼Œéœ€è¦æ‰‹å·¥ä¿®æ”¹ã€‚ â­åˆ é™¤åˆ†æ”¯â­ åˆ é™¤teståˆ†æ”¯ git branch -d test ä¸»å¹²æ›´æ¢ å°†æŸä¸ªåˆ†æ”¯è®¾ç½®ä¸ºä¸»å¹²masterï¼Œæˆ‘ä»¬å¯ä»¥åˆ é™¤ masterï¼ŒæŠŠ dev head æ‰“æ ‡æˆ masterã€‚ git branch -D mastergit checkout -b master","categories":[{"name":"Git","slug":"Git","permalink":"http://chiang97912.github.io/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://chiang97912.github.io/tags/Git/"}]},{"title":"Tensorflowå…±äº«å˜é‡æœºåˆ¶ç†è§£ä¸åº”ç”¨","slug":"tensorflowå…±äº«å˜é‡æœºåˆ¶ç†è§£ä¸åº”ç”¨","date":"2019-02-25T00:33:21.000Z","updated":"2025-12-13T12:14:34.008Z","comments":true,"path":"2019/02/25/tensorflowå…±äº«å˜é‡æœºåˆ¶ç†è§£ä¸åº”ç”¨/","permalink":"http://chiang97912.github.io/2019/02/25/tensorflow%E5%85%B1%E4%BA%AB%E5%8F%98%E9%87%8F%E6%9C%BA%E5%88%B6%E7%90%86%E8%A7%A3%E4%B8%8E%E5%BA%94%E7%94%A8/","excerpt":"åˆ›å»ºå˜é‡ Tensorflowåˆ›å»ºå˜é‡æœ‰ä¸¤ç§æ–¹å¼ï¼š tf.get_variable() tf.Variable() å®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š åœ¨ tf.name_scopeä¸‹æ—¶ï¼Œtf.get_variable()åˆ›å»ºçš„å˜é‡åä¸å— name_scope çš„å½±å“ï¼Œè€Œä¸”åœ¨æœªæŒ‡å®šå…±äº«å˜é‡æ—¶ï¼Œå¦‚æœé‡åä¼šæŠ¥é”™ï¼Œtf.Variable()ä¼šè‡ªåŠ¨æ£€æµ‹æœ‰æ²¡æœ‰å˜é‡é‡åï¼Œå¦‚æœæœ‰åˆ™ä¼šè‡ªè¡Œå¤„ç†ã€‚","text":"åˆ›å»ºå˜é‡ Tensorflowåˆ›å»ºå˜é‡æœ‰ä¸¤ç§æ–¹å¼ï¼š tf.get_variable() tf.Variable() å®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š åœ¨ tf.name_scopeä¸‹æ—¶ï¼Œtf.get_variable()åˆ›å»ºçš„å˜é‡åä¸å— name_scope çš„å½±å“ï¼Œè€Œä¸”åœ¨æœªæŒ‡å®šå…±äº«å˜é‡æ—¶ï¼Œå¦‚æœé‡åä¼šæŠ¥é”™ï¼Œtf.Variable()ä¼šè‡ªåŠ¨æ£€æµ‹æœ‰æ²¡æœ‰å˜é‡é‡åï¼Œå¦‚æœæœ‰åˆ™ä¼šè‡ªè¡Œå¤„ç†ã€‚ import tensorflow as tfwith tf.name_scope(&#x27;name_scope_x&#x27;): var1 = tf.get_variable(name=&#x27;var1&#x27;, shape=[1], dtype=tf.float32) var3 = tf.Variable(name=&#x27;var2&#x27;, initial_value=[2], dtype=tf.float32) var4 = tf.Variable(name=&#x27;var2&#x27;, initial_value=[2], dtype=tf.float32)with tf.Session() as sess: sess.run(tf.global_variables_initializer()) print(var1.name, sess.run(var1)) print(var3.name, sess.run(var3)) print(var4.name, sess.run(var4))# è¾“å‡ºç»“æœï¼š# var1:0 [-0.30036557] å¯ä»¥çœ‹åˆ°å‰é¢ä¸å«æœ‰æŒ‡å®šçš„&#x27;name_scope_x&#x27;# name_scope_x/var2:0 [ 2.]# name_scope_x/var2_1:0 [ 2.] å¯ä»¥çœ‹åˆ°å˜é‡åè‡ªè¡Œå˜æˆäº†&#x27;var2_1&#x27;ï¼Œé¿å…äº†å’Œ&#x27;var2&#x27;å†²çª å¦‚æœä½¿ç”¨tf.get_variable()åˆ›å»ºå˜é‡ï¼Œä¸”æ²¡æœ‰è®¾ç½®å…±äº«å˜é‡ï¼Œé‡åæ—¶ä¼šæŠ¥é”™ import tensorflow as tfwith tf.name_scope(&#x27;name_scope_1&#x27;): var1 = tf.get_variable(name=&#x27;var1&#x27;, shape=[1], dtype=tf.float32) var2 = tf.get_variable(name=&#x27;var1&#x27;, shape=[1], dtype=tf.float32)with tf.Session() as sess: sess.run(tf.global_variables_initializer()) print(var1.name, sess.run(var1)) print(var2.name, sess.run(var2))# ValueError: Variable var1 already exists, disallowed. Did you mean # to set reuse=True in VarScope? Originally defined at:# var1 = tf.get_variable(name=&#x27;var1&#x27;, shape=[1], dtype=tf.float32) å…±äº«å˜é‡ åŸºç¡€å†™æ³• å¦‚æœè¦å…±äº«å˜é‡ï¼Œéœ€è¦ä½¿ç”¨tf.variable_scope() import tensorflow as tfwith tf.variable_scope(&#x27;variable_scope_y&#x27;) as scope: var1 = tf.get_variable(name=&#x27;var1&#x27;, shape=[1], dtype=tf.float32) scope.reuse_variables() # è®¾ç½®å…±äº«å˜é‡ var1_reuse = tf.get_variable(name=&#x27;var1&#x27;) var2 = tf.Variable(initial_value=[2.], name=&#x27;var2&#x27;, dtype=tf.float32) var2_reuse = tf.Variable(initial_value=[2.], name=&#x27;var2&#x27;, dtype=tf.float32)with tf.Session() as sess: sess.run(tf.global_variables_initializer()) print(var1.name, sess.run(var1)) print(var1_reuse.name, sess.run(var1_reuse)) print(var2.name, sess.run(var2)) print(var2_reuse.name, sess.run(var2_reuse))# è¾“å‡ºç»“æœï¼š# variable_scope_y/var1:0 [-1.59682846]# variable_scope_y/var1:0 [-1.59682846] å¯ä»¥çœ‹åˆ°å˜é‡var1_reuseé‡å¤ä½¿ç”¨äº†var1# variable_scope_y/var2:0 [ 2.]# variable_scope_y/var2_1:0 [ 2.] æˆ–è€…å¦‚ä¸‹å½¢å¼ï¼š with tf.variable_scope(&#x27;foo&#x27;) as foo_scope: v = tf.get_variable(&#x27;v&#x27;, [1])with tf.variable_scope(&#x27;foo&#x27;, reuse=True): v1 = tf.get_variable(&#x27;v&#x27;) è¿˜å¯ä»¥åƒä¸‹é¢è¿™æ ·ç¼–å†™ï¼š with tf.variable_scope(&#x27;foo&#x27;) as foo_scope: v = tf.get_variable(&#x27;v&#x27;, [1])with tf.variable_scope(foo_scope, reuse=True): v1 = tf.get_variable(&#x27;v&#x27;) æ›´ä¼˜é›…çš„å†™æ³• ä¹‹å‰çš„å‡ ç§å†™æ³•æ˜¯åœ¨é‡å¤ä½¿ç”¨ï¼ˆéç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼‰çš„æ—¶å€™è®¾ç½®reuse=Trueæ¥å†æ¬¡è°ƒç”¨å…±äº«å˜é‡ä½œç”¨åŸŸï¼ˆvariable_scopeï¼‰ï¼Œè¿™æ˜¯ä¸€ç§æ¯”è¾ƒç¬¨çš„æ–¹å¼ï¼Œä¸‹é¢ä½¿ç”¨tf.AUTO_REUSEçš„å†™æ³•æˆ–è®¸æ›´åŠ ä¼˜é›…ï¼š with tf.variable_scope(&#x27;foo&#x27;, reuse=tf.AUTO_REUSE): v = tf.get_variable(&#x27;v&#x27;, [1]) v1 = tf.get_variable(&#x27;v&#x27;) å®ä¾‹ï¼š import numpy as npimport tensorflow as tfdef convolution(in_put, in_channel, out_channel): with tf.variable_scope(name_or_scope=&#x27;&#x27;, reuse=tf.AUTO_REUSE): weights = tf.get_variable(name=&quot;weights&quot;, shape=[2, 2, in_channel, out_channel], initializer=tf.contrib.layers.xavier_initializer_conv2d()) output = tf.nn.conv2d(input=in_put, filter=weights, strides=[1, 1, 1, 1], padding=&quot;SAME&quot;) return outputdef main(): with tf.Graph().as_default(): input_x = tf.placeholder(dtype=tf.float32, shape=[1, 4, 4, 1]) for _ in range(5): output = convolution(input_x, 1, 1) with tf.Session() as sess: sess.run(tf.global_variables_initializer()) _output = sess.run([output], feed_dict=&#123;input_x: np.random.uniform(low=0, high=255, size=[1, 4, 4, 1])&#125;) print(_output)if __name__ == &quot;__main__&quot;: main() reuseå‚æ•°ä½¿ç”¨ å½“å‚æ•°reuse=Falseï¼Œå‡½æ•°get_variableï¼ˆï¼‰è¡¨ç¤ºåˆ›å»ºå˜é‡ import tensorflow as tfwith tf.variable_scope(&quot;foo&quot;, reuse=False): v = tf.get_variable(&quot;v&quot;, [1], initializer=tf.constant_initializer(1.0)) v1 = tf.get_variable(&quot;v&quot;, [1])# è¾“å‡ºç»“æœï¼š# ValueError: Variable foo/v already exists, disallowed. # Did you mean to set reuse=True or reuse=tf.AUTO_REUSE in VarScope? å½“å‚æ•°reuse=Trueï¼Œå‡½æ•°get_variableï¼ˆï¼‰è¡¨ç¤ºè·å–å˜é‡ import tensorflow as tfwith tf.variable_scope(&quot;foo&quot;): v = tf.get_variable(&quot;v&quot;, [1], initializer=tf.constant_initializer(1.0))with tf.variable_scope(&quot;foo&quot;, reuse=True): v1 = tf.get_variable(&quot;v&quot;, [1])print(v1 == v)# è¾“å‡ºç»“æœï¼šTrue åœ¨tf.variable_scope()å‡½æ•°ä¸­ï¼Œè®¾ç½®reuse=Trueæ—¶ï¼Œåœ¨å…¶å‘½åç©ºé—´&quot;foo&quot;ä¸­æ‰§è¡Œå‡½æ•°get_variable()æ—¶ï¼Œè¡¨ç¤ºè·å–å˜é‡&quot;v&quot;ã€‚è‹¥åœ¨è¯¥å‘½åç©ºé—´ä¸­è¿˜æ²¡æœ‰è¯¥å˜é‡ï¼Œåˆ™åœ¨è·å–æ—¶ä¼šæŠ¥é”™ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š import tensorflow as tf with tf.variable_scope(&quot;foo&quot;, reuse=True): v1 = tf.get_variable(&quot;v&quot;,[1])# è¾“å‡ºç»“æœï¼š# ValueError: Variable foo/v does not exist, or was not created with tf.get_variable(). # Did you mean to set reuse=tf.AUTO_REUSE in VarScope? å‚è€ƒ [1]: tensorflowé‡Œé¢name_scope, variable_scopeç­‰å¦‚ä½•ç†è§£ï¼Ÿ [2]: tf.AUTO_REUSEä½œç”¨ [3]: TensorFlowä¸­å˜é‡ç®¡ç†reuseå‚æ•°çš„ä½¿ç”¨","categories":[{"name":"tensorflow","slug":"tensorflow","permalink":"http://chiang97912.github.io/categories/tensorflow/"}],"tags":[{"name":"tensorflow","slug":"tensorflow","permalink":"http://chiang97912.github.io/tags/tensorflow/"}]},{"title":"Ubuntuç¯å¢ƒMYSQLä¹±ç é—®é¢˜ä¿®å¤","slug":"Ubuntuç¯å¢ƒMYSQLä¹±ç é—®é¢˜ä¿®å¤","date":"2018-12-09T05:10:29.000Z","updated":"2025-12-13T12:14:03.174Z","comments":true,"path":"2018/12/09/Ubuntuç¯å¢ƒMYSQLä¹±ç é—®é¢˜ä¿®å¤/","permalink":"http://chiang97912.github.io/2018/12/09/Ubuntu%E7%8E%AF%E5%A2%83MYSQL%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98%E4%BF%AE%E5%A4%8D/","excerpt":"é¦–å…ˆå£°æ˜ç¬”è€…ä½¿ç”¨çš„æœåŠ¡å™¨æ˜¯Ubuntu16.04ï¼Œæ•°æ®åº“å®‰è£…çš„æ˜¯Mysql 5.7ã€‚åˆå§‹çš„mysqlé»˜è®¤å­—ç¬¦é›†æ˜¯latin1ï¼Œå¦‚æœå‘æ•°æ®åº“ä¸­æ’å…¥ä¸­æ–‡å°±ä¼šå‡ºç°ä¹±ç ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶çš„æ–¹å¼ä¿®æ”¹mysqlçš„é»˜è®¤ç¼–ç ã€‚","text":"é¦–å…ˆå£°æ˜ç¬”è€…ä½¿ç”¨çš„æœåŠ¡å™¨æ˜¯Ubuntu16.04ï¼Œæ•°æ®åº“å®‰è£…çš„æ˜¯Mysql 5.7ã€‚åˆå§‹çš„mysqlé»˜è®¤å­—ç¬¦é›†æ˜¯latin1ï¼Œå¦‚æœå‘æ•°æ®åº“ä¸­æ’å…¥ä¸­æ–‡å°±ä¼šå‡ºç°ä¹±ç ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶çš„æ–¹å¼ä¿®æ”¹mysqlçš„é»˜è®¤ç¼–ç ã€‚ ä¿®æ”¹é…ç½®æ–‡ä»¶ ä¿®æ”¹[mysqld] æ‰¾åˆ°æ–‡ä»¶/etc/mysql/mysql.conf.d/mysqld.cnf ä¸­çš„[mysqld]å¹¶åœ¨å…¶æœ€åé¢è¿½åŠ å¦‚ä¸‹ä»£ç ï¼š character-set-server=utf8 ä¿®æ”¹[mysql] æ‰¾åˆ°æ–‡ä»¶/etc/mysql/conf.d/mysql.cnfä¸­çš„[mysql]å¹¶åœ¨å…¶æœ€åé¢è¿½åŠ å¦‚ä¸‹ä»£ç ï¼š default-character-set=utf8 ä¿®æ”¹[client] æ‰¾åˆ°æ–‡ä»¶/etc/mysql/debian.cnfä¸­çš„[client]å¹¶åœ¨å…¶æœ€åé¢è¿½åŠ å¦‚ä¸‹ä»£ç ï¼š default-character-set=utf8 é‡å¯MYSQL service mysql restart æŸ¥çœ‹å­—ç¬¦é›† mysql -u root -p show variables like &#x27;%character%&#x27;; å…¶ä»–é—®é¢˜ ç¬”è€…åœ¨åšå®Œå¦‚ä¸Šé…ç½®ä¹‹åå‘ç°é€šè¿‡navicatè¿æ¥mysqlæŸ¥çœ‹å†…å®¹è¿˜æ˜¯å‡ºç°ä¹±ç ï¼Œä½†æ˜¯å…¶ä»–åœ°æ–¹è¿”å›çš„æ•°æ®å‡èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºã€‚å‡ºç°ä¸Šè¿°æƒ…å†µå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼š å³é”®â€“&gt;ç¼–è¾‘è¿æ¥â€“&gt;é«˜çº§ å°†ç¼–ç æ–¹å¼è®¾ç½®ä¸ºè‡ªåŠ¨","categories":[{"name":"æœåŠ¡å™¨é…ç½®","slug":"æœåŠ¡å™¨é…ç½®","permalink":"http://chiang97912.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://chiang97912.github.io/tags/mysql/"}]},{"title":"LAMPç¯å¢ƒæ­å»ºä»¥åŠMYSQLè¿œç¨‹è®¿é—®é…ç½®","slug":"LAMPç¯å¢ƒæ­å»ºä»¥åŠMYSQLè¿œç¨‹è®¿é—®é…ç½®","date":"2018-12-04T03:51:55.000Z","updated":"2025-12-13T12:16:28.792Z","comments":true,"path":"2018/12/04/LAMPç¯å¢ƒæ­å»ºä»¥åŠMYSQLè¿œç¨‹è®¿é—®é…ç½®/","permalink":"http://chiang97912.github.io/2018/12/04/LAMP%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8AMYSQL%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E9%85%8D%E7%BD%AE/","excerpt":"é¦–å…ˆå£°æ˜ç¬”è€…ä½¿ç”¨çš„æœåŠ¡å™¨æ˜¯Ubuntu16.04ã€‚ä¸‹é¢æ­£å¼è¿›å…¥é…ç½®æ•™ç¨‹ï¼š","text":"é¦–å…ˆå£°æ˜ç¬”è€…ä½¿ç”¨çš„æœåŠ¡å™¨æ˜¯Ubuntu16.04ã€‚ä¸‹é¢æ­£å¼è¿›å…¥é…ç½®æ•™ç¨‹ï¼š LAMPç¯å¢ƒæ­å»º å®‰è£…Apache2 sudo apt-get install apache2 æ£€æŸ¥apache2æ˜¯å¦å®‰è£…æˆåŠŸ apache2 â€“v å®‰è£…PHP7 sudo apt-get install php æŸ¥çœ‹PHPç‰ˆæœ¬å¹¶æ£€æŸ¥PHPæ˜¯å¦æŒ‰ç…§æˆåŠŸ php â€“v å®‰è£…MYSQL sudo apt-get install mysql-serversudo apt-get install mysql-client å®‰è£…é…ç½®ç»„ä»¶ sudo apt-get install libapache2-mod-phpsudo apt-get install libapache2-mod-auth-mysql # ç°åœ¨è¿™ä¸ªç»„ä»¶ä½œè€…ä»¥åŠæ”¾å¼ƒç»´æŠ¤äº†ï¼Œå› ä¸ºæ–°ç‰ˆapacheä»¥åŠåŒ…å«è¿™ä¸ªæ¨¡å—æ‰€å®ç°çš„åŠŸèƒ½ï¼Œå¯ä»¥ä¸ç”¨å®‰è£…sudo apt-get install php-mysqlsudo apt-get install php-gd # phpå›¾å½¢åº“ å¯ç”¨mod_rewriteæ¨¡å— service apache2 restart é‡å¯Apache2å’ŒMYSQL sudo service apache2 restartsudo service mysql restart æµ‹è¯•PHP åˆ›å»ºä¸€ä¸ªphpæ–‡ä»¶æ¥æµ‹è¯•ç¯å¢ƒæ˜¯å¦å®‰è£…æˆåŠŸï¼ŒPHPæ–‡ä»¶ï¼ˆæ–‡ä»¶åä¸ºtest.phpï¼‰å†…å®¹ï¼š &lt;?php echo phpinfo();?&gt; é€šè¿‡IP/test.phpæŸ¥çœ‹æ˜¯å¦è¿æ¥æˆåŠŸã€‚ ç«¯å£å…è®¸ é€šè¿‡ä¸Šè¿°æ­¥éª¤æˆ‘ä»¬å¯èƒ½è¿˜æ˜¯ä¸èƒ½é€šè¿‡IPåœ°å€è®¿é—®æœåŠ¡å™¨ï¼Œé‚£æ˜¯å› ä¸ºé˜¿é‡Œäº‘é»˜è®¤æ˜¯æ²¡æœ‰å¼€æ”¾80ç«¯å£çš„ï¼Œæˆ‘ä»¬éœ€è¦å‰å¾€é˜¿é‡Œäº‘çš„æ§åˆ¶å°å°†80ç«¯å£æ·»åŠ åˆ°å®‰å…¨ç»„ã€‚ MYSQLè¿œç¨‹è®¿é—®é…ç½® ä¿®æ”¹MYSQLé…ç½® æˆ‘ä»¬é€šè¿‡ä¿®æ”¹MYSQLçš„é…ç½®æ–‡ä»¶è¿è¡Œå…è®¸æ‰€æœ‰ä¸»æœºè®¿é—®æœåŠ¡å™¨ä¸Šçš„MYSQLæ•°æ®åº“ï¼š ä½¿ç”¨vimç¼–è¾‘mysqlçš„é…ç½®æ–‡ä»¶/etc/mysql/mysql.conf.d/mysqld.cnf vim /etc/mysql/mysql.conf.d/mysqld.cnf ç„¶åä¿®æ”¹æ–‡ä»¶ä¸­çš„bind-addressçš„å€¼ä¸º0.0.0.0 ä¿®æ”¹MYSQLç”¨æˆ·è®¿é—®æƒé™ é¦–å…ˆè¿›å…¥MYSQLæ•°æ®åº“ï¼Œä½¿ç”¨mysqlæ•°æ®åº“: use mysql; ç„¶å: update user set host = &#x27;%&#x27; where user = &#x27;root&#x27;; æŸ¥çœ‹MYSQLç”¨æˆ·æƒé™ï¼š select host, user from user; have fun!","categories":[{"name":"æœåŠ¡å™¨é…ç½®","slug":"æœåŠ¡å™¨é…ç½®","permalink":"http://chiang97912.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/"}],"tags":[{"name":"sql","slug":"sql","permalink":"http://chiang97912.github.io/tags/sql/"},{"name":"lamp","slug":"lamp","permalink":"http://chiang97912.github.io/tags/lamp/"},{"name":"linux","slug":"linux","permalink":"http://chiang97912.github.io/tags/linux/"},{"name":"mysql","slug":"mysql","permalink":"http://chiang97912.github.io/tags/mysql/"}]},{"title":"PHPæ¥å£è¿”å›500é”™è¯¯çŠ¶æ€ç è§£å†³æ–¹æ³•","slug":"PHPæ¥å£è¿”å›500é”™è¯¯çŠ¶æ€ç è§£å†³æ–¹æ³•","date":"2018-11-17T14:12:43.000Z","updated":"2025-12-13T12:16:08.956Z","comments":true,"path":"2018/11/17/PHPæ¥å£è¿”å›500é”™è¯¯çŠ¶æ€ç è§£å†³æ–¹æ³•/","permalink":"http://chiang97912.github.io/2018/11/17/PHP%E6%8E%A5%E5%8F%A3%E8%BF%94%E5%9B%9E500%E9%94%99%E8%AF%AF%E7%8A%B6%E6%80%81%E7%A0%81%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/","excerpt":"èƒŒæ™¯ æœ€è¿‘åœ¨ç”¨PHPå†™ç”¨æˆ·ç™»å½•æ¥å£ï¼Œä½†æ˜¯å°†PHPä»£ç éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå´å‘ç”Ÿäº†é”™è¯¯ï¼Œç”¨æµè§ˆå™¨è®¿é—®æ¥å£äº§ç”Ÿé”™è¯¯çŠ¶æ€ç 500å¦‚ä¸‹ï¼š HTTP ERROR 500 è¿™ä¸ªé”™è¯¯æ˜¯ç”±äºPHPä»£ç å­˜åœ¨é”™è¯¯å¼•èµ·çš„ï¼Œä½†æ˜¯é»˜è®¤PHPæ˜¯å…³é—­é”™è¯¯æç¤ºçš„ã€‚å¦‚æœæƒ³è¦çŸ¥é“ä»£ç çš„é”™è¯¯å¿…é¡»å…ˆæ‰“å¼€PHPçš„é”™è¯¯æ˜¾ç¤ºåŠŸèƒ½ã€‚","text":"èƒŒæ™¯ æœ€è¿‘åœ¨ç”¨PHPå†™ç”¨æˆ·ç™»å½•æ¥å£ï¼Œä½†æ˜¯å°†PHPä»£ç éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå´å‘ç”Ÿäº†é”™è¯¯ï¼Œç”¨æµè§ˆå™¨è®¿é—®æ¥å£äº§ç”Ÿé”™è¯¯çŠ¶æ€ç 500å¦‚ä¸‹ï¼š HTTP ERROR 500 è¿™ä¸ªé”™è¯¯æ˜¯ç”±äºPHPä»£ç å­˜åœ¨é”™è¯¯å¼•èµ·çš„ï¼Œä½†æ˜¯é»˜è®¤PHPæ˜¯å…³é—­é”™è¯¯æç¤ºçš„ã€‚å¦‚æœæƒ³è¦çŸ¥é“ä»£ç çš„é”™è¯¯å¿…é¡»å…ˆæ‰“å¼€PHPçš„é”™è¯¯æ˜¾ç¤ºåŠŸèƒ½ã€‚ è§£å†³æ–¹æ³• é¦–å…ˆå£°æ˜ç¬”è€…ä½¿ç”¨çš„ç”Ÿäº§ç¯å¢ƒæ˜¯Ubuntu 16.04ã€‚ ç¬¬ä¸€æ­¥ï¼šå…ˆæ‰¾åˆ°PHPçš„é…ç½®æ–‡ä»¶php.iniæ–‡ä»¶æ‰€åœ¨ä½ç½®ï¼Œè¿™é‡Œç¬”è€…çš„Ubuntuä¸­çš„php7çš„php.iniå­˜åœ¨äºè·¯å¾„/etc/php/7.0/apache2/ä¸‹é¢ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨vi/vimä»ä¸Šè¿°è·¯å¾„ä¸‹æ‰“å¼€php.iniæ–‡ä»¶ï¼› ç¬¬äºŒæ­¥ï¼šæŸ¥æ‰¾å¹¶ä¿®æ”¹php.iniæ–‡ä»¶ä¸­çš„display_errorså’Œdisplay_startup_errorsä¸­çš„å€¼ä¸ºOnå³å¯ï¼› ä¿®æ”¹åçš„å†…å®¹å¦‚ä¸‹ï¼š #ä¿®æ”¹ä½ çš„php.iniæ–‡ä»¶display_errors = Ondisplay_startup_errors = On ç¬¬ä¸‰æ­¥ï¼šé‡å¯php-fpmã€‚ /etc/init.d/php7.0-fpm restart æ›´å¤šç‰ˆæœ¬phpæ“ä½œè¯¦è§å¦‚ä¸‹é“¾æ¥ï¼Œå¦å¤–è¿˜æœ‰appache2ç›¸å…³æ“ä½œè§å¦‚ä¸‹é“¾æ¥ã€‚ åˆ°æ­¤ä¸ºæ­¢å°±å¯ä»¥æŸ¥çœ‹åˆ°é”™è¯¯ä¿¡æ¯äº†ã€‚","categories":[{"name":"PHP","slug":"PHP","permalink":"http://chiang97912.github.io/categories/PHP/"}],"tags":[{"name":"PHP","slug":"PHP","permalink":"http://chiang97912.github.io/tags/PHP/"}]},{"title":"Pythonå¤§æ•°æ®é‡è®¡æ•°","slug":"Pythonå¤§æ•°æ®é‡è®¡æ•°","date":"2018-09-10T07:58:34.000Z","updated":"2025-12-13T12:15:38.079Z","comments":true,"path":"2018/09/10/Pythonå¤§æ•°æ®é‡è®¡æ•°/","permalink":"http://chiang97912.github.io/2018/09/10/Python%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%87%8F%E8%AE%A1%E6%95%B0/","excerpt":"å’Œä¸Šä¸€ç¯‡æ–‡ç« ä¸€æ ·ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯æˆ‘åœ¨æ•°å­¦å»ºæ¨¡ä¸­ç¢°åˆ°çš„ï¼Œå¦‚æœåªæ˜¯æ™®é€šæ•°æ®é‡çš„è®¡æ•°é—®é¢˜é‚£ä¹ˆæˆ‘ä»¬ä¸å¦¨ä½¿ç”¨counterï¼Œä½†æ˜¯å¦‚æœæ•°æ®é‡è¾¾åˆ°ä¸€å®šè§„æ¨¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸å¾—ä¸è€ƒè™‘å…¶ä»–ç®—æ³•æ¥è§£å†³é—®é¢˜äº†ã€‚æˆ‘ä»¬è¿™é‡Œä½¿ç”¨hyperloglogç®—æ³•æ¥å®ç°å¤§æ•°æ®é‡è®¡æ•°é—®é¢˜ï¼Œè¿™ç§ç®—æ³•æ˜¯ä¸€ç§åŸºäºç»Ÿè®¡çš„è®¡æ•°ç®—æ³•ï¼Œç®—æ³•å¹¶ä¸ä¸€å®šå‡†ç¡®ï¼Œä½†æ˜¯è¶³å¤Ÿå¿«ï¼Œå¦‚æœè¯»è€…å°†é€Ÿåº¦æ”¾åœ¨ç¬¬ä¸€ä½é‚£ä¹ˆä¸å¦¨è¯•è¯•è¿™ç§ç®—æ³•ï¼Œè€Œä¸”hyperloglogç®—æ³•å‡†ç¡®ç‡é€¼è¿‘100%ï¼Œè¯•é—®1000001å’Œ100000åˆæœ‰å¤šå¤§çš„å·®è·å‘¢ï¼Œæ‰€ä»¥è¿™ç§ç®—æ³•æ˜¯æœ‰ä¸€å®šå®ç”¨æ€§çš„ã€‚","text":"å’Œä¸Šä¸€ç¯‡æ–‡ç« ä¸€æ ·ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯æˆ‘åœ¨æ•°å­¦å»ºæ¨¡ä¸­ç¢°åˆ°çš„ï¼Œå¦‚æœåªæ˜¯æ™®é€šæ•°æ®é‡çš„è®¡æ•°é—®é¢˜é‚£ä¹ˆæˆ‘ä»¬ä¸å¦¨ä½¿ç”¨counterï¼Œä½†æ˜¯å¦‚æœæ•°æ®é‡è¾¾åˆ°ä¸€å®šè§„æ¨¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸å¾—ä¸è€ƒè™‘å…¶ä»–ç®—æ³•æ¥è§£å†³é—®é¢˜äº†ã€‚æˆ‘ä»¬è¿™é‡Œä½¿ç”¨hyperloglogç®—æ³•æ¥å®ç°å¤§æ•°æ®é‡è®¡æ•°é—®é¢˜ï¼Œè¿™ç§ç®—æ³•æ˜¯ä¸€ç§åŸºäºç»Ÿè®¡çš„è®¡æ•°ç®—æ³•ï¼Œç®—æ³•å¹¶ä¸ä¸€å®šå‡†ç¡®ï¼Œä½†æ˜¯è¶³å¤Ÿå¿«ï¼Œå¦‚æœè¯»è€…å°†é€Ÿåº¦æ”¾åœ¨ç¬¬ä¸€ä½é‚£ä¹ˆä¸å¦¨è¯•è¯•è¿™ç§ç®—æ³•ï¼Œè€Œä¸”hyperloglogç®—æ³•å‡†ç¡®ç‡é€¼è¿‘100%ï¼Œè¯•é—®1000001å’Œ100000åˆæœ‰å¤šå¤§çš„å·®è·å‘¢ï¼Œæ‰€ä»¥è¿™ç§ç®—æ³•æ˜¯æœ‰ä¸€å®šå®ç”¨æ€§çš„ã€‚ ä»£ç å®ç° å½“ç„¶ä½œä¸ºèƒ¶æ°´è¯­è¨€çš„Pythonï¼Œæˆ‘ä»¬å½“ç„¶ä¸å¿…é‡å¤é€ è½®å­ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨pythonçš„bounteråº“æ¥å®ç°hyperloglogç®—æ³•è®¡æ•°ã€‚ å®‰è£…æ–¹æ³•ï¼špip install bounter è¿™é‡Œç»™å‡ºbounteråœ¨githubä¸Šçš„å®˜æ–¹æ•™æä½¿ç”¨çš„ä»£ç ï¼š ç¤ºä¾‹ä¸€ï¼š from bounter import bountercounts = bounter(size_mb=1024) # use at most 1 GB of RAMcounts.update([u&#x27;a&#x27;, &#x27;few&#x27;, u&#x27;words&#x27;, u&#x27;a&#x27;, u&#x27;few&#x27;, u&#x27;times&#x27;]) # count item frequenciesprint(counts[u&#x27;few&#x27;]) # query the counts2 ç¤ºä¾‹äºŒ from bounter import bountercounts = bounter(size_mb=200) # default version, unless you specify need_items or need_countscounts.update([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;a&#x27;, &#x27;b&#x27;])print(counts.total(), counts.cardinality()) # total and cardinality still work(5L, 3)print(counts[&#x27;a&#x27;]) # individual item frequency still works2print(list(counts)) # iterator returns keys, just like Counter[u&#x27;b&#x27;, u&#x27;a&#x27;, u&#x27;c&#x27;]print(list(counts.iteritems())) # supports iterating over key-count pairs, etc.[(u&#x27;b&#x27;, 2L), (u&#x27;a&#x27;, 2L), (u&#x27;c&#x27;, 1L)]","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://chiang97912.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"python","slug":"python","permalink":"http://chiang97912.github.io/tags/python/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://chiang97912.github.io/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"Pythonå®ç°æœ€è¿‘ç‚¹å¯¹æ±‚è§£","slug":"Pythonå®ç°æœ€è¿‘ç‚¹å¯¹æ±‚è§£","date":"2018-09-10T07:21:27.000Z","updated":"2025-12-13T12:15:08.259Z","comments":true,"path":"2018/09/10/Pythonå®ç°æœ€è¿‘ç‚¹å¯¹æ±‚è§£/","permalink":"http://chiang97912.github.io/2018/09/10/Python%E5%AE%9E%E7%8E%B0%E6%9C%80%E8%BF%91%E7%82%B9%E5%AF%B9%E6%B1%82%E8%A7%A3/","excerpt":"æ•°å­¦å»ºæ¨¡ä¸­é‡åˆ°æ±‚æœ€è¿‘ç‚¹å¯¹çš„é—®é¢˜ï¼ŒæŒ‰ç†è¯´æˆ‘ä»¬ä½¿ç”¨æœ´ç´ æ³•è¿›è¡Œæš´åŠ›æ±‚è§£ç­”æ¡ˆä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯ç”±äºæ•°æ®è¿‡äºåºå¤§ï¼Œæˆ‘ä»¬æœ€åˆä½¿ç”¨æœ´ç´ æ³•åœ¨è®¡ç®—æœºä¸Šè·‘äº†6ä¸ªå°æ—¶éƒ½æ²¡æœ‰å¾—åˆ°é—®é¢˜çš„è§£ï¼Œæœ€ç»ˆåªå¾—ä½œç½¢ã€‚åæ¥æˆ‘ä»¬åˆ©ç”¨åˆ†æ²»æ³•è§£å†³äº†æœ€è¿‘ç‚¹å¯¹é—®é¢˜ï¼Œå…·ä½“æ€è·¯å‚çœ‹è¿™é‡Œã€‚","text":"æ•°å­¦å»ºæ¨¡ä¸­é‡åˆ°æ±‚æœ€è¿‘ç‚¹å¯¹çš„é—®é¢˜ï¼ŒæŒ‰ç†è¯´æˆ‘ä»¬ä½¿ç”¨æœ´ç´ æ³•è¿›è¡Œæš´åŠ›æ±‚è§£ç­”æ¡ˆä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯ç”±äºæ•°æ®è¿‡äºåºå¤§ï¼Œæˆ‘ä»¬æœ€åˆä½¿ç”¨æœ´ç´ æ³•åœ¨è®¡ç®—æœºä¸Šè·‘äº†6ä¸ªå°æ—¶éƒ½æ²¡æœ‰å¾—åˆ°é—®é¢˜çš„è§£ï¼Œæœ€ç»ˆåªå¾—ä½œç½¢ã€‚åæ¥æˆ‘ä»¬åˆ©ç”¨åˆ†æ²»æ³•è§£å†³äº†æœ€è¿‘ç‚¹å¯¹é—®é¢˜ï¼Œå…·ä½“æ€è·¯å‚çœ‹è¿™é‡Œã€‚ åˆ†æ²»æ³• åˆ†æ²»æ³•è§£å†³æœ€è¿‘ç‚¹å¯¹é—®é¢˜çš„ç®—æ³•è¿‡ç¨‹è¯»è€…å¯ä»¥å‚è§ä¸Šæ–‡ç»™å‡ºçš„å‚è€ƒåšå®¢ã€‚åˆ†æ²»æ³•çš„æ€æƒ³å°±æ˜¯å…ˆå°†é—®é¢˜åˆ†è§£æˆä¸€ä¸ªä¸ªå°çš„é—®é¢˜ï¼Œæœ€åå°†å°é—®é¢˜çš„ç­”æ¡ˆåˆå¹¶å¾—åˆ°é—®é¢˜çš„è§£ã€‚è¿™å…¶ä¸­å…³é”®æ­¥éª¤æ˜¯åˆ†è§£ä¸åˆå¹¶ï¼Œå…·ä½“å®ç°æ–¹æ³•æ˜¯ä½¿ç”¨é€’å½’ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ç©ºé—´æ¢æ—¶é—´ã€‚ ä»£ç å®ç° ä¸Šé¢ç»™å‡ºçš„æ•™ç¨‹ä¸­æ˜¯ä½¿ç”¨C++å®ç°çš„ï¼Œæˆ‘è¿™é‡Œç»™å‡ºPythonå®ç°ã€‚ ç”±äºæˆ‘è¿™é‡Œå…·ä½“çš„é—®é¢˜æ˜¯ç»™å‡ºç»çº¬åº¦æ‰¾å‡ºæœ€è¿‘ç‚¹å¯¹ï¼Œæ‰€ä»¥æˆ‘é‡‡ç”¨çš„è·ç¦»ä¸ºæ”¹è¿›çš„çƒé¢ä½™å¼¦è·ç¦»ã€‚ # -*- coding: utf-8 -*-from collections import Counterfrom math import sqrt,acos, sin, cos, radiansdef nearest_dot(s): mid = int(len(s)/2) left = s[0:mid] right = s[mid:] mid_x = (left[-1][0]+right[0][0])/2.0 if len(left) &gt; 2: lmin = nearest_dot(left) #å·¦ä¾§éƒ¨åˆ†æœ€è¿‘ç‚¹å¯¹ else: lmin = left if len(right) &gt; 2: rmin = nearest_dot(right) #å³ä¾§éƒ¨åˆ†æœ€è¿‘ç‚¹å¯¹ else: rmin = right if len(lmin) &gt;1: dis_l = get_distance(lmin) else: dis_l = float(&quot;inf&quot;) if len(rmin) &gt;1: dis_r = get_distance(rmin) else: dis_r = float(&quot;inf&quot;) d = min(dis_l, dis_r) #æœ€è¿‘ç‚¹å¯¹è·ç¦» mid_min=[] for i in left: if mid_x-i[0]&lt;=d : #å¦‚æœå·¦ä¾§éƒ¨åˆ†ä¸ä¸­é—´çº¿çš„è·ç¦»&lt;=d for j in right: if abs(i[0]-j[0])&lt;=d and abs(i[1]-j[1])&lt;=d: #å¦‚æœå³ä¾§éƒ¨åˆ†ç‚¹åœ¨iç‚¹çš„(d,2d)ä¹‹é—´ if get_distance((i,j))&lt;=d: mid_min.append([i,j]) #ijä¸¤ç‚¹çš„é—´è·è‹¥å°äºdåˆ™åŠ å…¥é˜Ÿåˆ— if mid_min: dic=[] for i in mid_min: dic.append(&#123;get_distance(i):i&#125;) dic.sort(key=lambda x: x.keys()) return list(dic[0].values())[0] elif dis_l&gt;dis_r: return rmin else: return lmin # æ±‚ç‚¹å¯¹çš„è·ç¦»def get_distance(m): dx = m[0][1] - m[1][1] # ç»åº¦å·®å€¼ dy = m[0][0] - m[1][0] # çº¬åº¦å·®å€¼ # b = (lat1 + lat2) / 2.0 # å¹³å‡çº¬åº¦ # Lx = (a[3] * b*b*b + a[2]* b*b + a[1] * b + a[0]) * radians(dx) * 6367000.0 # ä¸œè¥¿è·ç¦»(å•ä½ï¼šç±³) Lx = cos(dx) * radians(dx) * 6367000.0 # ä¸œè¥¿è·ç¦»(å•ä½ï¼šç±³) Ly = 6367000.0 * radians(dy) # å—åŒ—è·ç¦» return sqrt(Lx * Lx + Ly * Ly)def divide_conquer(s): s.sort() nearest_dots = nearest_dot(s) return nearest_dots","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://chiang97912.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"python","slug":"python","permalink":"http://chiang97912.github.io/tags/python/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://chiang97912.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°å­¦å»ºæ¨¡","slug":"æ•°å­¦å»ºæ¨¡","permalink":"http://chiang97912.github.io/tags/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/"}]},{"title":"Pythonå®ç°argsortæ’åºè¿”å›ç´¢å¼•å€¼","slug":"pythonå®ç°argsortæ’åºè¿”å›ç´¢å¼•å€¼","date":"2018-09-05T12:58:14.000Z","updated":"2025-12-13T12:14:52.359Z","comments":true,"path":"2018/09/05/pythonå®ç°argsortæ’åºè¿”å›ç´¢å¼•å€¼/","permalink":"http://chiang97912.github.io/2018/09/05/python%E5%AE%9E%E7%8E%B0argsort%E6%8E%92%E5%BA%8F%E8%BF%94%E5%9B%9E%E7%B4%A2%E5%BC%95%E5%80%BC/","excerpt":"æ’æ›²æ˜¯è¿™æ ·çš„ï¼Œä¹‹å‰ä¸€ç›´åœ¨ç»™åˆ«äººå†™å¤–åŒ…ç¨‹åºï¼Œåœ¨ç¨‹åºä¸­æˆ‘ä½¿ç”¨åˆ°äº†numpyåº“ä¸­çš„argsortæ’åºæ–¹æ³•ï¼Œè¿™ä¸ªæ’åºæ–¹æ³•ååˆ†æ–¹ä¾¿ï¼Œå¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ’åºå¹¶è¿”å›åŸé¡ºåºçš„ç´¢å¼•å€¼ã€‚ç”±äºç¨‹åºè¦ä¼ ç»™å®¢æˆ·ï¼Œæ‰€ä»¥æˆ‘å°†ä»£ç å°è£…æˆäº†exeå¯æ‰§è¡Œç¨‹åºã€‚ä¹‹å‰å°è£…å‡ºæ¥çš„ç¨‹åºæœ€å¤šä¹Ÿå°±40æ¥å…†ï¼Œå¯æ˜¯è‡ªä»æˆ‘å°†å¼€å‘ç¯å¢ƒåˆ‡æ¢åˆ°anacondaåï¼Œå°è£…å‡ºæ¥çš„ç¨‹åºé«˜è¾¾200å¤šå…†ï¼Œç®€ç›´å“æ­»æˆ‘äº†ã€‚ä»Šå¤©å®¢æˆ·å†æ¬¡éœ€è¦è¿™ä¸ªç¨‹åºï¼Œäºæ˜¯æˆ‘å†³å®šæŠ›å¼ƒnumpyåº“ï¼Œè‡ªå·±å®ç°argsortç®—æ³•ã€‚","text":"æ’æ›²æ˜¯è¿™æ ·çš„ï¼Œä¹‹å‰ä¸€ç›´åœ¨ç»™åˆ«äººå†™å¤–åŒ…ç¨‹åºï¼Œåœ¨ç¨‹åºä¸­æˆ‘ä½¿ç”¨åˆ°äº†numpyåº“ä¸­çš„argsortæ’åºæ–¹æ³•ï¼Œè¿™ä¸ªæ’åºæ–¹æ³•ååˆ†æ–¹ä¾¿ï¼Œå¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ’åºå¹¶è¿”å›åŸé¡ºåºçš„ç´¢å¼•å€¼ã€‚ç”±äºç¨‹åºè¦ä¼ ç»™å®¢æˆ·ï¼Œæ‰€ä»¥æˆ‘å°†ä»£ç å°è£…æˆäº†exeå¯æ‰§è¡Œç¨‹åºã€‚ä¹‹å‰å°è£…å‡ºæ¥çš„ç¨‹åºæœ€å¤šä¹Ÿå°±40æ¥å…†ï¼Œå¯æ˜¯è‡ªä»æˆ‘å°†å¼€å‘ç¯å¢ƒåˆ‡æ¢åˆ°anacondaåï¼Œå°è£…å‡ºæ¥çš„ç¨‹åºé«˜è¾¾200å¤šå…†ï¼Œç®€ç›´å“æ­»æˆ‘äº†ã€‚ä»Šå¤©å®¢æˆ·å†æ¬¡éœ€è¦è¿™ä¸ªç¨‹åºï¼Œäºæ˜¯æˆ‘å†³å®šæŠ›å¼ƒnumpyåº“ï¼Œè‡ªå·±å®ç°argsortç®—æ³•ã€‚ numpyå®ç° é¦–å…ˆæ¥çœ‹çœ‹numpyåº“ä¸­argsortçš„ç”¨æ³•ï¼š argsort(a, axis=-1, kind=&#x27;quicksort&#x27;, order=None) ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦æ’åºçš„å¯è¿­ä»£å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ’åºçš„ç»´åº¦ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ’åºçš„ç®—æ³•ï¼Œå¸¸è§çš„æœ‰å¿«æ’ï¼ˆquicksortï¼‰ã€å †æ’åºï¼ˆheapsortï¼‰ä»¥åŠå½’å¹¶æ’åºï¼ˆmergesortï¼‰ã€‚ç¬¬å››ä¸ªå‚æ•°æ˜¯æ’åºçš„æ¬¡åºã€‚ å®ä¾‹ï¼š import numpy as npli = [1.5, 3, 15, 21, 7, 31, 5]indies = np.argsort(li, kind=&#x27;heapsort&#x27;)print(indies) è¿è¡Œç»“æœï¼š [0 1 6 4 2 3 5] åŸç”Ÿpythonå®ç° å…¶å®åŸç”Ÿpythonçš„å®ç°ä¸»è¦æ˜¯å€Ÿç”¨pythonå†…ç½®å‡½æ•°sortedï¼Œä½†æ˜¯sortedå‡½æ•°è¿”å›çš„ç»“æœæ˜¯æ’åºçš„æœ€ç»ˆç»“æœè€Œä¸æ˜¯æ’åºä¹‹å‰çš„ç´¢å¼•å€¼åºåˆ—ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨sortedå‡½æ•°å¯¹å­—å…¸æ’åºçš„èƒ½åŠ›ï¼Œå°†åˆ—è¡¨è½¬æ¢æˆå­—å…¸å°±å¯ä»¥äº†ã€‚åˆ—è¡¨è½¬å­—å…¸çš„æ–¹æ³•æ˜¯å…ˆå°†åˆ—è¡¨é€šè¿‡enumerateå‡½æ•°è½¬æ¢æˆæšä¸¾å‹ï¼Œç„¶ååœ¨é€šè¿‡dictå‡½æ•°è½¬æ¢æˆå­—å…¸ã€‚è¿™æ ·ä¼ å…¥çš„åˆ—è¡¨å°±å˜ä¸ºä¸€ä¸ªé”®ä¸ºç´¢å¼•å€¼ä¸ºåŸå€¼çš„ä¸€ä¸ªå­—å…¸äº†ã€‚è¿™æ ·æˆ‘ä»¬å†ä½¿ç”¨sortedå‡½æ•°å¯¹å­—å…¸æ’åºï¼Œå†è¿”å›å­—å…¸çš„é”®å°±å¯ä»¥äº†ã€‚ def argsort(X): d = dict(enumerate(X)) r = dict(sorted(d.items(), key=lambda x:x[1])) return list(r.keys())li = [1.5, 3, 15, 21, 7, 31, 5]indies = argsort(li)print(indies) è¿è¡Œç»“æœï¼š [0, 1, 6, 4, 2, 3, 5]","categories":[{"name":"ä»£ç ","slug":"ä»£ç ","permalink":"http://chiang97912.github.io/categories/%E4%BB%A3%E7%A0%81/"}],"tags":[{"name":"python","slug":"python","permalink":"http://chiang97912.github.io/tags/python/"},{"name":"ä»£ç ","slug":"ä»£ç ","permalink":"http://chiang97912.github.io/tags/%E4%BB%A3%E7%A0%81/"}]},{"title":"æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•åŸç†åŠå®ç°","slug":"æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•åŸç†åŠå®ç°","date":"2018-09-02T09:45:12.000Z","updated":"2025-12-13T12:19:01.049Z","comments":true,"path":"2018/09/02/æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•åŸç†åŠå®ç°/","permalink":"http://chiang97912.github.io/2018/09/02/%E6%A8%A1%E7%B3%8A%E7%BB%BC%E5%90%88%E8%AF%84%E4%BB%B7%E6%B3%95%E5%8E%9F%E7%90%86%E5%8F%8A%E5%AE%9E%E7%8E%B0/","excerpt":"æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•åŸç† åŸºæœ¬æ€æƒ³ æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•æ˜¯ä¸€ç§åŸºäºæ¨¡ç³Šæ•°å­¦çš„ç»¼åˆè¯„ä»·æ–¹æ³•ã€‚è¯¥ç»¼åˆè¯„ä»·æ³•æ ¹æ®æ¨¡ç³Šæ•°å­¦çš„éš¶å±åº¦ç†è®ºæŠŠå®šæ€§è¯„ä»·è½¬åŒ–ä¸ºå®šé‡è¯„ä»·ï¼Œå³ç”¨æ¨¡ç³Šæ•°å­¦å¯¹å—åˆ°å¤šç§å› ç´ åˆ¶çº¦çš„äº‹ç‰©æˆ–å¯¹è±¡åšå‡ºä¸€ä¸ªæ€»ä½“çš„è¯„ä»·ã€‚å®ƒå…·æœ‰ç»“æœæ¸…æ™°ï¼Œç³»ç»Ÿæ€§å¼ºçš„ç‰¹ç‚¹ï¼Œèƒ½è¾ƒå¥½åœ°è§£å†³æ¨¡ç³Šçš„ã€éš¾ä»¥é‡åŒ–çš„é—®é¢˜ï¼Œé€‚åˆå„ç§éç¡®å®šæ€§é—®é¢˜çš„è§£å†³ã€‚","text":"æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•åŸç† åŸºæœ¬æ€æƒ³ æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•æ˜¯ä¸€ç§åŸºäºæ¨¡ç³Šæ•°å­¦çš„ç»¼åˆè¯„ä»·æ–¹æ³•ã€‚è¯¥ç»¼åˆè¯„ä»·æ³•æ ¹æ®æ¨¡ç³Šæ•°å­¦çš„éš¶å±åº¦ç†è®ºæŠŠå®šæ€§è¯„ä»·è½¬åŒ–ä¸ºå®šé‡è¯„ä»·ï¼Œå³ç”¨æ¨¡ç³Šæ•°å­¦å¯¹å—åˆ°å¤šç§å› ç´ åˆ¶çº¦çš„äº‹ç‰©æˆ–å¯¹è±¡åšå‡ºä¸€ä¸ªæ€»ä½“çš„è¯„ä»·ã€‚å®ƒå…·æœ‰ç»“æœæ¸…æ™°ï¼Œç³»ç»Ÿæ€§å¼ºçš„ç‰¹ç‚¹ï¼Œèƒ½è¾ƒå¥½åœ°è§£å†³æ¨¡ç³Šçš„ã€éš¾ä»¥é‡åŒ–çš„é—®é¢˜ï¼Œé€‚åˆå„ç§éç¡®å®šæ€§é—®é¢˜çš„è§£å†³ã€‚ éš¶å±åº¦ éš¶å±å‡½æ•°ï¼Œä¹Ÿç§°ä¸ºå½’å±å‡½æ•°æˆ–æ¨¡ç³Šå…ƒå‡½æ•°ï¼Œæ˜¯æ¨¡ç³Šé›†åˆä¸­ä¼šç”¨åˆ°çš„å‡½æ•°ï¼Œæ˜¯ä¸€èˆ¬é›†åˆä¸­æŒ‡ç¤ºå‡½æ•°çš„ä¸€èˆ¬åŒ–ã€‚æŒ‡ç¤ºå‡½æ•°å¯ä»¥è¯´æ˜ä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´ æ˜¯å¦å±äºç‰¹å®šå­é›†åˆã€‚ä¸€å…ƒç´ çš„æŒ‡ç¤ºå‡½æ•°çš„å€¼å¯èƒ½æ˜¯0æˆ–æ˜¯1ï¼Œè€Œå…ƒç´ çš„éš¶å±å‡½æ•°ä¼šæ˜¯0åˆ°1ä¹‹é—´çš„æ•°å€¼ï¼Œè¡¨ç¤ºå…ƒç´ å±äºæŸæ¨¡ç³Šé›†åˆçš„â€œçœŸå®ç¨‹åº¦â€ï¼ˆdegree of truthï¼‰å³éš¶å±åº¦ã€‚ åŸºæœ¬æ¨¡å‹ è®¾è¯„åˆ¤å¯¹è±¡ä¸ºP: å…¶å› ç´ é›† $ U={ u_1, u_2, \\cdots , u_n } $ ,è¯„åˆ¤ç­‰çº§é›† $ V={ v_1, v_2, \\cdots ,v_m } $ ã€‚å¯¹Uä¸­æ¯ä¸€å› ç´ æ ¹æ®è¯„åˆ¤é›†ä¸­çš„ç­‰çº§æŒ‡æ ‡è¿›è¡Œæ¨¡ç³Šè¯„åˆ¤ï¼Œå¾—åˆ°è¯„åˆ¤çŸ©é˜µï¼š R=[r11,r12,â‹¯ ,r1mr21,r22,â‹¯ ,r2mrn1,rn2,â‹¯ ,rnm]R=\\begin{bmatrix} r{11},r{12},\\cdots,r{1m} \\\\ r{21},r{22},\\cdots,r{2m} \\\\ r{n1},r{n2},\\cdots,r_{nm} \\end{bmatrix} R=â£â¢â¡â€‹r11,r12,â‹¯,r1mr21,r22,â‹¯,r2mrn1,rn2,â‹¯,rnmâ€‹â€‹â¦â¥â¤â€‹ é€šå¸¸ä¸ºäº†é¿å…é‡çº²çš„å½±å“ï¼Œæˆ‘ä»¬è¿˜è¦è¿›è¡Œå»é‡çº²æ“ä½œã€‚ å…¶ä¸­ï¼Œrijr_{ij}rijâ€‹è¡¨ç¤ºuiu_iuiâ€‹å…³äºvjv_jvjâ€‹çš„éš¶å±åº¦ã€‚(U,V,R) åˆ™æ„æˆäº†ä¸€ä¸ªæ¨¡ç³Šç»¼åˆè¯„åˆ¤æ¨¡å‹ã€‚ç¡®å®šå„å› ç´ é‡è¦æ€§æŒ‡æ ‡ï¼ˆä¹Ÿç§°æƒæ•°ï¼‰åï¼Œè®°ä¸ºA={a1,a2,â‹¯ ,an}A=\\{ a_1,a_2, \\cdots,a_n \\}A={a1â€‹,a2â€‹,â‹¯,anâ€‹},æ»¡è¶³âˆ‘i=1nai=1\\sum_{i=1}^na_i=1âˆ‘i=1nâ€‹aiâ€‹=1ï¼Œåˆæˆå¾— Bâ€¾=Aâ‹…R=(b1â€¾,b2â€¾,â‹¯ ,bmâ€¾)\\overline B = A\\cdot R=\\left(\\overline {b_1}, \\overline {b_2}, \\cdots ,\\overline {b_m} \\right) B=Aâ‹…R=(b1â€‹â€‹,b2â€‹â€‹,â‹¯,bmâ€‹â€‹) ç»å½’ä¸€åŒ–åï¼Œå¾— $ B= { b_i, b_2, \\cdots, b_m } $ ,äºæ˜¯å¯ç¡®å®šå¯¹è±¡Pçš„è¯„åˆ¤ç­‰çº§ã€‚ å¦‚æœæƒ³å¾—åˆ°ç»¼åˆå¾—åˆ†ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜å¯ä»¥å¯¹Bè¿›ä¸€æ­¥æ‰“åˆ†ï¼Œå³ä»¥åŒæ ·çš„æ–¹å¼è®¾ç½®æƒæ•°ï¼Œå¯¹Bè¿›è¡Œç»¼åˆè¯„å®šã€‚ å¯¹é—®é¢˜è¿›è¡Œæ¨¡ç³Šç»¼åˆåˆ†æä¹‹åæˆ‘ä»¬é€šå¸¸è¿˜è¦è€ƒå¯Ÿè¯¥æ¨¡å‹çš„ç½®ä¿¡åº¦ã€‚ æƒæ•°çš„ç¡®å®šï¼š æƒæ•°å¯ä»¥é€šè¿‡æ•°å­¦æ–¹æ³•æ¥ç¡®å®šï¼Œä¹Ÿå¯ä»¥ç”±å…·æœ‰æƒå¨æ€§çš„ä¸“å®¶åŠå…·æœ‰ä»£è¡¨æ€§çš„äººæŒ‰å› ç´ çš„é‡è¦ç¨‹åº¦æ¥å•†å®šã€‚ä¸è¿‡ç°åœ¨é€šç”¨çš„åšæ³•æ˜¯å‡­ç»éªŒç»™å‡ºæƒé‡ã€‚ åˆæˆç®—æ³•ï¼š åˆæˆç®—æ³•å³åŠ æƒçš„æ–¹å¼ï¼Œå¸¸è§ç®—æ³•æœ‰ï¼š ä¸»å› ç´ å†³å®šå‹ bi=maxâ¡{minâ¡{a1,r1i},minâ¡{a2,r2i},â‹¯ ,minâ¡{an,rni}}b_i=\\max \\left \\{ \\min \\left \\{ a_1,r_{1i} \\right\\},\\min \\left \\{ a_2,r_{2i} \\right\\} ,\\cdots,\\min \\left \\{ a_n,r_{ni} \\right\\}\\right\\} biâ€‹=max{min{a1â€‹,r1iâ€‹},min{a2â€‹,r2iâ€‹},â‹¯,min{anâ€‹,rniâ€‹}} ä¸»å› ç´ çªå‡ºå‹ bi=maxâ¡{a1Ã—r1i,a2Ã—r2i,â‹¯ ,anÃ—rni}b_i=\\max \\left \\{ a_1\\times r_{1i}, a_2\\times r_{2i} ,\\cdots,a_n\\times r_{ni}\\right\\} biâ€‹=max{a1â€‹Ã—r1iâ€‹,a2â€‹Ã—r2iâ€‹,â‹¯,anâ€‹Ã—rniâ€‹} åŠ æƒå¹³å‡å‹ bi=a1Ã—r1i+a2Ã—r2i+â‹¯+anÃ—rnib_i=a_1\\times r_{1i} + a_2\\times r_{2i} +\\cdots+a_n\\times r_{ni} biâ€‹=a1â€‹Ã—r1iâ€‹+a2â€‹Ã—r2iâ€‹+â‹¯+anâ€‹Ã—rniâ€‹ åŠ æƒå¹³å‡å‹ç®—æ³•å¸¸ç”¨åœ¨å› ç´ é›†å¾ˆå¤šçš„æƒ…å½¢ï¼Œå®ƒå¯ä»¥é¿å…ä¿¡æ¯ä¸¢å¤±ï¼›ä¸»å› ç´ çªå‡ºå‹ç®—æ³•å¸¸ç”¨åœ¨æ‰€ç»Ÿè®¡çš„æ¨¡ç³ŠçŸ©é˜µä¸­çš„æ•°æ®ç›¸å·®å¾ˆæ‚¬æ®Šçš„æƒ…å½¢ï¼Œå®ƒå¯ä»¥é˜²æ­¢ç‰¹æ®Šæ•°æ®çš„å¹²æ‰°ã€‚ å®ä¾‹ï¼šæ•™å­¦è´¨é‡è¯„ä»· æˆ‘ä»¬é¦–å…ˆæŒ‰ç…§ç¥¨æ•°ç»“æœç»Ÿè®¡äº†25åå­¦ç”Ÿå¯¹æŸä½è€å¸ˆçš„æ•™å­¦è´¨é‡è¯„ä»·è¡¨ï¼Œç»Ÿè®¡ç»“æœå¦‚ä¸‹ï¼š å¥½ï¼ˆ100ï¼‰ è¾ƒå¥½ï¼ˆ85ï¼‰ ä¸€èˆ¬ï¼ˆ70ï¼‰ è¾ƒå·®ï¼ˆ55ï¼‰ 1. æ•™å­¦è®¡åˆ’åŠæ•™å­¦å†…å®¹å®‰æ’ï¼ˆ0.10ï¼‰ 9 14 2 0 2. æ•™æåŠå‚è€ƒèµ„æ–™çŠ¶å†µï¼ˆ0.10ï¼‰ 3 14 7 1 3. æ•™å¸ˆæ•™å­¦æ€åº¦åŠè´£ä»»å¿ƒï¼ˆ0.15ï¼‰ 5 15 5 0 4. æ•™å¸ˆè®²è§£èƒ½åŠ›ï¼ˆ0.10ï¼‰ 1 10 11 3 5. è¯¾å ‚æ•™å­¦å½¢å¼çš„å¤šæ ·åŒ–ç¨‹åº¦ï¼ˆ0.10ï¼‰ 2 11 12 0 6. ç†è®ºè”ç³»å®é™…ç¨‹åº¦åŠæ•™å­¦æ¡ˆä¾‹ä½¿ç”¨æƒ…å†µï¼ˆ0.10ï¼‰ 5 14 6 0 7. è¾…åŠ©æ•™å­¦ç¯èŠ‚åŠè€ƒæ ¸æƒ…å†µï¼ˆ0.10ï¼‰ 4 6 13 2 8. æ•™å­¦æ”¹é©ä¸åˆ›æ–°æƒ…å†µï¼ˆ0.10ï¼‰ 3 8 12 2 9. ä»æœ¬è¯¾ç¨‹å­¦ä¹ ä¸­æ‰€è·å¾—çš„æ”¶ç›Šç¨‹åº¦ï¼ˆ0.15ï¼‰ 5 12 6 2 ç”±äºæˆ‘ä»¬æœ€ç»ˆè¦ç»™æ¯é¡¹æŒ‡æ ‡æ‰“åˆ†ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨ç¥¨æ•°è®¡ç®—é‚£ä¹ˆå¿…ç„¶ä¼šå¯¼è‡´ç»“æœæ”¶åˆ°å‚è¯„äººå‘˜æ•°é‡çš„å½±å“ï¼Œå³å‚è¯„äººæ•°ä¸º1000å’Œå‚è¯„äººæ•°ä¸º25çš„ç»“æœæˆªç„¶ä¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨æŸé¡¹æŒ‡æ ‡çš„æŸä¸ªç­‰çº§ç¥¨æ•°çš„é¢‘ç‡æ¥ä»£æ›¿ç¥¨æ•°æ¥è¡¨ç¤ºéš¶å±åº¦ã€‚å„é¡¹å› ç´ çš„æƒæ•°å‘é‡ä¸ºï¼š[0.1,0.1,0.15,0.10,0.10,0.10,0.10,0.10,0.15][0.1, 0.1, 0.15, 0.10, 0.10, 0.10, 0.10,0.10, 0.15][0.1,0.1,0.15,0.10,0.10,0.10,0.10,0.10,0.15]ï¼Œè¯„åˆ¤ç­‰çº§çš„æƒæ•°å‘é‡ä¸º:[100,85,70,55][100, 85,70,55][100,85,70,55]ï¼Œå…¶ä¸­ä¸¤ä¸ªæƒæ•°å‘é‡ä¹‹å’Œä¸º1ã€‚ å¥½ï¼ˆ100ï¼‰ è¾ƒå¥½ï¼ˆ85ï¼‰ ä¸€èˆ¬ï¼ˆ70ï¼‰ è¾ƒå·®ï¼ˆ55ï¼‰ 1. æ•™å­¦è®¡åˆ’åŠæ•™å­¦å†…å®¹å®‰æ’ï¼ˆ0.10ï¼‰ 0.36 0.56 0.08 0.00 2. æ•™æåŠå‚è€ƒèµ„æ–™çŠ¶å†µï¼ˆ0.10ï¼‰ 0.12 0.56 0.28 0.04 3. æ•™å¸ˆæ•™å­¦æ€åº¦åŠè´£ä»»å¿ƒï¼ˆ0.15ï¼‰ 0.20 0.60 0.2 0.00 4. æ•™å¸ˆè®²è§£èƒ½åŠ›ï¼ˆ0.10ï¼‰ 0.04 0.4 0.44 0.12 5. è¯¾å ‚æ•™å­¦å½¢å¼çš„å¤šæ ·åŒ–ç¨‹åº¦ï¼ˆ0.10ï¼‰ 0.08 0.44 0.48 0.00 6. ç†è®ºè”ç³»å®é™…ç¨‹åº¦åŠæ•™å­¦æ¡ˆä¾‹ä½¿ç”¨æƒ…å†µï¼ˆ0.10ï¼‰ 0.20 0.56 0.24 0.00 7. è¾…åŠ©æ•™å­¦ç¯èŠ‚åŠè€ƒæ ¸æƒ…å†µï¼ˆ0.10ï¼‰ 0.16 0.24 0.52 0.08 8. æ•™å­¦æ”¹é©ä¸åˆ›æ–°æƒ…å†µï¼ˆ0.10ï¼‰ 0.12 0.32 0.48 0.08 9. ä»æœ¬è¯¾ç¨‹å­¦ä¹ ä¸­æ‰€è·å¾—çš„æ”¶ç›Šç¨‹åº¦ï¼ˆ0.15ï¼‰ 0.2 0.48 0.24 0.08 ç»¼åˆéš¶å±åº¦ 0.168 0.47 0.318 0.044 ç»¼åˆéš¶å±åº¦ç”±å„é¡¹å› ç´ çš„æƒæ•°å‘é‡å’Œç›¸åº”åˆ—çš„è¯„åˆ¤ç­‰çº§å‘é‡ç»è¿‡åˆæˆç®—æ³•ï¼ˆè¿™é‡Œä½¿ç”¨åŠ æƒå¹³å‡ï¼‰åçš„ç»“æœï¼Œ ç»¼åˆå¾—åˆ†ï¼š0.168x100 + 0.47x85 + 0.318x70 + 0.044x55=81.43 ä»£ç å®ç° ä¸‹é¢ä»£ç ä¸­çš„fuzzy_methodä¸ºä¸»å‡½æ•°ï¼Œfuzzy_comprehensive_evaluationä¸ºæ¨¡ç³Šç»¼åˆè¯„ä»·æ³•çš„ä¸»è¦é€»è¾‘ã€‚ function fuzzy_method % æ¨¡ç³Šç»¼åˆè¯„ä»·æ¨¡å‹ä¸»å‡½æ•° A1=[0.1 0.2 0.3 0.4]; A2=[0.4 0.35 0.15 0.1]; R=[0.2 0.5 0.2 0.1; 0.7 0.2 0.1 0; 0 0.4 0.5 0.1; 0.2 0.3 0.5 0]; fuzzy_comprehensive_evaluation(1,A1,R) fuzzy_comprehensive_evaluation(1,A2,R)endfunction B=fuzzy_comprehensive_evaluation(model,A,R) %æ¨¡ç³Šç»¼åˆè¯„åˆ¤ % å‚æ•°modelç”¨äºåˆæˆç®—æ³•çš„ç¡®å®šï¼Œå‚æ•°Aä¸ºæƒæ•°å‘é‡ï¼Œå‚æ•°Rä¸ºéš¶å±åº¦çŸ©é˜µã€‚ B=[]; [m,s1]=size(A); [s2,n]=size(R); if(s1~=s2) disp(&#x27;Açš„åˆ—ä¸ç­‰äºRçš„è¡Œ&#x27;); else if(model==1) %ä¸»å› ç´ å†³å®šå‹ for(i=1:m) for(j=1:n) B(i,j)=0; for(k=1:s1) x=0; if(A(i,k)&lt;R(k,j)) x=A(i,k); else x=R(k,j); end if(B(i,j)&lt;x) B(i,j)=x; end end end end elseif(model==2) %ä¸»å› ç´ çªå‡ºå‹ for(i=1:m) for(j=1:n) B(i,j)=0; for(k=1:s1) x=A(i,k)*R(k,j); if(B(i,j)&lt;x) B(i,j)=x; end end end end elseif(model==3) %åŠ æƒå¹³å‡å‹ for(i=1:m) for(j=1:n) B(i,j)=0; for(k=1:s1) B(i,j)=B(i,j)+A(i,k)*R(k,j); end end end elseif(model==4) %å–å°ä¸Šç•Œå’Œå‹ for(i=1:m) for(j=1:n) B(i,j)=0; for(k=1:s1) x=0; x=min(A(i,k),R(k,j)); B(i,j)=B(i,j)+x; end B(i,j)=min(B(i,j),1); end end elseif(model==5) %å‡è¡¡å¹³å‡å‹ C=[]; C=sum(R); for(j=1:n) for(i=1:s2) R(i,j)=R(i,j)/C(j); end end for(i=1:m) for(j=1:n) B(i,j)=0; for(k=1:s1) x=0; x=min(A(i,k),R(k,j)); B(i,j)=B(i,j)+x; end end end else disp(&#x27;æ¨¡å‹èµ‹å€¼ä¸å½“&#x27;); end endend","categories":[{"name":"æ•°å­¦å»ºæ¨¡","slug":"æ•°å­¦å»ºæ¨¡","permalink":"http://chiang97912.github.io/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/"}],"tags":[{"name":"æ•°å­¦å»ºæ¨¡","slug":"æ•°å­¦å»ºæ¨¡","permalink":"http://chiang97912.github.io/tags/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/"},{"name":"æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•","slug":"æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•","permalink":"http://chiang97912.github.io/tags/%E6%A8%A1%E7%B3%8A%E7%BB%BC%E5%90%88%E8%AF%84%E4%BB%B7%E6%B3%95/"}]},{"title":"æ•°å­¦å»ºæ¨¡ç¬”è®°","slug":"æ•°å­¦å»ºæ¨¡ç¬”è®°","date":"2018-08-29T02:08:05.000Z","updated":"2025-12-13T12:17:31.728Z","comments":true,"path":"2018/08/29/æ•°å­¦å»ºæ¨¡ç¬”è®°/","permalink":"http://chiang97912.github.io/2018/08/29/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1%E7%AC%94%E8%AE%B0/","excerpt":"ä¼˜åŒ–æ¨¡å‹ ä¼˜åŒ–æ¨¡å‹å°±æ˜¯ç»™å®šä¸€ä¸ªç›®æ ‡å‡½æ•°ï¼Œç„¶ååœ¨çº¦æŸæ¡ä»¶ä¸‹æ±‚å‡ºè¯¥ç›®æ ‡å‡½æ•°çš„æœ€ä¼˜å€¼ã€‚","text":"ä¼˜åŒ–æ¨¡å‹ ä¼˜åŒ–æ¨¡å‹å°±æ˜¯ç»™å®šä¸€ä¸ªç›®æ ‡å‡½æ•°ï¼Œç„¶ååœ¨çº¦æŸæ¡ä»¶ä¸‹æ±‚å‡ºè¯¥ç›®æ ‡å‡½æ•°çš„æœ€ä¼˜å€¼ã€‚ å½¢å¦‚ï¼š minâ¡(æˆ–maxâ¡) z=f(x),x=(x1,...)s.t.gi(x)â‰¤0,i=1,2,...\\min(æˆ–\\max)\\ z=f(x), x=(x_1,...)\\\\ s.t. g_i(x)\\leq0,i=1,2,... min(æˆ–max) z=f(x),x=(x1â€‹,...)s.t.giâ€‹(x)â‰¤0,i=1,2,... å†³ç­–å˜é‡ï¼š x ç›®æ ‡å‡½æ•°ï¼š f(x) çº¦æŸæ¡ä»¶ï¼š $ s.t. g_i(x)\\leq0 $ ä¼˜åŒ–é—®é¢˜ä¸‰è¦ç´ ï¼š å†³ç­–å˜é‡ ç›®æ ‡å‡½æ•° çº¦æŸæ¡ä»¶ æ•°å­¦è§„åˆ’ï¼š çº¿æ€§è§„åˆ’ï¼ˆLinear Programmingï¼Œç®€ç§°LPï¼‰ éçº¿æ€§è§„åˆ’(Nonlinear Programmingï¼Œç®€ç§°NLP) æ•´æ•°è§„åˆ’ LINGOè½¯ä»¶æ±‚è§£ä¼˜åŒ–æ¨¡å‹ ä¾‹é¢˜ï¼š maxâ¡ S{aixi=S,i=1,2,...âˆ‘i=16xi=5000,a5x6=5000.\\begin{array}{lcl} \\max \\ S\\\\ \\begin{cases} a_i x_i=S,i=1,2,... \\\\ \\sum^6_{i=1}x_i=5000, \\\\ a_5x_6=5000. \\end{cases} \\end{array} max Sâ©âªâªâ¨âªâªâ§â€‹aiâ€‹xiâ€‹=S,i=1,2,...âˆ‘i=16â€‹xiâ€‹=5000,a5â€‹x6â€‹=5000.â€‹â€‹ å­˜æœŸå¹´é™ 1å¹´ 2å¹´ 3å¹´ 4å¹´ 5å¹´ æœ€æœ‰æ”¶ç›Š 1.018 1.0432 1.0776 1.09715968 1.144 LINGOä»£ç ï¼š !æ±‚è§£è§„åˆ’é—®é¢˜;model:min = S;1.018 * x1 = S;1.0432 * x2 = S;1.07776 * x3 = S;1.09715968 * x4 = S;1.144 * x5 = S;x1 + x2 + x3 + x4 + x5 + x6 = 5000;1.144 * x6 = 5000;end è¿è¡Œç»“æœï¼š Global optimal solution found.Objective value: 135.2227Infeasibilities: 0.000000Total solver iterations: 0 Variable Value Reduced Cost S 135.2227 0.000000 X1 132.8317 0.000000 X2 129.6230 0.000000 X3 125.4664 0.000000 X4 123.2479 0.000000 X5 118.2016 0.000000 X6 4370.629 0.000000 Row Slack or Surplus Dual Price 1 135.2227 -1.000000 2 0.000000 0.2110548 3 0.000000 0.2059565 4 0.000000 0.1993522 5 0.000000 0.1958273 6 0.000000 0.1878093 7 0.000000 -0.2148538 8 0.000000 0.1878093 å…¶ä¸­Objective valueé¡¹å³ä¸ºæ‰€æ±‚ç›®æ ‡å€¼ï¼Œä¸‹é¢çš„Variableå³ä¸ºåœ¨æœ€ä¼˜çŠ¶æ€ä¸‹å„å˜é‡å€¼ã€‚ å…³äºLINGOæ•™ç¨‹ç½‘ä¸Šæœ‰å¾ˆå¤šï¼Œåœ¨è¿™é‡Œä¸å†èµ˜è¿°ã€‚è¯»è€…å¯ä»¥å‰å¾€ è¿™é‡ŒæŸ¥çœ‹ã€‚ MATLABè½¯ä»¶æ±‚è§£ä¼˜åŒ–æ¨¡å‹ å¸¸ç”¨çš„ä¼˜åŒ–åŠŸèƒ½å‡½æ•°ï¼š æ±‚è§£çº¿æ€§è§„åˆ’é—®é¢˜çš„ä¸»è¦å‡½æ•°æ˜¯linprogã€‚ æ±‚è§£äºŒæ¬¡è§„åˆ’é—®é¢˜çš„ä¸»è¦å‡½æ•°æ˜¯quadprogã€‚ æ±‚è§£æ— çº¦æŸéçº¿æ€§è§„åˆ’é—®é¢˜çš„ä¸»è¦å‡½æ•°æ˜¯fminbndã€fminuncå’Œfminsearchã€‚ æ±‚è§£çº¦æŸéçº¿æ€§è§„åˆ’é—®é¢˜çš„ä¸»è¦å‡½æ•°æ˜¯fgoalattainå’Œfminimaxã€‚ ä¸€èˆ¬æ­¥éª¤ï¼š é’ˆå¯¹å…·ä½“å·¥ç¨‹é—®é¢˜å»ºç«‹ä¼˜åŒ–è®¾è®¡çš„æ•°å­¦æ¨¡å‹ å»ºç«‹ç›®æ ‡å‡½æ•°æ–‡ä»¶ å»ºç«‹çº¦æŸå‡½æ•°æ–‡ä»¶ å»ºç«‹è°ƒç”¨ä¼˜åŒ–å·¥å…·å‡½æ•°çš„å‘½ä»¤æ–‡ä»¶ å°†ä¼˜åŒ–è®¾è®¡çš„å‘½ä»¤æ–‡ä»¶å¤åˆ¶åˆ°MATLABå‘½ä»¤çª—å£ä¸­è¿›è¡Œè¿ç®—æ±‚è§£ã€‚ çº¿æ€§è§„åˆ’é—®é¢˜ æ•°å­¦æ¨¡å‹å½¢å¼ï¼š minâ¡fTXs.t.AXâ‰¤b (çº¿æ€§ä¸ç­‰å¼çº¦æŸæ¡ä»¶)AeqX=beq ï¼ˆçº¿æ€§ç­‰å¼çº¦æŸæ¡ä»¶lbâ‰¤Xâ‰¤ub (è¾¹ç•Œçº¦æŸæ¡ä»¶)\\begin{array}{lcl} \\min f^TX \\\\ s.t. AX\\leq b~~~~(çº¿æ€§ä¸ç­‰å¼çº¦æŸæ¡ä»¶) \\\\ AeqX=beq~~~~ï¼ˆçº¿æ€§ç­‰å¼çº¦æŸæ¡ä»¶ \\\\ lb \\leq X \\leq ub~~~~(è¾¹ç•Œçº¦æŸæ¡ä»¶) \\end{array} minfTXs.t.AXâ‰¤b (çº¿æ€§ä¸ç­‰å¼çº¦æŸæ¡ä»¶)AeqX=beq ï¼ˆçº¿æ€§ç­‰å¼çº¦æŸæ¡ä»¶lbâ‰¤Xâ‰¤ub (è¾¹ç•Œçº¦æŸæ¡ä»¶)â€‹ MATLABä¸­å‡½æ•°è°ƒç”¨æ ¼å¼: [xopt, fopt]=linprog(f, A, b, Aeq, beq, lb, ub, x0, options) å‚æ•°åŠè¿”å›å€¼é‡Šä¹‰ï¼š xopt: æœ€ä¼˜è§£ fopt: æœ€ä¼˜å€¼ f: ç›®æ ‡å‡½æ•°å„ç»´å˜é‡ç³»æ•°å‘é‡ x0ï¼šåˆå§‹ç‚¹ options: å¯é€‰é¡¹ æ³¨ï¼š A, b, Aeq, beq, lb, ubå‡å’Œä¸Šè¿°æ•°å­¦æ¨¡å‹å¯¹åº”ã€‚ äºŒæ¬¡è§„åˆ’é—®é¢˜ æ•°å­¦æ¨¡å‹å½¢å¼ï¼š minâ¡f(X)=12XTHX+CTXs.t.AXâ‰¤bAeqX=beqlbâ‰¤Xâ‰¤ub\\begin{array}{lcl} \\min f(X)=\\frac{1}{2}X^THX+C^TX \\\\ s.t. AX\\leq b AeqX=beq \\\\ lb \\leq X \\leq ub \\end{array} minf(X)=21â€‹XTHX+CTXs.t.AXâ‰¤bAeqX=beqlbâ‰¤Xâ‰¤ubâ€‹ [xopt, fopt]=quadprog(H,C, A, b, Aeq, beq, lb, ub, x0, options) å‚æ•°åŠè¿”å›å€¼é‡Šä¹‰ï¼š xopt: æœ€ä¼˜è§£ fopt: æœ€ä¼˜å€¼ H: ç›®æ ‡å‡½æ•°çš„æµ·å¡çŸ©é˜µ Cï¼š ç›®æ ‡å‡½æ•°çš„ä¸€æ¬¡é¡¹ç³»æ•°å‘é‡ å…¶ä½™åŒä¸Šã€‚ ç¤ºä¾‹ï¼š æ±‚è§£çº¦æŸä¼˜åŒ–é—®é¢˜ f(X)=2X12+2x22+x32âˆ’2x1x2+x3s.t.g(X)=x1+3x2+2x3â‰¤6h(X)=2x1âˆ’x2+x3=4x1,x2,x3â‰¥0\\begin{array}{lcl} f(X)=2X^2_1+2x^2_2+x^2_3-2x_1x_2+x_3\\\\ s.t. g(X)=x_1+3x_2+2x_3\\leq 6\\\\ h(X)=2x_1-x_2+x_3=4\\\\ x_1,x_2,x_3\\geq 0 \\end{array} f(X)=2X12â€‹+2x22â€‹+x32â€‹âˆ’2x1â€‹x2â€‹+x3â€‹s.t.g(X)=x1â€‹+3x2â€‹+2x3â€‹â‰¤6h(X)=2x1â€‹âˆ’x2â€‹+x3â€‹=4x1â€‹,x2â€‹,x3â€‹â‰¥0â€‹ è§£ï¼š(1)å°†ç›®æ ‡å‡½æ•°å†™æˆäºŒæ¬¡å‡½æ•°çš„å½¢å¼f(X)=12XTHX+CTXf(X)=\\frac{1}{2}X^THX+C^TXf(X)=21â€‹XTHX+CTX,å…¶ä¸­ï¼š X=[x1x2x3]H=[4âˆ’20âˆ’240002]C=[001]\\begin{array}{lcl} X=\\begin{bmatrix} x_1\\\\ x_2\\\\ x_3 \\end{bmatrix} H=\\begin{bmatrix} 4 &amp; -2 &amp; 0\\\\ -2 &amp; 4 &amp; 0\\\\ 0 &amp; 0 &amp; 2 \\end{bmatrix} C=\\begin{bmatrix} 0\\\\ 0\\\\ 1 \\end{bmatrix} \\end{array}X=â£â¢â¡â€‹x1â€‹x2â€‹x3â€‹â€‹â¦â¥â¤â€‹H=â£â¢â¡â€‹4âˆ’20â€‹âˆ’240â€‹002â€‹â¦â¥â¤â€‹C=â£â¢â¡â€‹001â€‹â¦â¥â¤â€‹â€‹ (2)ç¼–å†™æ±‚è§£äºŒæ¬¡è§„åˆ’çš„Mæ–‡ä»¶ï¼š H=[4,-2,0;-2,4,0;0,0,2];C=[0,0,1];A=[1,3,2];b=[6];Aeq=[2,-1,1];beq=[4];lb=zeros(3,1);[xopt,fopt]=quadprig(H,C,A,b,Aeq,beq,lb) å…¶ä»–è§„åˆ’é—®é¢˜ å…¶ä»–è§„åˆ’é—®é¢˜çš„MATLABå‡½æ•°ä½¿ç”¨æ–¹æ³•å’Œå‰é¢ä¸¤ä¸ªç±»ä¼¼ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•è¯»è€…å¯ä»¥æŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚ å¾®åˆ†æ–¹ç¨‹åŠæ•°å€¼è§£ æ•°å­¦å»ºæ¨¡ä¸­çš„å¾®åˆ†æ–¹ç¨‹æ¨¡å‹ï¼Œå…¶å®å°±æ˜¯é«˜ç­‰æ•°å­¦ä¸­çš„å¾®ç§¯åˆ†çŸ¥è¯†åœ¨å»ºæ¨¡ä¸­çš„åº”ç”¨ã€‚å¸¸è§çš„å¾®åˆ†æ–¹ç¨‹æ¨¡å‹æœ‰äººå£æ¨¡å‹å’Œç§ç¾¤æ•°é‡æ¨¡å‹ã€‚ å®ä¾‹ æ¸©åº¦å†·å´ ç”±ç‰©ç†å­¦çŸ¥é“,ç‰©ä½“å†·å´çš„é€Ÿåº¦ä¸å½“æ—¶çš„ç‰©ä½“æ¸©åº¦å’Œå‘¨å›´ç¯å¢ƒæ¸©åº¦ä¹‹å·®æˆæ­£æ¯”.ä»Š 100â„ƒçš„æ²¸æ°´æ³¨å…¥æ¯é‡Œ,æ”¾åœ¨å®¤æ¸©ä¸º 20â„ƒçš„ç¯å¢ƒå†·å´,5min åæµ‹å¾—æ°´æ¸©ä¸º 60â„ƒ.æ±‚æ°´æ¸© u ä¸æ—¶é—´ t çš„å‡½æ•°å…³ç³». é—®é¢˜åˆ†æåŠæ¨¡å‹çš„å»ºç«‹ è®¾æ¯”ä¾‹ç³»æ•°ä¸ºk(k&gt;0),æ ¹æ®é¢˜æ„å¯å¾—å¾®åˆ†æ–¹ç¨‹ dudt=âˆ’k(uâˆ’20)uâˆ£t=0=100,uâˆ£t=5=60\\begin{array}{lcl} \\frac{du}{dt}=-k(u-20)\\\\ u|_{t=0}=100,u|_{t=5}=60 \\end{array} dtduâ€‹=âˆ’k(uâˆ’20)uâˆ£t=0â€‹=100,uâˆ£t=5â€‹=60â€‹ æ¨¡å‹çš„æ±‚è§£ æ­¤ä¸ºç®€å•çš„ä¸€é˜¶å¯åˆ†ç¦»å˜é‡å¾®åˆ†æ–¹ç¨‹,å¯å¾—è§£æè§£u=20+80(0.5)t5u=20+80(0.5)^{\\frac{t}{5}}u=20+80(0.5)5tâ€‹. ä½¿ç”¨MATLABæ±‚è§£å¾®åˆ†æ–¹ç¨‹è§£æè§£(é€šè§£æˆ–ç‰¹è§£)ï¼š dsolve(&#x27;Du+k*(u-20)=0&#x27;,&#x27;u(0)=100&#x27;,&#x27;t&#x27;)%dsolve ä¸ºæ±‚å¸¸å¾®åˆ†æ–¹ç¨‹çš„ç¬¦å·è§£å‡½æ•° è¿ç®—ç»“æœä¸ºï¼š u =20+80*exp(-k*t) ä½¿ç”¨MATLABæ±‚è§£å¾®åˆ†æ–¹ç¨‹æ•°å€¼è§£ï¼š ç”±ç»™å®šæ¡ä»¶uâˆ£t=5=60u|_{t=5}=60uâˆ£t=5â€‹=60,å¯å¾—k=lnâ¡25k=\\frac{\\ln 2}{5}k=5ln2â€‹,å³u=20+80(0.5)t5u=20+80(0.5)^\\frac{t}{5}u=20+80(0.5)5tâ€‹. MATLABä»£ç ï¼š f=inline(&#x27;-0.2*log(2)*(u-20)&#x27;,&#x27;t&#x27;,&#x27;u&#x27;);[t,u]=ode45(f,[0,100],100);%ode45 ä¸ºé¾™æ ¼åº“å¡”æ³•æ±‚å¾®åˆ†æ–¹ç¨‹çš„æ•°å€¼è§£plot(t,u)%ç»˜åˆ¶ 0 åˆ° 100 åˆ†é’Ÿçš„æ¸©åº¦éšæ—¶é—´å˜åŒ–çš„å›¾å½¢ MATLABæ±‚è§£çš„å‡½æ•°å¾®åˆ†æ–¹ç¨‹(ç»„) é‚£äº›ä¸å¯ä»¥ç”¨ç§¯åˆ†æ–¹æ³•æ±‚è§£çš„å¾®åˆ†æ–¹ç¨‹åˆå€¼é—®é¢˜ï¼Œå¯ä»¥ç”¨ MATLAB çš„å‡½æ•°ï¼Œå¦‚äºŒä¸‰é˜¶é¾™æ ¼-åº“å¡”æ³•ode23 æˆ–å››äº”é˜¶é¾™æ ¼-åº“å¡”æ³• ode45 å‘½ä»¤æ¥æ±‚å…¶æ•°å€¼è§£ï¼ å¯¹äºå¾®åˆ†æ–¹ç¨‹(ç»„)çš„åˆå€¼é—®é¢˜ x(t)=f(t,x),x=(x1,...,xn)T,f=(f1,...,fn)Tx(t0)=x0,x0(x01,...,x0n)T\\begin{array}{lcl} x(t)=f(t,x),x=(x_1,...,x_n)^T,f=(f_1,...,f_n)^T\\\\ x(t_0)=x_0, x_0(x_{01},...,x_{0n})^T \\end{array} x(t)=f(t,x),x=(x1â€‹,...,xnâ€‹)T,f=(f1â€‹,...,fnâ€‹)Tx(t0â€‹)=x0â€‹,x0â€‹(x01â€‹,...,x0nâ€‹)Tâ€‹ å¯ç”¨ä¸‹é¢çš„ MATLAB å‘½ä»¤å®ç°è®¡ç®—ï¼š [t,x]= =ode23(odefun ï¼Œts ï¼Œx0 ï¼Œoptions)[t,x]= =ode45(odefun ï¼Œts ï¼Œx0 ï¼Œoptions) è¿™é‡Œ ode23 ç”¨çš„æ˜¯ 3 çº§ 2 é˜¶çš„é¾™æ ¼-åº“å¡”æ³•å…¬å¼ï¼Œode45 ç”¨çš„æ˜¯ 5 çº§ 4 é˜¶çš„é¾™æ ¼-åº“å¡”å…¬å¼ï¼è¾“å…¥å‚æ•° odefun æ˜¯å¾…è§£æ–¹ç¨‹å†™æˆçš„å‡½æ•° M æ–‡ä»¶æˆ–inline æ ¼å¼çš„å‡½æ•°f(t,x)f(t,x)f(t,x)ã€‚ ts=[t0ï¼Œt1ï¼Œâ€¦ï¼Œtf]ï¼Œåˆ™è¾“å‡ºä¸ºåœ¨æŒ‡å®šæ—¶åˆ» t0ï¼Œt1ï¼Œâ€¦ï¼Œtf çš„å‡½æ•°å€¼ï¼å¦‚æœè¾“å…¥ t0âˆ¶kâˆ¶tfï¼Œåˆ™è¾“å‡ºä¸ºåœ¨[t0ï¼Œtf]å†…ä»¥ k ä¸ºé—´éš”çš„ç­‰åˆ†ç‚¹å¤„çš„å‡½æ•°å€¼ã€‚ x0 ä¸ºå‡½æ•°åˆå€¼( n ç»´å‘é‡)ã€‚ options å¯ç”¨äºè®¾å®šè¯¯å·®é™ï¼ˆoptions é»˜è®¤æ—¶è®¾å®šç›¸å¯¹è¯¯å·®10âˆ’3{10}^{-3}10âˆ’3ç»å¯¹è¯¯å·®10âˆ’6{10}^{-6}10âˆ’6)ï¼Œå‘½ä»¤ä¸ºï¼š options=odeset(â€˜reltolâ€™ï¼Œrtï¼Œâ€˜abstolâ€™ï¼Œat) è¿™é‡Œ rtï¼Œat åˆ†åˆ«ä¸ºè®¾å®šçš„ç›¸å¯¹è¯¯å·®å’Œç»å¯¹è¯¯å·®ã€‚ å‘½ä»¤çš„è¾“å‡º t ä¸ºç”±è¾“å…¥æŒ‡å®šçš„ tsï¼Œx ä¸ºç›¸åº”çš„å‡½æ•°å€¼( nç»´å‘é‡)ã€‚ å…¶ä»–MATLABå‡½æ•° MATLABä¸­è¿˜æœ‰è¯¸å¦‚æ±‚è§£åå¾®åˆ†æ–¹ç¨‹çš„å‡½æ•°ï¼Œè¯»è€…å¯ä»¥è‡ªè¡ŒæŸ¥è¯¢ç›¸å…³èµ„æ–™ã€‚ æœºå™¨å­¦ä¹  ç”±äºæœºå™¨å­¦ä¹ å†…å®¹å¾ˆå¤šè¿™é‡Œæˆ‘åªå°†å¸¸ç”¨å­¦ä¹ ç®—æ³•è¿›è¡Œå½’ç±»ã€‚æœºå™¨å­¦ä¹ åˆ†ä¸ºç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ ã€‚å…¶ä¸­ç›‘ç£å­¦ä¹ åˆåˆ†ä¸ºåˆ†ç±»ã€é›†æˆå­¦ä¹ ã€é™ç»´ã€‚ åˆ†ç±»ï¼š Kæœ€è¿‘é‚» å†³ç­–æ ‘ è´å¶æ–¯åˆ†ç±»å™¨ é€»è¾‘å›å½’ æ”¯æŒå‘é‡æœº é›†æˆå­¦ä¹ ï¼š baggingï¼šéšæœºæ£®æ— boostingï¼šAdaBoostã€GBDTã€XGBoostï¼ˆå·¥ä¸šçº§ï¼‰ æ— ç›‘ç£å­¦ä¹ ï¼š K-Means DBSCANï¼ˆåŸºäºå¯†åº¦çš„èšç±»ï¼‰ æ¦‚ç‡ç»Ÿè®¡æ¨¡å‹ èšç±» {Kâˆ’Meansèšç±»ï¼ˆå¿«é€Ÿèšç±»ï¼‰åˆ†å±‚èšç±»ï¼ˆç³»ç»Ÿèšç±»ï¼‰hierarchical clusteråˆ¤åˆ«åˆ†æ {æ ¹æ®è·ç¦»åˆ¤åˆ«fisheråˆ¤åˆ«æ³•é€æ­¥åˆ¤åˆ«æ³•ï¼ˆé€‰æ‹©å˜é‡ï¼‰æ—¶é—´åºåˆ—åˆ†æ {æŒ‡æ•°å¹³æ»‘Boxâˆ’Jenkinsæ–¹æ³•\\begin{array}{lcl} èšç±»~~\\begin{cases} K-Meansèšç±»ï¼ˆå¿«é€Ÿèšç±»ï¼‰\\\\ åˆ†å±‚èšç±»ï¼ˆç³»ç»Ÿèšç±»ï¼‰hierarchical\\ cluster \\end{cases}\\\\ åˆ¤åˆ«åˆ†æ~~\\begin{cases} æ ¹æ®è·ç¦»åˆ¤åˆ«\\\\ fisheråˆ¤åˆ«æ³•\\\\ é€æ­¥åˆ¤åˆ«æ³•ï¼ˆé€‰æ‹©å˜é‡ï¼‰ \\end{cases}\\\\ æ—¶é—´åºåˆ—åˆ†æ~~\\begin{cases} æŒ‡æ•°å¹³æ»‘\\\\ Box-Jenkinsæ–¹æ³• \\end{cases} \\end{array} èšç±» {Kâˆ’Meansèšç±»ï¼ˆå¿«é€Ÿèšç±»ï¼‰åˆ†å±‚èšç±»ï¼ˆç³»ç»Ÿèšç±»ï¼‰hierarchical clusterâ€‹åˆ¤åˆ«åˆ†æ â©âªâªâ¨âªâªâ§â€‹æ ¹æ®è·ç¦»åˆ¤åˆ«fisheråˆ¤åˆ«æ³•é€æ­¥åˆ¤åˆ«æ³•ï¼ˆé€‰æ‹©å˜é‡ï¼‰â€‹æ—¶é—´åºåˆ—åˆ†æ {æŒ‡æ•°å¹³æ»‘Boxâˆ’Jenkinsæ–¹æ³•â€‹â€‹ æ³¨ï¼šèšç±»åˆ†æå¯¹ç±»åŠç±»çš„æ•°é‡æ˜¯æœªçŸ¥çš„ï¼Œè€Œåˆ¤åˆ«åˆ†ææ˜¯å·²çŸ¥çš„ã€‚ è¯„ä»·æ¨¡å‹ å¸¸ç”¨è¯„ä»·æ¨¡å‹ï¼š å±‚æ¬¡åˆ†ææ³•ï¼šå®šæ€§ä¸å®šé‡ç›¸ç»“åˆçš„å¤šå‡†åˆ™å†³ç­– ç°è‰²ç»¼åˆè¯„ä»·æ³•ï¼šç°è‰²å…³è”åº¦åˆ†æ æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•ï¼š æ ¹æ®æ¨¡ç³Šæ•°å­¦çš„éš¶å±åº¦è¯„ä»· BPç¥ç»ç½‘ç»œç»¼åˆè¯„ä»·æ³• æ•°æ®åŒ…ç»œï¼ˆDEAï¼‰ï¼š æ˜¯ä¸€ä¸ªå¯¹å¤šæŠ•å…¥/å¤šäº§å‡ºçš„å¤šå†³ç­–å•å…ƒçš„æ•ˆç‡è¯„ä»·æ–¹æ³•ï¼Œå¹¿æ³›ä½¿ç”¨äºä¸šç»©è¯„ä»· ç»¼åˆè¯„ä»·æ¨¡å‹ï¼š çº¿æ€§åŠ æƒç»¼åˆæ³• y=âˆ‘j=1mwixjy=\\sum^m_{j=1}w_ix_jy=âˆ‘j=1mâ€‹wiâ€‹xjâ€‹ éçº¿æ€§åŠ æƒç»¼åˆæ³• y=âˆj=1mxjwjy=\\prod^m_{j=1}x_j^{w_j}y=âˆj=1mâ€‹xjwjâ€‹â€‹ é€¼è¿‘ç†æƒ³ç‚¹ï¼ˆTOPSISï¼‰æ–¹æ³• åŠ¨æ€åŠ æƒ åŠ¨æ€åŠ æƒå‡½æ•°ï¼š åˆ†æ®µå˜å¹‚å‡½æ•° åå¤§å‹æ­£æ€åˆ†å¸ƒå‡½æ•° Så‹åˆ†å¸ƒå‡½æ•° æ™ºèƒ½è®¡ç®—æ–¹æ³• æ¨¡æ‹Ÿé€€ç«ç®—æ³•ï¼ˆSAï¼‰ï¼šå¯»æ‰¾å…¨å±€æœ€ä¼˜æ€æƒ³ è‡ªåŠ¨è½¬æ¢: æ»¡è¶³æ¡ä»¶è‡ªåŠ¨è½¬æ¢åˆ°å¦å¤–ä¸€ç§çŠ¶æ€ æ¦‚ç‡è½¬æ¢ï¼š å½“ä¸æ»¡è¶³æ¡ä»¶æ—¶æŒ‰ç…§ä¸€å®šçš„æ¦‚ç‡è½¬æ¢åˆ°å¦å¤–ä¸€ç§çŠ¶æ€ é—ä¼ ç®—æ³•ï¼ˆGAï¼‰ï¼š 1. é€‰æ‹© 2. äº¤å‰ 3. å˜å¼‚ ç²’å­ç¾¤ç®—æ³•ï¼ˆPSOï¼‰ï¼šä¿¡æ¯å…±äº«æ€æƒ³","categories":[{"name":"æ•°å­¦å»ºæ¨¡","slug":"æ•°å­¦å»ºæ¨¡","permalink":"http://chiang97912.github.io/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/"}],"tags":[{"name":"æ•°å­¦å»ºæ¨¡","slug":"æ•°å­¦å»ºæ¨¡","permalink":"http://chiang97912.github.io/tags/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/"}]},{"title":"ç°è‰²å…³è”åˆ†ææ¨¡å‹åŠå…¶æ”¹è¿›","slug":"ç°è‰²å…³è”åˆ†ææ¨¡å‹åŠå…¶æ”¹è¿›","date":"2018-08-28T13:48:03.000Z","updated":"2025-12-13T12:18:52.036Z","comments":true,"path":"2018/08/28/ç°è‰²å…³è”åˆ†ææ¨¡å‹åŠå…¶æ”¹è¿›/","permalink":"http://chiang97912.github.io/2018/08/28/%E7%81%B0%E8%89%B2%E5%85%B3%E8%81%94%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E5%8F%8A%E5%85%B6%E6%94%B9%E8%BF%9B/","excerpt":"ç°è‰²å…³è”åˆ†æåŸºæœ¬åŸç† å¯¹äºä¸¤ä¸ªç³»ç»Ÿä¹‹é—´çš„å› ç´ ï¼Œå…¶éšæ—¶é—´æˆ–ä¸åŒå¯¹è±¡è€Œå˜åŒ–çš„å…³è”æ€§å¤§å°çš„åº¦é‡ï¼Œç§°ä¸ºå…³è”åº¦ã€‚è€Œæ ¹æ®å› ç´ ä¹‹é—´å‘å±•è¶‹åŠ¿çš„ç›¸ä¼¼æˆ–ç›¸å¼‚ç¨‹åº¦ä½œä¸ºè¡¡é‡å› ç´ é—´å…³è”ç¨‹åº¦çš„æ–¹æ³•ç§°ä¸ºç°è‰²å…³è”åˆ†ææ–¹æ³•ã€‚å¯¹äºæœ¬é¢˜è¡¡é‡å®¢æˆ·æ¥å—çš„ç¨‹åº¦ä¸å“ªäº›å› ç´ å…³è”åº¦æ›´é«˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç°è‰²å…³è”åˆ†ææ¥è¡¡é‡è´­ä¹°ä»·æ ¼ã€ç»´æŠ¤æˆæœ¬ã€è½¦é—¨æ•°ã€äººå‘˜æºå¸¦èƒ½åŠ›ã€è¡Œæç®±å¤§å°ã€æ±½è½¦å®‰å…¨æ€§èƒ½ç­‰è°ƒæŸ¥é¡¹å’Œæ±½è½¦å¯æ¥å—æ€§ä¹‹é—´çš„å…³è”ç¨‹åº¦ã€‚","text":"ç°è‰²å…³è”åˆ†æåŸºæœ¬åŸç† å¯¹äºä¸¤ä¸ªç³»ç»Ÿä¹‹é—´çš„å› ç´ ï¼Œå…¶éšæ—¶é—´æˆ–ä¸åŒå¯¹è±¡è€Œå˜åŒ–çš„å…³è”æ€§å¤§å°çš„åº¦é‡ï¼Œç§°ä¸ºå…³è”åº¦ã€‚è€Œæ ¹æ®å› ç´ ä¹‹é—´å‘å±•è¶‹åŠ¿çš„ç›¸ä¼¼æˆ–ç›¸å¼‚ç¨‹åº¦ä½œä¸ºè¡¡é‡å› ç´ é—´å…³è”ç¨‹åº¦çš„æ–¹æ³•ç§°ä¸ºç°è‰²å…³è”åˆ†ææ–¹æ³•ã€‚å¯¹äºæœ¬é¢˜è¡¡é‡å®¢æˆ·æ¥å—çš„ç¨‹åº¦ä¸å“ªäº›å› ç´ å…³è”åº¦æ›´é«˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç°è‰²å…³è”åˆ†ææ¥è¡¡é‡è´­ä¹°ä»·æ ¼ã€ç»´æŠ¤æˆæœ¬ã€è½¦é—¨æ•°ã€äººå‘˜æºå¸¦èƒ½åŠ›ã€è¡Œæç®±å¤§å°ã€æ±½è½¦å®‰å…¨æ€§èƒ½ç­‰è°ƒæŸ¥é¡¹å’Œæ±½è½¦å¯æ¥å—æ€§ä¹‹é—´çš„å…³è”ç¨‹åº¦ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰æ•°æ®çŸ©é˜µçš„æœ€åä¸€åˆ—lä¸ºæ ‡å‡†è¦ç´ ï¼Œå…¶ä½™å„åˆ—ä¸ºéœ€è¦æ¯”è¾ƒçš„è¦ç´ ï¼Œåˆ†åˆ«ç”¨xâ€˜lå’Œxâ€™iè¡¨ç¤ºã€‚ ç¬¬ä¸€æ­¥ï¼šæ•°æ®æ ‡å‡†åŒ– Xiâ€²=Xiâˆ’minâ¡Ximaxâ¡Xiâˆ’minâ¡Xi=(xiâ€²(1),xiâ€²(2),xiâ€²(3),xiâ€²(4)...)X_i^\\prime=\\frac{X_i-\\min X_i}{\\max X_i-\\min X_i}=(x_i^\\prime(1),x_i^\\prime(2),x_i^\\prime(3),x_i^\\prime(4)...) Xiâ€²â€‹=maxXiâ€‹âˆ’minXiâ€‹Xiâ€‹âˆ’minXiâ€‹â€‹=(xiâ€²â€‹(1),xiâ€²â€‹(2),xiâ€²â€‹(3),xiâ€²â€‹(4)...) ç¬¬äºŒæ­¥ï¼šæ±‚å·®åºåˆ— Î”i(k)=âˆ£xlâ€²âˆ’xiâ€²âˆ£;i=1,2,3,4...\\Delta_i(k)=|x_l^\\prime-x_i^\\prime|;i=1,2,3,4... Î”iâ€‹(k)=âˆ£xlâ€²â€‹âˆ’xiâ€²â€‹âˆ£;i=1,2,3,4... ç¬¬ä¸‰æ­¥ï¼šæ±‚ä¸¤æå·® M=maxâ¡imaxâ¡kÎ”i(k)m=minâ¡iminâ¡kÎ”i(k)M=\\max_i \\max_k \\Delta_i(k) \\\\ m=\\min_i \\min_k \\Delta_i(k) M=imaxâ€‹kmaxâ€‹Î”iâ€‹(k)m=iminâ€‹kminâ€‹Î”iâ€‹(k) ç¬¬å››æ­¥ï¼šè®¡ç®—å…³è”ç³»æ•° Î³li=m+ÏMÎ”i(k)+ÏM,i=2,3,4...\\gamma_{li}=\\frac{m+\\rho M}{\\Delta_i(k)+\\rho M},i=2,3,4... Î³liâ€‹=Î”iâ€‹(k)+ÏMm+ÏMâ€‹,i=2,3,4... ç¬¬äº”æ­¥ï¼šæ±‚ç°è‰²å…³è”åº¦ Î³ln=1Nâˆ‘k=1NÎ³ln(k),i=1,2,3,4...\\gamma_{ln}=\\frac{1}{N}\\sum^N_{k=1}\\gamma_{ln}(k),i=1,2,3,4... Î³lnâ€‹=N1â€‹k=1âˆ‘Nâ€‹Î³lnâ€‹(k),i=1,2,3,4... ç°è‰²å…³è”åˆ†ææ”¹è¿›æ¨¡å‹ ç°è‰²å…³è”åˆ†æçš„æ ¸å¿ƒæ˜¯è®¡ç®—å…³è”åº¦ï¼Œä½†æ˜¯åŸå§‹çš„å…³è”åº¦è®¡ç®—æ–¹æ³•å¯¹å„æ ·æœ¬å¹³ç­‰çœ‹å¾…ï¼Œå³é‡‡ç”¨å¹³æƒå¤„ç†ã€‚ä½†æ˜¯ç”±äºå„ä¸ªç‰¹å¾å¯¹ç»“æœçš„å½±å“ç¨‹åº¦æ˜¯ä¸åŒçš„ï¼Œå¦‚æœé‡‡ç”¨å¹³æƒå¤„ç†ï¼Œå¿…ç„¶ä¼šä¸§å¤±æ•°æ®ä¸­éšè—çš„æ½œåœ¨ç‰¹å¾ï¼Œæ‰€ä»¥æœ¬æ–‡ä¸­æˆ‘ä»¬å¯¹å„ç‰¹å¾è¿›è¡ŒåŠ æƒå¤„ç†ã€‚æ­¤å¤„æˆ‘ä»¬é‡‡ç”¨åŸºäºè·ç¦»åˆ†ææ³•å¯¹ç°è‰²å…³è”åˆ†æç®—æ³•è¿›è¡Œæ”¹è¿›ã€‚ æ”¹è¿›åçš„å…¬å¼ä¸º: Î³ln=âˆ‘k=1NÎ±(k)Î³ln(k),i=1,2,3,4...\\gamma_{ln}=\\sum^N_{k=1}\\alpha(k)\\gamma_{ln}(k),i=1,2,3,4... Î³lnâ€‹=k=1âˆ‘Nâ€‹Î±(k)Î³lnâ€‹(k),i=1,2,3,4... å…¶ä¸­æƒé‡Î±çš„è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼š æˆ‘ä»¬ä»¥æœ€ä¼˜è¦ç´ å’Œæœ€åŠ£è¦ç´ ä¸ºå‚è€ƒè¦ç´ ã€‚è®¡ç®—å„ä¸ªè¦ç´ ä¸å‚è€ƒè¦ç´ çš„è·ç¦»ï¼Œç¦»æœ€ä¼˜è¦ç´ ç‚¹è¿‘å¹¶ä¸”ç¦»æœ€åŠ£æ ·æœ¬è¿œçš„æ ·æœ¬ä¸ºæ€»ä½“è¾ƒå¥½çš„è¦ç´ ã€‚ è®¾æ•°æ®ä¸ºm x nçŸ©é˜µ [a11â‹¯a1nâ‹®â‹±â‹®am1â‹¯amn]\\begin{bmatrix} a_{11} &amp; \\cdots &amp; a_{1n} \\\\ \\vdots &amp; \\ddots &amp; \\vdots \\\\ a_{m1} &amp; \\cdots &amp; a_{mn} \\end{bmatrix} â£â¢â¢â¡â€‹a11â€‹â‹®am1â€‹â€‹â‹¯â‹±â‹¯â€‹a1nâ€‹â‹®amnâ€‹â€‹â¦â¥â¥â¤â€‹ ç¬¬ä¸€æ­¥ï¼šç¡®å®šæœ€ä¼˜è¦ç´ å’Œæœ€åŠ£è¦ç´  A+=(a1+,a2+,...,an+)TAâˆ’=(a1âˆ’,a2âˆ’,...,anâˆ’)TA^+=(a^+_1,a^+_2,...,a^+_n)^T \\\\ A^-=(a^-_1,a^-_2,...,a^-_n)^T A+=(a1+â€‹,a2+â€‹,...,an+â€‹)TAâˆ’=(a1âˆ’â€‹,a2âˆ’â€‹,...,anâˆ’â€‹)T å…¶ä¸­ï¼Œ al+=maxâ¡(a1l,a2l,...,aml)alâˆ’=maxâ¡(a1l,a2l,...,aml),l=1,2,3,...n\\begin{array}{lcl} a^+_l=\\max(a_{1l},a_{2l},...,a_{ml})\\\\ a^-_l=\\max(a_{1l},a_{2l},...,a_{ml}), l=1,2,3,...n \\end{array} al+â€‹=max(a1lâ€‹,a2lâ€‹,...,amlâ€‹)alâˆ’â€‹=max(a1lâ€‹,a2lâ€‹,...,amlâ€‹),l=1,2,3,...nâ€‹ ç¬¬äºŒæ­¥ï¼šè®¡ç®—å„è¦ç´ ç‚¹åˆ°å‚è€ƒè¦ç´ ç‚¹çš„è·ç¦»ã€‚è¿™é‡Œé‡‡ç”¨æ¬§å¼è·ç¦»ï¼Œ Dk+=âˆ‘l=1n(aklâˆ’al+)2D^+_k=\\sqrt{\\sum^n_{l=1}{(a_{kl}-a^+_l)}^2} Dk+â€‹=l=1âˆ‘nâ€‹(aklâ€‹âˆ’al+â€‹)2â€‹ ç¬¬ä¸‰æ­¥ï¼šç»¼åˆæ­£è´Ÿå‘è·ç¦» Sk=Dkâˆ’Dk+,k=1,2,...,m.S_k=\\frac{D^-_k}{D^+_k},k=1,2,...,m. Skâ€‹=Dk+â€‹Dkâˆ’â€‹â€‹,k=1,2,...,m. é€šè¿‡ä¸Šå¼å¯¹å„è¦ç´ çš„è·ç¦»è¿›è¡Œç»¼åˆè¯„ä»·ï¼Œå³å½“è¦ç´ ä¸æœ€ä¼˜è¦ç´ ç‚¹ä¹‹é—´çš„è·ç¦»è¶Šå°ï¼Œä¸æœ€åŠ£è¦ç´ ç‚¹ä¹‹é—´çš„è·ç¦»è¶Šå¤§ï¼Œé‚£ä¹ˆè¯¥è¦ç´ å¾—åˆ°çš„åˆ†æ•°è¶Šé«˜ã€‚ ä½†æ˜¯ä¸ºäº†é˜²æ­¢Skçš„åˆ†å­å’Œåˆ†æ¯å‡ºç°é›¶ï¼Œæˆ‘ä»¬å°†Skçš„åˆ†å­å’Œåˆ†æ¯åŒæ—¶åŠ ä¸Šä¸€ä¸ªåç½®Î²ï¼ˆè¿™é‡Œçš„Î²ä¸€èˆ¬å–1ï¼‰ã€‚å¾—åˆ°ï¼Œ Sk=Dkâˆ’+Î²Dk++Î²,k=1,2,...,m.S_k=\\frac{D^-_k+\\beta}{D^+_k+\\beta},k=1,2,...,m. Skâ€‹=Dk+â€‹+Î²Dkâˆ’â€‹+Î²â€‹,k=1,2,...,m. ç¬¬å››æ­¥ï¼šæ•°æ®å½’ä¸€åŒ– Î±k=Skâˆ‘k=1mSk\\alpha_k=\\frac{S_k}{\\sum^m_{k=1}S_k} Î±kâ€‹=âˆ‘k=1mâ€‹Skâ€‹Skâ€‹â€‹ åˆ™ Î±=(Î±1,Î±2,...,Î±m)T\\alpha=(\\alpha_1,\\alpha_2,...,\\alpha_m)^T Î±=(Î±1â€‹,Î±2â€‹,...,Î±mâ€‹)T å³ä¸ºæ‰€æœ‰æƒé‡å‘é‡ã€‚","categories":[{"name":"æ•°å­¦å»ºæ¨¡","slug":"æ•°å­¦å»ºæ¨¡","permalink":"http://chiang97912.github.io/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/"}],"tags":[{"name":"æ•°å­¦å»ºæ¨¡","slug":"æ•°å­¦å»ºæ¨¡","permalink":"http://chiang97912.github.io/tags/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/"},{"name":"ç°è‰²å…³è”åˆ†æ","slug":"ç°è‰²å…³è”åˆ†æ","permalink":"http://chiang97912.github.io/tags/%E7%81%B0%E8%89%B2%E5%85%B3%E8%81%94%E5%88%86%E6%9E%90/"}]},{"title":"Tensorflowä¸­çŸ©é˜µä¹˜æ³•matmulå’Œmultiplyè¯¦è§£","slug":"tensorflowä¸­çŸ©é˜µä¹˜æ³•matmulå’Œmultiplyè¯¦è§£","date":"2018-04-09T12:01:13.000Z","updated":"2025-12-13T14:03:22.130Z","comments":true,"path":"2018/04/09/tensorflowä¸­çŸ©é˜µä¹˜æ³•matmulå’Œmultiplyè¯¦è§£/","permalink":"http://chiang97912.github.io/2018/04/09/tensorflow%E4%B8%AD%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95matmul%E5%92%8Cmultiply%E8%AF%A6%E8%A7%A3/","excerpt":"åœ¨æœºå™¨å­¦ä¹ æˆ–è€…ç¥ç»ç½‘ç»œç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬çš„è¿ç®—å¯¹è±¡é€šå¸¸æ˜¯çŸ©é˜µï¼Œè€Œå¸¸ç”¨çš„çŸ©é˜µæ“ä½œå°±æ˜¯ç‚¹ä¹˜(dot product)å’Œå…ƒç´ ç›¸ä¹˜(elementwise multiplication)ã€‚å­¦è¿‡çº¿æ€§ä»£æ•°çš„è¯»è€…è‚¯å®šå¯¹ç‚¹ä¹˜ä¸ä¼šé™Œç”Ÿï¼Œä½†æ˜¯å…ƒç´ ç›¸ä¹˜å°±ä¸ä¸€å®šçŸ¥é“äº†ã€‚å…¶å®elementwise multiplicationå°±æ˜¯å°†ä¸¤ä¸ªshapeä¸€æ ·çš„çŸ©é˜µæŒ‰ç…§å¯¹åº”å…ƒç´ ç›¸ä¹˜ã€‚","text":"åœ¨æœºå™¨å­¦ä¹ æˆ–è€…ç¥ç»ç½‘ç»œç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬çš„è¿ç®—å¯¹è±¡é€šå¸¸æ˜¯çŸ©é˜µï¼Œè€Œå¸¸ç”¨çš„çŸ©é˜µæ“ä½œå°±æ˜¯ç‚¹ä¹˜(dot product)å’Œå…ƒç´ ç›¸ä¹˜(elementwise multiplication)ã€‚å­¦è¿‡çº¿æ€§ä»£æ•°çš„è¯»è€…è‚¯å®šå¯¹ç‚¹ä¹˜ä¸ä¼šé™Œç”Ÿï¼Œä½†æ˜¯å…ƒç´ ç›¸ä¹˜å°±ä¸ä¸€å®šçŸ¥é“äº†ã€‚å…¶å®elementwise multiplicationå°±æ˜¯å°†ä¸¤ä¸ªshapeä¸€æ ·çš„çŸ©é˜µæŒ‰ç…§å¯¹åº”å…ƒç´ ç›¸ä¹˜ã€‚ ç‚¹ä¹˜matmul åœ¨tensorflowä¸­çš„ç‚¹ä¹˜ä½¿ç”¨matmulæ–¹æ³•ï¼Œå…¶ä¸­matmulåˆ†ä¸¤ç§æƒ…å†µã€‚ é¦–å…ˆæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥äº†è§£matmulæ–¹æ³•çš„ä½¿ç”¨ ï¼š ä»£ç ç¤ºä¾‹: import numpy as npimport tensorflow as tf&quot;&quot;&quot; 2-D &quot;&quot;&quot;print(&quot;2-D:&quot;)sess = tf.Session()a = tf.constant([1, 2, 3, 4, 5, 6], shape=[2, 3]) # 2-D tensor `a`print(&quot;a = &quot;, sess.run(a))b = tf.constant([7, 8, 9, 10, 11, 12], shape=[3, 2]) # 2-D tensor `b`print(&quot;b = &quot;, sess.run(a))c = tf.matmul(a, b)print(&quot;c = &quot;, sess.run(c))&quot;&quot;&quot; 3-D &quot;&quot;&quot;print(&quot;3-D:&quot;)a = tf.constant(np.arange(1, 13, dtype=np.int32), shape=[2, 2, 3]) # 3-D tensor `a`print(&quot;a = &quot;, sess.run(a))b = tf.constant(np.arange(13, 25, dtype=np.int32), shape=[2, 3, 2]) # 3-D tensor `b`print(&quot;b = &quot;, sess.run(a))c = tf.matmul(a, b)print(&quot;c = &quot;, sess.run(c))sess.close() è¿è¡Œç»“æœï¼š 2-D:a = [[1 2 3] [4 5 6]]b = [[1 2 3] [4 5 6]]c = [[ 58 64] [139 154]]3-D:a = [[[ 1 2 3] [ 4 5 6]] [[ 7 8 9] [10 11 12]]]b = [[[ 1 2 3] [ 4 5 6]] [[ 7 8 9] [10 11 12]]]c = [[[ 94 100] [229 244]] [[508 532] [697 730]]] å¦‚æœåšç‚¹ä¹˜çš„ä¸¤ä¸ªçŸ©é˜µçš„shapeç»´åº¦ä¸º2ç»´ï¼Œé‚£ä¹ˆå°±æŒ‰ç…§ä¸€èˆ¬çŸ©é˜µç‚¹ä¹˜æ¥è®¡ç®—ã€‚ å¦‚æœç‚¹ä¹˜çš„ä¸¤ä¸ªçŸ©é˜µçš„shapeç»´åº¦ä¸º3ç»´ï¼Œé‚£ä¹ˆæˆ‘ä»¬é€šå¸¸å°†ç¬¬ä¸€ç»´å®šä¹‰ä¸ºbatch_sizeï¼Œé‚£ä¹ˆmatmulæ–¹æ³•å°±ä¼šé€ä¸ªæ•°æ®çš„å°†å¯¹åº”çš„ç»´åº¦æŒ‰ç…§ç¬¬ä¸€ç§æƒ…å†µå¯¹ä¸¤ä¸ªçŸ©é˜µåšç‚¹ä¹˜ã€‚ å…ƒç´ ç›¸ä¹˜multiply ä¸¤ä¸ªçŸ©é˜µä¸­å¯¹åº”å…ƒç´ å„è‡ªç›¸ä¹˜ ä¾‹å¦‚æœ‰çŸ©é˜µ M1 = [ a b c e f g h i j ] å’Œ M2 = [ k l m n o p q r s ] é‚£ä¹ˆmultiply(M1,M2)çš„ç»“æœä¸ºï¼š [ a*k b*l c*m e*n f*o g*p h*q i*r j*s ] ä»£ç ç¤ºä¾‹ï¼š import tensorflow as tfa = tf.constant([[1., 2., 3.], [4., 5., 6.], [7., 8., 9.]])b = tf.constant([[10., 11., 12.], [13., 14., 15.], [16., 17., 18.]])c = tf.multiply(a, b)sess = tf.Session()print(sess.run(c))sess.close() è¿è¡Œç»“æœï¼š [[ 10. 22. 36.] [ 52. 70. 90.] [112. 136. 162.]]","categories":[{"name":"tensorflow","slug":"tensorflow","permalink":"http://chiang97912.github.io/categories/tensorflow/"}],"tags":[{"name":"tensorflow","slug":"tensorflow","permalink":"http://chiang97912.github.io/tags/tensorflow/"}]},{"title":"Pythonçˆ¬è™«å…¥é—¨å®è·µ","slug":"Pythonçˆ¬è™«å…¥é—¨å®è·µ","date":"2018-01-23T15:55:18.000Z","updated":"2025-12-13T12:15:23.488Z","comments":true,"path":"2018/01/23/Pythonçˆ¬è™«å…¥é—¨å®è·µ/","permalink":"http://chiang97912.github.io/2018/01/23/Python%E7%88%AC%E8%99%AB%E5%85%A5%E9%97%A8%E5%AE%9E%E8%B7%B5/","excerpt":"å†™è¿™ç¯‡åšå®¢ï¼Œä¸€æ¥æ˜¯æ•´ç†æˆ‘æœ€è¿‘ä¸€ä¸¤ä¸ªæœˆçš„æ•°æ®æŠ“å–ç»éªŒï¼ŒäºŒæ¥æ˜¯å¸®åŠ©æ–°æ‰‹å¿«é€Ÿå…¥é—¨çˆ¬è™«ã€‚å¬åˆ°çˆ¬è™«è¿™ä¸ªè¯å¾ˆå¤šäººå¯èƒ½ä¼šè”æƒ³åˆ°è°·æ­Œï¼Œç™¾åº¦ï¼Œå¿…åº”ç­‰æœç´¢å¼•æ“ï¼Œå®ƒä»¬æ‹¥æœ‰å¼ºå¤§çš„æ•°æ®æ£€ç´¢èƒ½åŠ›ï¼Œä¸ºæˆ‘ä»¬æŸ¥æ‰¾èµ„æ–™æä¾›äº†æå¤§çš„å¸®åŠ©ã€‚è¿™äº›æœç´¢å¼•æ“ä¹‹æ‰€ä»¥å¼ºå¤§å°±æ˜¯å› ä¸ºå®ƒä»¬æœ‰ä¸€ä¸ªå¼ºå¤§çš„æ•°æ®æŠ“å–ç³»ç»Ÿã€‚ä¸‹é¢æˆ‘ä»¬ä»0åˆ°1é€å±‚å±•å¼€è®²è§£ã€‚","text":"å†™è¿™ç¯‡åšå®¢ï¼Œä¸€æ¥æ˜¯æ•´ç†æˆ‘æœ€è¿‘ä¸€ä¸¤ä¸ªæœˆçš„æ•°æ®æŠ“å–ç»éªŒï¼ŒäºŒæ¥æ˜¯å¸®åŠ©æ–°æ‰‹å¿«é€Ÿå…¥é—¨çˆ¬è™«ã€‚å¬åˆ°çˆ¬è™«è¿™ä¸ªè¯å¾ˆå¤šäººå¯èƒ½ä¼šè”æƒ³åˆ°è°·æ­Œï¼Œç™¾åº¦ï¼Œå¿…åº”ç­‰æœç´¢å¼•æ“ï¼Œå®ƒä»¬æ‹¥æœ‰å¼ºå¤§çš„æ•°æ®æ£€ç´¢èƒ½åŠ›ï¼Œä¸ºæˆ‘ä»¬æŸ¥æ‰¾èµ„æ–™æä¾›äº†æå¤§çš„å¸®åŠ©ã€‚è¿™äº›æœç´¢å¼•æ“ä¹‹æ‰€ä»¥å¼ºå¤§å°±æ˜¯å› ä¸ºå®ƒä»¬æœ‰ä¸€ä¸ªå¼ºå¤§çš„æ•°æ®æŠ“å–ç³»ç»Ÿã€‚ä¸‹é¢æˆ‘ä»¬ä»0åˆ°1é€å±‚å±•å¼€è®²è§£ã€‚ åŸºç¡€ å…¶å®çˆ¬è™«å¾ˆç®€å•ï¼Œå½’ç»“èµ·æ¥å°±æ˜¯ä¸‹é¢ä¸¤ä¸ªæ­¥éª¤ï¼š è·å–ç½‘é¡µæºä»£ç  è§£ææºä»£ç è·å–éœ€è¦çš„ä¿¡æ¯ è·å–ç½‘é¡µæºä»£ç  åœ¨Python3ä¸­ï¼Œè·å–ç½‘é¡µæºä»£ç é€šå¸¸æœ‰ä¸¤ç§æ–¹å¼ï¼šç¬¬ä¸€ç§æ˜¯é€šè¿‡Python3è‡ªå¸¦çš„urllibåº“ä¸­çš„request.urlopenå‡½æ•°æ¥è¯·æ±‚ç½‘é¡µæºä»£ç ï¼›ç¬¬äºŒç§æ–¹å¼ä¹Ÿæ˜¯æœ€å¸¸ä½¿ç”¨çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨requestsåº“æ¥å®ç°ç½‘é¡µçš„æŠ“å–ã€‚ urllib é¦–å…ˆæˆ‘å…ˆæ¥ç®€å•çš„ä»‹ç»ä¸€ä¸‹urllibåº“è¯·æ±‚ç½‘é¡µçš„æ–¹æ³•ï¼š from urllib.request import urlopen response = urlopen('https://pixabay.com/en/') #æŠ“å–å…¨çƒè‘—åå…è´¹çŸ¢é‡å›¾ç½‘ç«™pixabay html = response.read() requests ä¸‹é¢å¼€å§‹ä»‹ç»æœ¬æ•™ç¨‹è·å–ç½‘é¡µæºä»£ç ä¸»è¦ä½¿ç”¨çš„å·¥å…·ï¼šrequests requestsçš„ä½¿ç”¨å¾ˆç®€å•å’Œurllibç±»ä¼¼ï¼š import requests response = requests.get('https://pixabay.com/en/') #æ³¨æ„ä¸€å®šè¦åŠ ä¸Šurlå‰é¢çš„å®‰å…¨åè®®httpsæˆ–è€…httpä¸ç„¶ç³»ç»Ÿä¼šæŠ¥é”™ã€‚ response.encoding = 'utf-8' #è®¾ç½®ç½‘é¡µçš„æºä»£ç ç¼–ç æ ¼å¼ä¸ºutf-8ï¼Œä½ å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µè®¾ç½®è¯¸å¦‚gbkï¼ˆå›½æ ‡ï¼‰ç­‰ç¼–ç æ ¼å¼ã€‚ html = response.text #è·å–æºä»£ç  è§£æHTML å…³äºHTMLæˆ‘ç®€è¦çš„è¯´æ˜ä¸€ä¸‹ï¼šå¯¹äºæ•´ä¸ªç½‘é¡µæ¥è¯´ï¼Œå®ƒæ˜¯ä½¿ç”¨htmlæ ‡è®°è¯­è¨€ç¼–å†™çš„ï¼Œæ‰€ä»¥ç½‘é¡µä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­htmlæ ‡ç­¾ç”¨äºåŒ…è£¹æ•´ä¸ªç½‘é¡µï¼Œheadæ ‡ç­¾ç”¨äºä¸€äº›ä¸éœ€è¦å¯è§†åŒ–çš„ä»£ç ç¼–å†™å…¶ä¸­åŒ…æ‹¬ç½‘é¡µçš„æ ‡é¢˜ï¼Œå¼•ç”¨çš„cssæ–‡ä»¶å’Œjsæ–‡ä»¶ç­‰ã€‚è€Œç½‘ç«™çš„ä¸»ä½“è¢«bodyæ ‡ç­¾åŒ…è£¹ã€‚bodyæ ‡ç­¾ä¸­æœ‰å›¾å±‚æ ‡ç­¾divï¼ˆä¸»è¦çš„æ ‡ç­¾ï¼‰ã€imgæ ‡ç­¾ï¼ˆå›¾ç‰‡æ ‡ç­¾ï¼‰ç­‰ã€‚è€Œæ¯ä¸ªæ ‡ç­¾éƒ½æœ‰ä¸€äº›å±æ€§æ¯”å¦‚class(ç±»)ã€id(ç¼–å·)ç­‰ã€‚å…¶ä¸­idåœ¨æ•´ä¸ªç½‘é¡µä¸­æ˜¯å”¯ä¸€æŒ‡å®šçš„ï¼Œè€Œclasså±æ€§å¹¶ä¸å”¯ä¸€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ ‡ç­¾çš„å±‚æ¬¡å…³ç³»ä»¥åŠè¿™äº›æ ‡ç­¾çš„å±æ€§æ¥å®šä½æˆ‘ä»¬éœ€è¦æŠ“å–çš„æ•°æ®ã€‚å­¦ä¹ ç½‘ç»œçˆ¬è™«éœ€è¦æŒæ¡ä¸€å®šçš„ç½‘é¡µçŸ¥è¯†ï¼Œå¦‚æœè¯»è€…æ¬ ç¼ºè¿™æ–¹é¢çš„çŸ¥è¯†å¯ä»¥å‰å¾€èœé¸Ÿæ•™ç¨‹å­¦ä¹ æœ‰å…³htmlä»¥åŠcssæœ‰å…³çš„çŸ¥è¯†ã€‚ è§£æHTMLæˆ–è€…XMLçš„å·¥å…·æˆ–æ¡†æ¶æœ‰å¾ˆå¤šï¼Œæœ€å¸¸ç”¨çš„æœ‰: BeautifulSoupï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ç¼–å†™çš„htmlè§£æåº“ lxmlï¼šé€šè¿‡xmlçš„èŠ‚ç‚¹æŸ¥æ‰¾ä¿¡æ¯çš„ç½‘é¡µè§£æåº“ï¼ˆé€Ÿåº¦å¾ˆå¿«ï¼‰ scrapyï¼šé›†æˆçˆ¬è™«æ¡†æ¶ pyqueryï¼šPythonä¸­å¯¹jqueryçš„å®ç°ï¼Œå¯¹äºç†Ÿæ‚‰å‰ç«¯çš„äººæ¥è¯´éå¸¸å®¹æ˜“ä¸Šæ‰‹ã€‚ BeautifulSoup BeautifulSoupæœ‰å¤šç§ä½¿ç”¨æ–¹æ³•ï¼Œå¯¹äºæŸ¥æ‰¾å…ƒç´ å¯ä»¥ä½¿ç”¨find_allæ–¹æ³•ï¼Œä½†æ˜¯ç¬”è€…ä¹ æƒ¯ä½¿ç”¨selectæ–¹æ³•ï¼ˆcssé€‰æ‹©å™¨è¯­æ³•ï¼‰æœç´¢æ–‡æ¡£ã€‚å…³äºcssé€‰æ‹©å™¨å¦‚æœè¯»è€…å¯¹å‰ç«¯è¶³å¤Ÿç†Ÿæ‚‰çš„è¯åº”è¯¥èƒ½å¤Ÿè½»æ¾ä¸Šæ‰‹ã€‚ç»å¸¸ä½¿ç”¨åˆ°çš„æ ‡ç­¾åŒ…æ‹¬divã€spanã€ulã€liã€imgã€aç­‰ã€‚æˆ‘ä»¬ä½¿ç”¨ç‚¹ï¼ˆ.ï¼‰è¡¨ç¤ºæ ‡ç­¾çš„classå±æ€§ï¼Œä½¿ç”¨äº•ï¼ˆ#ï¼‰è¡¨ç¤ºæ ‡ç­¾çš„idå±æ€§ã€‚åœ¨ä½¿ç”¨selectæ–¹æ³•çš„æ—¶å€™å¯ä»¥é€šè¿‡ä»–ä»¬å®šä½æ ‡ç­¾æ•°æ®çš„ä½ç½®ã€‚å…³äºBeautifulSoupçš„å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼Œè¯»è€…å¯ä»¥å‰å¾€å®˜æ–¹æ–‡æ¡£å­¦ä¹ ã€‚ è¿™é‡Œæˆ‘ä»¬ä»¥æŠ“å–pixabayç½‘ç«™é¦–é¡µå›¾ç‰‡çš„urlä¸ºä¾‹ï¼š å¯¹äºçˆ¬è™«æˆ‘å»ºè®®å¤§å®¶ä½¿ç”¨chromeæµè§ˆå™¨çš„æ§åˆ¶å°å¯¹é¡µé¢è¿›è¡Œåˆ†æï¼ˆF12è°ƒå‡ºæ§åˆ¶å°ï¼‰ã€‚ æ‰“å¼€æ§åˆ¶å°åï¼Œé€‰ä¸­Elementsé€‰é¡¹å¡æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ç½‘é¡µæºä»£ç ï¼Œé€šè¿‡å¯¹ç½‘é¡µçš„åˆ†ææˆ‘ä»¬ä¼šå‘ç°å›¾ç‰‡çš„urlä¸ºimgæ ‡ç­¾çš„srcå±æ€§ï¼Œè€Œimgæ ‡ç­¾çš„çˆ¶æ ‡ç­¾ä¸ºa,aæ ‡ç­¾çš„çˆ¶æ ‡ç­¾ä¸ºdivæ ‡ç­¾ï¼Œdivçš„çˆ¶æ ‡ç­¾ä¸ºå¸¦æœ‰classå±æ€§ä¸ºflex_gridå’Œcreditsçš„divæ ‡ç­¾ï¼Œè€Œè¯¥æ ‡ç­¾çš„çˆ¶æ ‡ç­¾æ˜¯idå±æ€§ä¸ºgalleryçš„æ ‡ç­¾ã€‚ç”±äºidå±æ€§æ˜¯å”¯ä¸€çš„æˆ‘ä»¬å¯ä»¥ä»¥è¯¥æ ‡ç­¾ä¸ºæºç‚¹ï¼ŒæŸ¥æ‰¾ç›®æ ‡æ ‡ç­¾ã€‚ import requests from bs4 import BeautifulSoup response = requests.get('https://pixabay.com/en/') #è¯·æ±‚pixabayç½‘ç«™ response.encoding = 'utf-8' #è®¾ç½®utf-8ç¼–ç  html = response.text #ç½‘é¡µæºä»£ç  soup = BeautifulSoup(html, 'lxml') #ä½¿ç”¨BeautifulSoupè§£æç½‘é¡µ imgs = soup.select('#gallery &gt; div.flex_grid.credits &gt; div &gt; a &gt; img') #ä½¿ç”¨cssé€‰æ‹©å™¨å®šä½é“¾æ¥ï¼Œè¿”å›ç»“æœä¸ºåŒ…å«æ‰€æœ‰å›¾ç‰‡æ ‡ç­¾çš„åˆ—è¡¨ for img in imgs: print(img['src']) #æ‰“å°å›¾ç‰‡æ ‡ç­¾çš„srcå±æ€§ è¿è¡Œç»“æœï¼š https://cdn.pixabay.com/photo/2018/06/23/16/22/romanesco-3493007__340.jpg https://cdn.pixabay.com/photo/2018/07/08/14/16/cat-3523992__340.jpg https://cdn.pixabay.com/photo/2018/05/30/15/31/rustic-3441673__340.jpg https://cdn.pixabay.com/photo/2016/06/29/09/28/golf-1486354__340.jpg https://cdn.pixabay.com/photo/2017/11/10/08/10/son-2935723__340.jpg https://cdn.pixabay.com/photo/2018/07/06/13/30/statue-3520416__340.jpg https://cdn.pixabay.com/photo/2018/07/08/15/32/dahlia-3524115__340.jpg https://cdn.pixabay.com/photo/2018/05/07/22/08/sydney-opera-house-3381786__340.jpg https://cdn.pixabay.com/photo/2018/07/05/23/31/ivy-3519431__340.jpg https://cdn.pixabay.com/photo/2017/06/05/14/55/glass-2374311__340.jpg https://cdn.pixabay.com/photo/2018/04/12/11/44/apple-3313225__340.jpg https://cdn.pixabay.com/photo/2017/09/22/09/48/desert-2774945__340.jpg https://cdn.pixabay.com/photo/2017/07/12/22/51/couple-2498660__340.jpg https://cdn.pixabay.com/photo/2016/06/20/03/15/pier-1467984__340.jpg https://cdn.pixabay.com/photo/2018/01/29/10/40/shower-of-sparks-3115784__340.jpg https://cdn.pixabay.com/photo/2017/09/06/20/35/massage-2722936__340.jpg https://cdn.pixabay.com/photo/2018/07/01/20/01/mercedes-3510327__340.jpg https://cdn.pixabay.com/photo/2018/06/28/15/23/soft-fruits-3504149__340.jpg https://cdn.pixabay.com/photo/2018/06/28/17/02/water-lily-3504363__340.jpg https://cdn.pixabay.com/photo/2018/06/29/01/47/piano-3505109__340.jpg lxml æ€»çš„æ¥è¯´ä½¿ç”¨BeautifulSoupå·²ç»èƒ½å¤Ÿè§£å†³å¤§éƒ¨åˆ†çˆ¬è™«é—®é¢˜äº†ï¼Œä½†æ˜¯ç”±äºBeautifulSoupçš„å¦è¾Ÿè¹Šå¾„ï¼Œç‹¬åˆ›äº†ä¸€å¥—æ­£åˆ™è¡¨è¾¾å¼çš„æŸ¥è¯¢æ–¹æ³•å¯¼è‡´äº†çˆ¬è™«çš„çˆ¬å–é€Ÿåº¦éå¸¸çš„æ…¢ï¼Œè€Œä¸”BeautifulSoupå¯¹äºåˆ—è¡¨é¡¹çš„çˆ¬å–æ˜¯éå¸¸çš„ç³Ÿç³•çš„ã€‚ä½†æ˜¯lxmlå°±ä¸å­˜åœ¨ç€ä¸¤ä¸ªé—®é¢˜ï¼Œlxmlç”±äºåº•å±‚é‡‡ç”¨cè¯­è¨€ä»£ç ç¼–å†™ï¼Œæ‰€ä»¥é€Ÿåº¦ä¸Šæ˜¯éå¸¸å¿«çš„ã€‚è€Œä¸”ç”±äºlxmlé‡‡ç”¨xpathè¯­æ³•è§£æHTMLï¼Œå¯¹åˆ—è¡¨é¡¹çš„çˆ¬å–æ˜¯éå¸¸è½»æ¾çš„ã€‚ å…³äºlxmlæ¡†æ¶å’Œxpathè¯­æ³•ï¼Œè¯»è€…å¯ä»¥å‚çœ‹å´”åº†æ‰çš„åšå®¢ã€‚ ä¸‹é¢ä½¿ç”¨lxmlçˆ¬å–pixabayç½‘ç«™å›¾ç‰‡url: import requests from lxml import etree # è·å–ç½‘é¡µçš„æºä»£ç  response = requests.get('https://pixabay.com/en/') response.encoding = 'utf-8' html = response.text # è§£æç½‘é¡µ parser = etree.HTML(html) for i in range(1,21): #æ‰“å°å‰20å¼ å›¾ç‰‡url link = parser.xpath('//*[@id=&quot;gallery&quot;]/div[1]/div['+ str(i) +']/a/img/@src')[0] print(link) è¿è¡Œç»“æœï¼š https://cdn.pixabay.com/photo/2018/06/23/16/22/romanesco-3493007__340.jpg https://cdn.pixabay.com/photo/2018/07/08/14/16/cat-3523992__340.jpg https://cdn.pixabay.com/photo/2018/05/30/15/31/rustic-3441673__340.jpg https://cdn.pixabay.com/photo/2016/06/29/09/28/golf-1486354__340.jpg https://cdn.pixabay.com/photo/2017/11/10/08/10/son-2935723__340.jpg https://cdn.pixabay.com/photo/2018/07/06/13/30/statue-3520416__340.jpg https://cdn.pixabay.com/photo/2018/07/08/15/32/dahlia-3524115__340.jpg https://cdn.pixabay.com/photo/2018/05/07/22/08/sydney-opera-house-3381786__340.jpg https://cdn.pixabay.com/photo/2018/07/05/23/31/ivy-3519431__340.jpg https://cdn.pixabay.com/photo/2017/06/05/14/55/glass-2374311__340.jpg https://cdn.pixabay.com/photo/2018/04/12/11/44/apple-3313225__340.jpg https://cdn.pixabay.com/photo/2017/09/22/09/48/desert-2774945__340.jpg https://cdn.pixabay.com/photo/2017/07/12/22/51/couple-2498660__340.jpg https://cdn.pixabay.com/photo/2016/06/20/03/15/pier-1467984__340.jpg https://cdn.pixabay.com/photo/2018/01/29/10/40/shower-of-sparks-3115784__340.jpg https://cdn.pixabay.com/photo/2017/09/06/20/35/massage-2722936__340.jpg https://cdn.pixabay.com/photo/2018/07/01/20/01/mercedes-3510327__340.jpg https://cdn.pixabay.com/photo/2018/06/28/15/23/soft-fruits-3504149__340.jpg https://cdn.pixabay.com/photo/2018/06/28/17/02/water-lily-3504363__340.jpg https://cdn.pixabay.com/photo/2018/06/29/01/47/piano-3505109__340.jpg è¿›é˜¶ åŠ¨æ€æ•°æ®çˆ¬å– å ä½ ç™¾åº¦åœ°å›¾æ•°æ®çˆ¬å– å ä½ å¾®åšæ•°æ®çˆ¬å–å®æˆ˜ å ä½ çƒæ¢ç½‘æ•°æ®çˆ¬å– å ä½ æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚","categories":[{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://chiang97912.github.io/categories/%E7%88%AC%E8%99%AB/"}],"tags":[{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://chiang97912.github.io/tags/%E7%88%AC%E8%99%AB/"}]},{"title":"è‡ªç„¶è¯­è¨€å¤„ç†å…¥é—¨å®è·µ","slug":"è‡ªç„¶è¯­è¨€å¤„ç†å…¥é—¨å®è·µ","date":"2017-11-16T09:20:51.000Z","updated":"2025-12-13T12:16:52.857Z","comments":true,"path":"2017/11/16/è‡ªç„¶è¯­è¨€å¤„ç†å…¥é—¨å®è·µ/","permalink":"http://chiang97912.github.io/2017/11/16/%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E5%85%A5%E9%97%A8%E5%AE%9E%E8%B7%B5/","excerpt":"è‡ªç„¶è¯­è¨€å¤„ç†å…¥é—¨å®è·µ äººå·¥æ™ºèƒ½é¢†åŸŸä¸­æœ‰ä¸¤ä¸ªä¸»æµæ–¹å‘å³æœºå™¨è§†è§‰ï¼ˆCVï¼‰å’Œè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ã€‚å…¶ä¸­è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆè‹±è¯­ï¼šNatural Language Processingï¼Œç¼©å†™ä½œ NLPï¼‰æ˜¯äººå·¥æ™ºèƒ½å’Œè¯­è¨€å­¦é¢†åŸŸçš„åˆ†æ”¯å­¦ç§‘ã€‚è‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸä¸»è¦æ¢è®¨å¦‚ä½•å¤„ç†åŠè¿ç”¨è‡ªç„¶è¯­è¨€ã€‚è‡ªç„¶è¯­è¨€å¤„ç†åŒ…æ‹¬å¤šæ–¹é¢å’Œæ­¥éª¤ï¼ŒåŸºæœ¬æœ‰è®¤çŸ¥ã€ç†è§£ã€ç”Ÿæˆç­‰éƒ¨åˆ†ã€‚ä¸‹é¢ä»‹ç»ä¸€äº›NLPçš„åŸºç¡€çŸ¥è¯†ã€‚","text":"è‡ªç„¶è¯­è¨€å¤„ç†å…¥é—¨å®è·µ äººå·¥æ™ºèƒ½é¢†åŸŸä¸­æœ‰ä¸¤ä¸ªä¸»æµæ–¹å‘å³æœºå™¨è§†è§‰ï¼ˆCVï¼‰å’Œè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ã€‚å…¶ä¸­è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆè‹±è¯­ï¼šNatural Language Processingï¼Œç¼©å†™ä½œ NLPï¼‰æ˜¯äººå·¥æ™ºèƒ½å’Œè¯­è¨€å­¦é¢†åŸŸçš„åˆ†æ”¯å­¦ç§‘ã€‚è‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸä¸»è¦æ¢è®¨å¦‚ä½•å¤„ç†åŠè¿ç”¨è‡ªç„¶è¯­è¨€ã€‚è‡ªç„¶è¯­è¨€å¤„ç†åŒ…æ‹¬å¤šæ–¹é¢å’Œæ­¥éª¤ï¼ŒåŸºæœ¬æœ‰è®¤çŸ¥ã€ç†è§£ã€ç”Ÿæˆç­‰éƒ¨åˆ†ã€‚ä¸‹é¢ä»‹ç»ä¸€äº›NLPçš„åŸºç¡€çŸ¥è¯†ã€‚ åˆ†è¯ æåˆ°è‡ªç„¶è¯­è¨€å¤„ç†å½“ç„¶ä¸å¾—ä¸æå¤§åé¼é¼çš„è‡ªç„¶è¯­è¨€å¤„ç†å·¥å…·åŒ…NLTKäº†ã€‚NLTKåœ¨å›½å¤–å¾ˆæµè¡Œï¼Œå®ƒæä¾›åŒ…æ‹¬è‹±æ–‡åˆ†è¯ã€è¯æ€§æ ‡æ³¨ã€å‘½åå®ä½“çš„è¯†åˆ«ç­‰ç­‰è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„åŸºæœ¬æ“ä½œã€‚å¦‚æœå„ä½æƒ³ä½“éªŒNLTKä½ å¯ä»¥é€šè¿‡pip install nltkæ¥å®‰è£…nltkã€‚ â€‹ ä½†æ˜¯nltkåªæ”¯æŒè‹±æ–‡åˆ†è¯ï¼Œå¦‚æœæƒ³å¯¹ä¸­æ–‡è¿›è¡Œåˆ‡è¯è¿˜å¾—å¦è°‹ä»–æ³•ã€‚è‹±æ–‡åˆ†è¯å¾ˆæ–¹ä¾¿ï¼Œç›´æ¥æŒ‰ç…§ç©ºæ ¼åˆ†å‰²å­—ç¬¦ä¸²å°±å¯ä»¥åˆ‡å‡ºtokenå­—ä¸²ï¼Œä½†æ˜¯æ±‰è¯­æ˜¯æ²¡æœ‰ä½¿ç”¨ç©ºæ ¼æ¥åˆ†å‰²è¯è¯­ã€‚æ‰€ä»¥æˆ‘ç»™å¤§å®¶æä¾›äº†ä¸€ä¸‹å‡ ç§æ±‰è¯­åˆ†è¯è§£å†³æ–¹æ¡ˆã€‚ ä½¿ç”¨æ–¯å¦ç¦å¤§å­¦åˆ†è¯å™¨+nltkåŒ…ï¼Œå®Œç¾è§£å†³nltkå¯¹æ±‰è¯­çš„å…¼å®¹ã€‚ ä½¿ç”¨jiebaåˆ†è¯ã€‚ ä½¿ç”¨å“ˆå·¥å¤§è¯­è¨€æŠ€æœ¯å¹³å°çš„pythonå°è£…åŒ…pyltp æœ¬äººç»å¸¸ç”¨çš„æ˜¯jiebaåˆ†è¯å·¥å…·å’Œå“ˆå·¥å¤§çš„åˆ†è¯å™¨pyltpã€‚é¦–å…ˆjiebaåˆ†è¯å·¥å…·åˆ†è¯çš„é€Ÿåº¦éå¸¸å¿«ï¼Œè¿™ä¸€ç‚¹å¯è°“æ˜¯å®Œèƒœpyltpï¼Œè€Œä¸”jiebaåˆ†è¯çš„å‡†ç¡®ç‡ä¹Ÿå’Œpyltpéå¸¸æ¥è¿‘ã€‚ä½†æ˜¯jiebaåˆ†è¯å·¥å…·ç»ˆç©¶åªæ˜¯ä¸€ä¸ªåˆ†è¯å·¥å…·ã€‚å®ƒä¸æ”¯æŒä¸€äº›é«˜çº§çš„åŠŸèƒ½æ¯”å¦‚å‘½åå®ä½“è¯†åˆ«ï¼Œè¯­ä¹‰è§’è‰²æ ‡æ³¨ç­‰ã€‚æ‰€ä»¥å¦‚æœåªéœ€è¦åˆ†è¯è€Œä¸éœ€è¦å‘½åå®ä½“è¯†åˆ«é‚£å°±å°½é‡ä½¿ç”¨jiebaåˆ†è¯ï¼Œæœ‰å…¶å®ƒéœ€æ±‚å†ä½¿ç”¨pyltpã€‚ ä½ å¯ä»¥é€šè¿‡pipå®‰è£…jiebaå’Œpyltpï¼Œjiebaçš„å®‰è£…éå¸¸ç®€å•ï¼Œä½¿ç”¨ä¸€ä¸ªpipå®‰è£…å°±å¯ä»¥äº†ã€‚ä½†æ˜¯pyltpçš„å®‰è£…å°±æ²¡é‚£ä¹ˆå®¹æ˜“äº†ï¼Œä½ é™¤äº†éœ€è¦å®‰è£…pyltpè¿˜éœ€è¦ä¸‹è½½ä¸€ä¸ªæ•°æ®åŒ…ï¼Œè¿™ä¸ªæ•°æ®åŒ…æä¾›äº†åˆ†è¯éœ€è¦çš„ä¸€äº›è¯å…¸ã€‚ä¸ºäº†ä¸‹è½½è¿™ä¸ªæ•°æ®åŒ…ä½ éœ€è¦å»Pyltpåœ¨Githubä¸»é¡µä¸‹è½½æ•´ä¸ªé¡¹ç›®ï¼Œç„¶åæŠŠé¡¹ç›®ä¸­çš„ltp_dataæ–‡ä»¶å¤¹å­˜æ”¾åˆ°ä¸€ä¸ªå›ºå®šä½ç½®æ–¹ä¾¿ä»¥åè°ƒç”¨ã€‚å¦å¤–pyltpçš„å…·ä½“è°ƒç”¨æ–¹æ³•å¯ä»¥å‰å¾€Pyltpçš„å®˜ç½‘å­¦ä¹ ã€‚jiebaåˆ†è¯çš„è°ƒç”¨æ–¹æ³•å¯ä»¥ç›´æ¥å‰å¾€å®ƒåœ¨Githubä¸»é¡µæŸ¥çœ‹ã€‚ ä¸‹é¢æˆ‘ç®€å•ä»‹ç»ä¸€ä¸‹jiebaåˆ†è¯å·¥å…·çš„ä½¿ç”¨ï¼š ä»£ç ï¼š # coding:utf-8 import jieba text = &quot;é’å¹´ä¸€ä»£æœ‰ç†æƒ³ã€æœ‰æœ¬é¢†ã€æœ‰æ‹…å½“ï¼Œå›½å®¶å°±æœ‰å‰é€”ï¼Œæ°‘æ—å°±æœ‰å¸Œæœ›ã€‚&quot; tokens = jieba.lcut(text) print(tokens) è¿è¡Œç»“æœï¼š Building prefix dict from the default dictionary ... Loading model from cache C:\\temp\\jieba.cache Loading model cost 1.020 seconds. Prefix dict has been built succesfully. ['é’å¹´ä¸€ä»£', 'æœ‰', 'ç†æƒ³', 'ã€', 'æœ‰', 'æœ¬é¢†', 'ã€', 'æœ‰', 'æ‹…å½“', 'ï¼Œ', 'å›½å®¶', 'å°±', 'æœ‰', 'å‰é€”', 'ï¼Œ', 'æ°‘æ—', 'å°±', 'æœ‰', 'å¸Œæœ›', 'ã€‚'] åœç”¨è¯ ä»€ä¹ˆæ˜¯åœç”¨è¯å‘¢ï¼Ÿåœç”¨è¯å°±æ˜¯åœ¨ä¿¡æ¯æ£€ç´¢ä¸­ï¼Œä¸ºèŠ‚çœå­˜å‚¨ç©ºé—´å’Œæé«˜æœç´¢æ•ˆç‡ï¼Œåœ¨å¤„ç†è‡ªç„¶è¯­è¨€æ•°æ®ï¼ˆæˆ–æ–‡æœ¬ï¼‰ä¹‹å‰æˆ–ä¹‹åä¼šè‡ªåŠ¨è¿‡æ»¤æ‰æŸäº›å­—æˆ–è¯ï¼Œè¿™äº›å­—æˆ–è¯å³è¢«ç§°ä¸ºåœç”¨è¯ï¼ˆStop Wordsï¼‰ã€‚ è¿™äº›åœç”¨è¯éƒ½æ˜¯äººå·¥è¾“å…¥ã€éè‡ªåŠ¨åŒ–ç”Ÿæˆçš„ï¼Œç”Ÿæˆåçš„åœç”¨è¯ä¼šå½¢æˆä¸€ä¸ªåœç”¨è¯è¡¨ã€‚ä½†æ˜¯ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªæ˜ç¡®çš„åœç”¨è¯è¡¨èƒ½å¤Ÿé€‚ç”¨äºæ‰€æœ‰çš„å·¥å…·ã€‚ç”šè‡³æœ‰ä¸€äº›å·¥å…·æ˜¯æ˜ç¡®åœ°é¿å…ä½¿ç”¨åœç”¨è¯æ¥æ”¯æŒçŸ­è¯­æœç´¢çš„ã€‚ ç®€å•æ¥è¯´å°±æ˜¯å¯¹æˆ‘ä»¬å¤„ç†è‡ªç„¶è¯­è¨€è¿‡ç¨‹ä¸­æ²¡æœ‰å¸®åŠ©çš„è¯æ±‡ï¼Œä¾‹å¦‚â€œå“ˆå“ˆâ€ã€â€œä¸ä»…â€ã€â€œå¦‚æœâ€ç­‰ã€‚è¿™äº›è¯è•´å«çš„ä¿¡æ¯å¾ˆå°‘ï¼Œæ‰€ä»¥åœ¨NLPä¸­æˆ‘ä»¬é€šå¸¸ä¼šå°†å®ƒä»¬ä»åˆ†è¯ç»“æœä¸­å»æ‰ã€‚ é‚£ä¹ˆæ€ä¹ˆè·å–åœç”¨è¯è¡¨å‘¢ï¼Ÿé¦–å…ˆä½ å¯ä»¥è°·æ­Œä¸€ä¸‹ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šåœç”¨è¯è¡¨ã€‚ä¸è¿‡å¦‚æœä½ æƒ³ä¸ºäº†æ–¹ä¾¿çš„è¯å¯ä»¥ä½¿ç”¨æˆ‘æä¾›ç»™ä½ çš„åœç”¨è¯è¡¨ã€‚https://pan.baidu.com/s/1o8VFnTK è¯´æ˜ï¼š åœç”¨è¯è¡¨æ¯ä¸€è¡Œå°±æ˜¯ä¸€ä¸ªåœç”¨è¯ä¸”è¯¥åœç”¨è¯è¡¨å³åŒ…æ‹¬æ ‡ç‚¹ç¬¦å·ä¹ŸåŒ…æ‹¬æ™®é€šåœç”¨è¯ã€‚ é‚£ä¹ˆæœ‰æ€ä¹ˆå»é™¤åœç”¨è¯å‘¢ï¼Ÿ ä½ å¯ä»¥é€šè¿‡ä¸‹é¢ä»£ç åŠ è½½åœç”¨è¯ï¼Œå…¶ä¸­stopwords.txtå°±æ˜¯åœç”¨è¯æ–‡ä»¶ã€‚ stopwords = [line.strip() for line in open(&#x27;stopwords.txt&#x27;, &#x27;r&#x27;, encoding=&#x27;utf-8&#x27;).readlines()] TF-IDF tf-idfï¼ˆè‹±è¯­ï¼šterm frequencyâ€“inverse document frequencyï¼‰æ˜¯ä¸€ç§ç”¨äºä¿¡æ¯æ£€ç´¢ä¸æ–‡æœ¬æŒ–æ˜çš„å¸¸ç”¨åŠ æƒæŠ€æœ¯ã€‚tf-idfæ˜¯ä¸€ç§ç»Ÿè®¡æ–¹æ³•ï¼Œç”¨ä»¥è¯„ä¼°ä¸€å­—è¯å¯¹äºä¸€ä¸ªæ–‡ä»¶é›†æˆ–ä¸€ä¸ªè¯­æ–™åº“ä¸­çš„å…¶ä¸­ä¸€ä»½æ–‡ä»¶çš„é‡è¦ç¨‹åº¦ã€‚å­—è¯çš„é‡è¦æ€§éšç€å®ƒåœ¨æ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°æˆæ­£æ¯”å¢åŠ ï¼Œä½†åŒæ—¶ä¼šéšç€å®ƒåœ¨è¯­æ–™åº“ä¸­å‡ºç°çš„é¢‘ç‡æˆåæ¯”ä¸‹é™ã€‚tf-idfåŠ æƒçš„å„ç§å½¢å¼å¸¸è¢«æœç´¢å¼•æ“åº”ç”¨ï¼Œä½œä¸ºæ–‡ä»¶ä¸ç”¨æˆ·æŸ¥è¯¢ä¹‹é—´ç›¸å…³ç¨‹åº¦çš„åº¦é‡æˆ–è¯„çº§ã€‚é™¤äº†tf-idfä»¥å¤–ï¼Œäº’è”ç½‘ä¸Šçš„æœç´¢å¼•æ“è¿˜ä¼šä½¿ç”¨åŸºäºé“¾æ¥åˆ†æçš„è¯„çº§æ–¹æ³•ï¼Œä»¥ç¡®å®šæ–‡ä»¶åœ¨æœç´¢ç»“æœä¸­å‡ºç°çš„é¡ºåºã€‚ tfæ˜¯term frequencyçš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯è¯é¢‘çš„æ„æ€ï¼›è€Œidfæ˜¯inverse document frequencyçš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯é€†è¯é¢‘çš„æ„æ€ã€‚ æˆ‘å¤§æ¦‚è§£é‡Šä¸€ä¸‹ï¼Œé€šå¸¸ä¸€ä¸ªå¥å­ä¸­ä¸åŒçš„è¯è•´å«ç€ä¸åŒçš„ä¿¡æ¯ï¼Œä¸”ä»–ä»¬çš„é‡è¦æ€§æ˜¯ä¸ç›¸åŒçš„ã€‚é€šå¸¸ä¸€ä¸ªè¯è¯­åœ¨ä¸€ä¸ªæ–‡æœ¬ä¸­å‡ºç°çš„æ¬¡æ•°è¶Šé«˜è¯´æ˜å®ƒå°±è¶Šé‡è¦ï¼Œåä¹‹è¶Šä¸é‡è¦ã€‚è¿™æ˜¯æœ‰äº›ç»†å¿ƒçš„è¯»è€…å°±å‘ç°äº†ï¼Œæˆ‘ä»¬å‰é¢ä»‹ç»çš„é‚£äº›åœç”¨è¯æ€ä¹ˆè§£é‡Šï¼Œä¾‹å¦‚â€œä¸ä»…â€ï¼Œå®ƒåœ¨ä¸€ä¸ªå¥å­ä¸­å‡ºç°çš„é¡ºåºå…¶å®ä¹Ÿä¸ä½å‘€ï¼Œå¦‚æœæˆ‘ä»¬è®¤ä¸ºå®ƒå¾ˆé‡è¦çš„è¯ï¼Œé‚£ä¹ˆå°±å¤§é”™ç‰¹é”™äº†ï¼Œå› ä¸ºå®ƒæ˜¯ä¸åŒ…å«ä»»ä½•ä¿¡æ¯çš„ã€‚æ‰€ä»¥æˆ‘ä»¬æ­¤æ—¶å°±å¼•å…¥ä¸‹é¢ä¸€ä¸ªæ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯é€†è¯é¢‘ã€‚é€šå¸¸åœ¨å¤šä¸ªæ–‡æœ¬ä¸­ï¼Œæˆ‘ä»¬è®¤ä¸ºå½“ä¸€ä¸ªè¯åœ¨åŒä¸€ç¯‡æ–‡æœ¬ä¸­å‡ºç°çš„æ¬¡æ•°è¶Šé«˜é‚£ä¹ˆå®ƒå°±è¶Šé‡è¦ï¼Œå¯æ˜¯å¦‚æœå®ƒå³å‡ºç°åœ¨æœ¬ç¯‡æ–‡æ¡£ä¸­åˆåœ¨å…¶ä»–æ–‡æ¡£ä¸­çš„é¢‘æ¬¡å¾ˆé«˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®¤ä¸ºå®ƒä¸é‚£ä¹ˆé‡è¦äº†ã€‚æˆ‘ä»¬éœ€è¦é™ä½å®ƒçš„é‡è¦ç¨‹åº¦ã€‚ å¯¹äºåœ¨æŸä¸€ç‰¹å®šæ–‡ä»¶é‡Œçš„è¯è¯­æ¥è¯´ï¼Œå®ƒçš„é‡è¦æ€§å¯è¡¨ç¤ºä¸ºï¼š tfij=ni,jâˆ‘knk,jtf_{ij}=\\frac{n_{i,j}}{\\sum_kn_{k,j}} tfijâ€‹=âˆ‘kâ€‹nk,jâ€‹ni,jâ€‹â€‹ é€†å‘æ–‡ä»¶é¢‘ç‡ï¼ˆinverse document frequencyï¼Œidfï¼‰æ˜¯ä¸€ä¸ªè¯è¯­æ™®éé‡è¦æ€§çš„åº¦é‡ã€‚æŸä¸€ç‰¹å®šè¯è¯­çš„idfï¼Œå¯ä»¥ç”±æ€»æ–‡ä»¶æ•°ç›®é™¤ä»¥åŒ…å«è¯¥è¯è¯­ä¹‹æ–‡ä»¶çš„æ•°ç›®ï¼Œå†å°†å¾—åˆ°çš„å•†å–å¯¹æ•°å¾—åˆ°ï¼š idfi=logâ¡âˆ£Dâˆ£âˆ£j:tiâˆˆdjâˆ£idf_i=\\log \\frac{|D|}{|{j:t_i\\in d_j}|} idfiâ€‹=logâˆ£j:tiâ€‹âˆˆdjâ€‹âˆ£âˆ£Dâˆ£â€‹ æœ€åè®¡ç®—ç»¼åˆè¯é¢‘å’Œé€†è¯é¢‘å¾—åˆ°æœ€ç»ˆçš„tfidfå€¼ tfidfi,j=tfi,jÃ—idfitfidf_{i,j}=tf_{i,j}\\times idf_i tfidfi,jâ€‹=tfi,jâ€‹Ã—idfiâ€‹ Word2vec One-hot è‡ªç„¶è¯­è¨€åœ¨è®¡ç®—æœºä¸­æ˜¯ä»¥å­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²å½¢å¼å­˜åœ¨çš„ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªåŸºäºç»Ÿè®¡çš„æœºå™¨å­¦ä¹ ç³»ç»Ÿï¼Œæˆ‘ä»¬çš„è¿ç®—å¯¹è±¡æ˜¯æ•°å€¼å‹çš„æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹å­—ç¬¦å‹æ•°æ®è¿›è¡Œå¤„ç†ã€‚ è¡¨å¾å•è¯çš„æ–¹å¼æ˜¯é¦–å…ˆå»ºç«‹ä¸€ä¸ªè¾ƒå¤§çš„è¯æ±‡è¡¨ï¼ˆä¾‹å¦‚10000ï¼‰ï¼Œç„¶åä½¿ç”¨one-hotçš„æ–¹å¼å¯¹æ¯ä¸ªå•è¯è¿›è¡Œç¼–ç ã€‚ä¾‹å¦‚å•è¯Manï¼ŒWomanï¼ŒKingï¼ŒQueenï¼ŒAppleï¼ŒOrangeåˆ†åˆ«å‡ºç°åœ¨è¯æ±‡è¡¨çš„ç¬¬5391ï¼Œ9853ï¼Œ4914ï¼Œ7157ï¼Œ456ï¼Œ6257çš„ä½ç½®ï¼Œåˆ™å®ƒä»¬åˆ†åˆ«ç”¨O5391,O9853,O4914,O7157,O456,O6257è¡¨ç¤ºã€‚å…¶ä¸­O5391è¡¨ç¤ºä¸€ä¸ªç»´åº¦ä¸º10000ï¼Œç¬¬5391ç»´åº¦çš„å€¼ä¸º1å…¶ä½™ä½ç½®å€¼å…¨ä¸º0çš„å‘é‡ã€‚ one-hotè¡¨å¾å•è¯çš„æ–¹æ³•æœ€å¤§çš„ç¼ºç‚¹å°±æ˜¯æ¯ä¸ªå•è¯éƒ½æ˜¯ç‹¬ç«‹çš„ã€æ­£äº¤çš„ï¼Œæ— æ³•çŸ¥é“ä¸åŒå•è¯ä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦ã€‚ä¾‹å¦‚Appleå’ŒOrangeéƒ½æ˜¯æ°´æœï¼Œè¯æ€§ç›¸è¿‘ï¼Œä½†æ˜¯å•ä»one-hotç¼–ç ä¸Šæ¥çœ‹ï¼Œå†…ç§¯ä¸ºé›¶ï¼Œæ— æ³•çŸ¥é“äºŒè€…çš„ç›¸ä¼¼æ€§ã€‚åœ¨NLPä¸­ï¼Œæˆ‘ä»¬æ›´å¸Œæœ›èƒ½æŒæ¡ä¸åŒå•è¯ä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦ã€‚ è¯åµŒå…¥ ä¸ºäº†è§£å†³One-hotå‘é‡çš„ç¼ºç‚¹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‰¹å¾è¡¨å¾ï¼ˆFeaturized representationï¼‰çš„æ–¹æ³•å¯¹æ¯ä¸ªå•è¯è¿›è¡Œç¼–ç ã€‚ä¹Ÿå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªç‰¹å¾å‘é‡è¡¨å¾å•è¯ï¼Œç‰¹å¾å‘é‡çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å¯¹è¯¥å•è¯æŸä¸€ç‰¹å¾çš„é‡åŒ–æè¿°ï¼Œé‡åŒ–èŒƒå›´å¯ä»¥æ˜¯[-1,1]ä¹‹é—´ã€‚ç‰¹å¾è¡¨å¾çš„ä¾‹å­å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Man(5391) Woman(9853) King(4914) Queen(7157) Apple(456) Orange(6257) Gender -1 1 -0.95 0.97 0.00 0.01 Royal 0.01 0.02 0.93 0.95 -0.01 0.00 Age 0.03 0.02 0.7 0.65 0.03 -0.02 Food 0.09 0.01 0.02 0.01 0.95 0.97 â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ ç‰¹å¾å‘é‡çš„é•¿åº¦ä¾æƒ…å†µè€Œå®šï¼Œç‰¹å¾å…ƒç´ è¶Šå¤šåˆ™å¯¹å•è¯è¡¨å¾å¾—è¶Šå…¨é¢ã€‚è¿™é‡Œçš„ç‰¹å¾å‘é‡é•¿åº¦è®¾å®šä¸º300ã€‚ä½¿ç”¨ç‰¹å¾è¡¨å¾ä¹‹åï¼Œè¯æ±‡è¡¨ä¸­çš„æ¯ä¸ªå•è¯éƒ½å¯ä»¥ä½¿ç”¨å¯¹åº”çš„300 x 1çš„å‘é‡æ¥è¡¨ç¤ºï¼Œè¯¥å‘é‡çš„æ¯ä¸ªå…ƒç´ è¡¨ç¤ºè¯¥å•è¯å¯¹åº”çš„æŸä¸ªç‰¹å¾å€¼ã€‚æ¯ä¸ªå•è¯ç”¨e+è¯æ±‡è¡¨ç´¢å¼•çš„æ–¹å¼æ ‡è®°ï¼Œä¾‹å¦‚e5391, e9853, e4914, e7157, e456, e6257ã€‚ ç‰¹å¾è¡¨å¾çš„ä¼˜ç‚¹æ˜¯æ ¹æ®ç‰¹å¾å‘é‡èƒ½æ¸…æ™°çŸ¥é“ä¸åŒå•è¯ä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦ï¼Œä¾‹å¦‚Appleå’ŒOrangeä¹‹é—´çš„ç›¸ä¼¼åº¦è¾ƒé«˜ï¼Œå¾ˆå¯èƒ½å±äºåŒä¸€ç±»åˆ«ã€‚è¿™ç§å•è¯â€œç±»åˆ«â€åŒ–çš„æ–¹å¼ï¼Œå¤§å¤§æé«˜äº†æœ‰é™è¯æ±‡é‡çš„æ³›åŒ–èƒ½åŠ›ã€‚è¿™ç§ç‰¹å¾åŒ–å•è¯çš„æ“ä½œè¢«ç§°ä¸ºWord Embeddingsï¼Œå³å•è¯åµŒå…¥ã€‚ è¿™é‡Œç‰¹å¾å‘é‡çš„æ¯ä¸ªç‰¹å¾å…ƒç´ å«ä¹‰æ˜¯å…·ä½“çš„ï¼Œå¯¹åº”åˆ°å®é™…ç‰¹å¾ï¼Œä¾‹å¦‚æ€§åˆ«ã€å¹´é¾„ç­‰ã€‚è€Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œç‰¹å¾å‘é‡å¾ˆå¤šç‰¹å¾å…ƒç´ å¹¶ä¸ä¸€å®šå¯¹åº”åˆ°æœ‰ç‰©ç†æ„ä¹‰çš„ç‰¹å¾ï¼Œæ˜¯æ¯”è¾ƒæŠ½è±¡çš„ã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸å½±å“å¯¹æ¯ä¸ªå•è¯çš„æœ‰æ•ˆè¡¨å¾ï¼ŒåŒæ ·èƒ½æ¯”è¾ƒä¸åŒå•è¯ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚ å­¦ä¹ è¯åµŒå…¥ æˆ‘ä»¬å¯ä»¥é€šè¿‡æ„å»ºè‡ªç„¶è¯­è¨€æ¨¡å‹ï¼ˆç¥ç»ç½‘ç»œï¼‰ï¼Œè¿ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•å¾—åˆ°embeddingã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œè¾“å…¥æ ·æœ¬æ˜¯ä¸‹é¢è¿™å¥è¯ï¼š I want a glass of orange â€”â€”. é€šè¿‡è¿™å¥è¯çš„å‰6ä¸ªå•è¯ï¼Œé¢„æµ‹æœ€åçš„å•è¯â€œjuiceâ€ã€‚ ä¸ºäº†è®©ç¥ç»ç½‘ç»œè¾“å…¥å±‚æ•°ç›®å›ºå®šï¼Œå¯ä»¥é€‰æ‹©åªå–é¢„æµ‹å•è¯çš„å‰4ä¸ªå•è¯ä½œä¸ºè¾“å…¥ï¼Œä¾‹å¦‚è¯¥å¥ä¸­åªé€‰æ‹©â€œa glass of orangeâ€å››ä¸ªå•è¯ä½œä¸ºè¾“å…¥ã€‚å½“ç„¶ï¼Œè¿™é‡Œçš„4æ˜¯è¶…å‚æ•°ï¼Œå¯è°ƒã€‚ ä¸€èˆ¬åœ°ï¼Œæˆ‘ä»¬æŠŠè¾“å…¥å«åšcontextï¼Œè¾“å‡ºå«åštargetã€‚å¯¹åº”åˆ°ä¸Šé¢è¿™å¥è¯é‡Œï¼š context: a glass of orange target: juice å…³äºcontextçš„é€‰æ‹©æœ‰å¤šç§æ–¹æ³•ï¼š targetå‰nä¸ªå•è¯æˆ–ånä¸ªå•è¯ï¼Œnå¯è°ƒ targetå‰1ä¸ªå•è¯ targeté™„è¿‘æŸ1ä¸ªå•è¯ï¼ˆSkip-Gramï¼‰ å…³äºcontextå’Œtargetçš„é€‰æ‹©ï¼Œæ¯”è¾ƒæµè¡Œçš„æ¨¡å‹æœ‰Skip-Gramå’ŒCbowã€‚ æƒ…æ„Ÿåˆ†æ pass æœºå™¨ç¿»è¯‘ pass Attentionæœºåˆ¶ pass","categories":[{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"http://chiang97912.github.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"},{"name":"NLP","slug":"æ·±åº¦å­¦ä¹ /NLP","permalink":"http://chiang97912.github.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/NLP/"}],"tags":[{"name":"NLP","slug":"NLP","permalink":"http://chiang97912.github.io/tags/NLP/"}]},{"title":"äºŒçº§åŸŸåæŒ‡å‘ç½‘ç«™å­ç›®å½•çš„é…ç½®","slug":"äºŒçº§åŸŸåæŒ‡å‘ç½‘ç«™å­ç›®å½•çš„é…ç½®","date":"2017-11-11T03:52:00.000Z","updated":"2025-12-13T12:18:13.028Z","comments":true,"path":"2017/11/11/äºŒçº§åŸŸåæŒ‡å‘ç½‘ç«™å­ç›®å½•çš„é…ç½®/","permalink":"http://chiang97912.github.io/2017/11/11/%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D%E6%8C%87%E5%90%91%E7%BD%91%E7%AB%99%E5%AD%90%E7%9B%AE%E5%BD%95%E7%9A%84%E9%85%8D%E7%BD%AE/","excerpt":"ç¬¬ä¸€æ­¥ï¼šæ·»åŠ äºŒçº§åŸŸå é¦–å…ˆå£°æ˜çš„æ˜¯ï¼Œæˆ‘çš„wordpressä¿å­˜åœ¨ç½‘ç«™çš„æ ¹ç›®å½•ä¸‹çš„wordpresså­ç›®å½•ï¼Œæ‰€ä»¥æˆ‘ç°åœ¨æƒ³æŠŠwordpressç›®å½•æŒ‡å‘äºŒçº§åŸŸåblog.figurinn.xyz.ç»è¿‡å¤šæ¬¡å°è¯•ç»ˆäºæˆåŠŸäº†ã€‚","text":"ç¬¬ä¸€æ­¥ï¼šæ·»åŠ äºŒçº§åŸŸå é¦–å…ˆå£°æ˜çš„æ˜¯ï¼Œæˆ‘çš„wordpressä¿å­˜åœ¨ç½‘ç«™çš„æ ¹ç›®å½•ä¸‹çš„wordpresså­ç›®å½•ï¼Œæ‰€ä»¥æˆ‘ç°åœ¨æƒ³æŠŠwordpressç›®å½•æŒ‡å‘äºŒçº§åŸŸåblog.figurinn.xyz.ç»è¿‡å¤šæ¬¡å°è¯•ç»ˆäºæˆåŠŸäº†ã€‚ é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ä½ ç”³è¯·åŸŸåçš„æœåŠ¡å•†é‚£é‡Œæ–°å¢äºŒçº§åŸŸåã€‚å¦‚æœä½ æ˜¯åœ¨é˜¿é‡Œäº‘ç”³è¯·çš„åŸŸåï¼Œé‚£ä¹ˆä½ éœ€è¦åˆ°é˜¿é‡Œäº‘çš„DNSè§£æé‡Œé¢æ‰¾åˆ°æ–°å¢DNSçš„æŒ‰é’®ï¼Œçºªå½•ç±»å‹é€‰æ‹©Aï¼Œç„¶åä¸»æœºçºªå½•å¡«ä½ æƒ³è¦ç”³è¯·çš„åç§°ï¼Œä¾‹å¦‚æˆ‘çš„å°±å¡«blogï¼Œè®°å½•å€¼å°±æ˜¯ä½ æœåŠ¡å™¨çš„IPåœ°å€ï¼Œå…¶ä»–çš„é»˜è®¤å°±å¥½äº†ã€‚ ç¬¬äºŒæ­¥ï¼šæœåŠ¡å™¨è®¾ç½® è¿™ä¸€æ­¥ä½ éœ€è¦åœ¨ä½ çš„ç½‘ç«™æ ¹ç›®å½•ä¸‹å¢åŠ ä¸€ä¸ªåå«.htaccessçš„æ–‡ä»¶ï¼Œç„¶åå¡«å…¥ä¸€ä¸‹çš„å†…å®¹ &lt;IfModule mod_rewrite.c&gt; RewriteEngine On RewriteCond %{HTTP_HOST} ^blog.figurinn.xyz$ RewriteCond %{REQUEST_URI} !^/wordpress/ RewriteRule ^(.*)$ /wordpress/$1?Rewrite [L,QSA] &lt;/IfModule&gt; ä¸Šé¢çš„å†…å®¹æ˜¯æ ¹æ®æˆ‘çš„ç½‘ç«™è®¾å®šçš„ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„éœ€æ±‚è¿›è¡Œæ›´æ”¹ å¦‚æœä½ æ­¤æ—¶è®¿é—®çš„äºŒçº§åŸŸåä¸æˆåŠŸçš„è¯ï¼Œå¾ˆå¯èƒ½ä½ æ²¡æœ‰å¼€å¯æœåŠ¡å™¨urlé‡å†™åŠŸèƒ½ã€‚ å¦‚æœè¿™æ ·ï¼Œä½ å¯ä»¥æŒ‰ä¸€ä¸‹æ­¥éª¤æ‰“å¼€æœåŠ¡å™¨çš„urlé‡å†™åŠŸèƒ½(ä»¥æˆ‘çš„ubuntuæœåŠ¡å™¨ä¸ºä¾‹å­) é¦–å…ˆç¡®ä¿/etc/apache2/mods-enabled/rewrite.loadæ–‡ä»¶ä¸­çš„ LoadModule rewrite_module /usr/lib/apache2/modules/mod_ rewrite.so æ²¡æœ‰è¢«æ³¨é‡Šæ‰ï¼ˆå¦‚æœæœ‰#å·è¡¨ç¤ºå°±è¢«æ³¨é‡Šï¼‰ï¼Œå¦‚æœè¢«æ³¨é‡Šäº†å–æ¶ˆæ³¨é‡Šï¼ˆåªéœ€è¦åˆ é™¤å‰é¢çš„#ï¼‰å³å¯ï¼Œç„¶åvimä¿å­˜é€€å‡ºã€‚ ç„¶åç¼–è¾‘/etc/apache2/apache2.conf æ–‡ä»¶ï¼Œæ‰¾åˆ° &lt;Directory /var/www/&gt; Options Indexes FollowSymLinks AllowOverride None Require all granted &lt;/Directory&gt; ç„¶åå°†AllowOverride Noneä¸­çš„Noneæ”¹ä¸ºAll åˆ°æ­¤ä¸ºæ­¢äºŒçº§åŸŸåæŒ‡å‘æœåŠ¡å™¨å­ç›®å½•å°±æˆåŠŸäº† ä¸€äº›é—®é¢˜åŠè§£å†³åŠæ³• æˆ‘é€šè¿‡blog.figurinn.xyzè®¾ç½®äºŒçº§åŸŸåæŒ‡å‘å­ç›®å½•æˆåŠŸåï¼Œè¯¥äºŒçº§åŸŸåå¯ä»¥è®¿é—®ï¼Œå¯æ˜¯å‘ç°å½“è®¿é—®æŸä¸€ç¯‡æ–‡ç« æ—¶ï¼Œå´å‘ç°æ–‡ç« çš„å‰ç¼€è¿˜æ˜¯www.figurinn.xyz/wordpressï¼Œåæ¥å‘ç°æ˜¯wordpressè®¾ç½®çš„é—®é¢˜ å¦‚æœä½ ä¹Ÿæœ‰åŒæ ·çš„é—®é¢˜ï¼Œä½ å¯ä»¥è¿›å…¥wordpressåå°ï¼Œç„¶åç‚¹å‡»è®¾ç½®ï¼Œä½ ä¼šå‘ç°æœ‰â€œWordPressåœ°å€â€ã€â€œç«™ç‚¹åœ°å€â€ï¼Œå¦‚æœä½ å¸Œæœ›è®¿é—®wordpressä¸­æŸä¸€ç¯‡æ–‡ç« æ—¶urlçš„å‰ç¼€ä¹Ÿæ˜¯ä½ è®¾ç½®çš„äºŒçº§åŸŸåçš„è¯ï¼Œä½ åªéœ€è¦å°†ä¸Šæ–‡æåˆ°çš„ä¸¤ä¸ªè®¾ç½®é€‰é¡¹è®¾ç½®ä¸ºä½ çš„äºŒçº§åŸŸåå³å¯ã€‚","categories":[{"name":"æœåŠ¡å™¨é…ç½®","slug":"æœåŠ¡å™¨é…ç½®","permalink":"http://chiang97912.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/"}],"tags":[{"name":"æœåŠ¡å™¨é…ç½®","slug":"æœåŠ¡å™¨é…ç½®","permalink":"http://chiang97912.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/"}]},{"title":"Python3è¿æ¥MySQLæ•°æ®åº“","slug":"Python3è¿æ¥MySQLæ•°æ®åº“","date":"2017-09-17T05:20:25.000Z","updated":"2025-12-13T12:15:47.754Z","comments":true,"path":"2017/09/17/Python3è¿æ¥MySQLæ•°æ®åº“/","permalink":"http://chiang97912.github.io/2017/09/17/Python3%E8%BF%9E%E6%8E%A5MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/","excerpt":"Python2è¿æ¥æ•°æ®åº“ä¸€èˆ¬ä½¿ç”¨mysqldbåº“ï¼Œè€Œåˆ°äº†Python3å·²ç»å®Œå…¨ä¸æ”¯æŒmysqldbåº“äº†ï¼Œæ‰€ä»¥è¦ä½¿ç”¨å…¶ä»–çš„æ›¿ä»£åº“ã€‚è€ŒDjangoä¸­åˆä½¿ç”¨äº†mysqldbåº“ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨pymysqlåº“æ¥æ¨¡æ‹Ÿmysqldbåº“ã€‚","text":"Python2è¿æ¥æ•°æ®åº“ä¸€èˆ¬ä½¿ç”¨mysqldbåº“ï¼Œè€Œåˆ°äº†Python3å·²ç»å®Œå…¨ä¸æ”¯æŒmysqldbåº“äº†ï¼Œæ‰€ä»¥è¦ä½¿ç”¨å…¶ä»–çš„æ›¿ä»£åº“ã€‚è€ŒDjangoä¸­åˆä½¿ç”¨äº†mysqldbåº“ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨pymysqlåº“æ¥æ¨¡æ‹Ÿmysqldbåº“ã€‚ å…ˆåœ¨python3ä¸­å®‰è£…å¥½pymysqlåº“ã€‚ç„¶ååœ¨Djangoé¡¹ç›®çš„appåŒ…çš„__init__.pyæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹è¯­å¥ï¼š import pymysql pymysql.install_as_MySQLdb() è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨Djangoé¡¹ç›®ä¸­è°ƒç”¨mysqlæ•°æ®åº“äº†ã€‚","categories":[{"name":"ä»£ç ","slug":"ä»£ç ","permalink":"http://chiang97912.github.io/categories/%E4%BB%A3%E7%A0%81/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://chiang97912.github.io/tags/mysql/"},{"name":"python","slug":"python","permalink":"http://chiang97912.github.io/tags/python/"},{"name":"django","slug":"django","permalink":"http://chiang97912.github.io/tags/django/"},{"name":"ä»£ç ","slug":"ä»£ç ","permalink":"http://chiang97912.github.io/tags/%E4%BB%A3%E7%A0%81/"}]},{"title":"è°ˆè°ˆæˆ‘å¯¹äºç»´åº¦çš„ç†è§£","slug":"è°ˆè°ˆæˆ‘å¯¹äºç»´åº¦çš„ç†è§£","date":"2017-08-25T08:14:48.000Z","updated":"2025-12-16T13:56:52.742Z","comments":true,"path":"2017/08/25/è°ˆè°ˆæˆ‘å¯¹äºç»´åº¦çš„ç†è§£/","permalink":"http://chiang97912.github.io/2017/08/25/%E8%B0%88%E8%B0%88%E6%88%91%E5%AF%B9%E4%BA%8E%E7%BB%B4%E5%BA%A6%E7%9A%84%E7%90%86%E8%A7%A3/","excerpt":"å‰ä¸ä¹…å’Œæœ‹å‹èŠåˆ°äº†ç»´åº¦çš„è¯é¢˜ï¼Œæœ‹å‹ç»™æˆ‘è®²äº†ä»–åœ¨ä¸€æœ¬æ‚å¿—ä¸Šçœ‹åˆ°çš„æœ‰å…³ç©ºé—´ç»´åº¦çš„æ–‡ç« ã€‚èº«å¤„åœ¨ä¸‰ç»´ç©ºé—´çš„æˆ‘ä»¬æ˜¯å¾ˆéš¾ç†è§£å››ç»´ç©ºé—´çš„ï¼Œæˆ‘ä»¬äººç±»ç†è§£å››ç»´ç©ºé—´å°±å¥½æ¯”äºŒç»´ç©ºé—´çš„ç”Ÿç‰©ç†è§£ä¸‰ç»´ç©ºé—´çš„ç”Ÿç‰©ä¸€æ ·å›°éš¾ã€‚å‡å¦‚èš‚èšæ˜¯ä¸€ç§äºŒç»´ç”Ÿç‰©ï¼Œå®ƒçš„æ´»åŠ¨èŒƒå›´åªèƒ½æ˜¯åœ°é¢ï¼ˆå¹³é¢ï¼‰ï¼Œè€Œè‹è‡å°±æ˜¯ç”Ÿæ´»åœ¨ä¸‰ç»´ç©ºé—´çš„ç”Ÿç‰©ï¼Œå®ƒå¯ä»¥å‘ä¸Šä¸‹ã€å·¦å³ã€å‰åä¸­çš„ä»»æ„ä¸€ä¸ªæ–¹å‘ç§»åŠ¨ã€‚å‡è®¾æŸä¸€å¤©è‹è‡çªç„¶ä»ç©ºä¸­è½ä¸‹åœåˆ°åœ°é¢ä¼‘æ¯äº†å‡ ç§’ï¼Œè¿™æ—¶äºŒç»´ç”Ÿç‰©èš‚èšå‘ç°äº†ä¸‰ç»´ç”Ÿç‰©è‹è‡ï¼Œä½†æ˜¯è‹è‡è½¬ç¬å³é€ã€‚è¿™ç§ç°è±¡å…¶å®æœ‰ç‚¹ç±»ä¼¼äººç±»å‘ç°ä¸æ˜é£è¡Œç‰©ã€‚æˆ‘ä»¬å‡è®¾å¤–æ˜Ÿäººç”Ÿæ´»åœ¨å››ç»´ç©ºé—´ï¼Œå®ƒå¯ä»¥åœ¨æ—¶é—´è½´ä¸Šä»»æ„ç§»åŠ¨ï¼Œè€Œæˆ‘ä»¬äººç±»åªèƒ½ä»æŸä¸ªæ—¶é—´ç‚¹å‡ºå‘å¹¶ä¸”æ²¿ç€æ—¶é—´å¢å¤§çš„æ–¹å‘åŒ€é€Ÿç§»åŠ¨ã€‚ç›¸æ¯”äºå››ç»´ç©ºé—´çš„ç”Ÿç‰©èƒ½å¤Ÿåœ¨æ—¶é—´è½´ä¸Šä»¥ä»»æ„æ–¹å‘ä»»æ„é€Ÿåº¦ç§»åŠ¨è€Œè¨€ï¼Œæˆ‘ä»¬ä¸‰ç»´ç©ºé—´çš„ç”Ÿç‰©å¯èƒ½æ˜¾å¾—æœ‰ç‚¹ç¬¨æ‹™ã€‚ç»è¿‡è¿™æ ·çš„è§£é‡Šï¼Œé‚£ä¹ˆç»å¸¸å‡ºç°åœ¨æ–°é—»ç‰ˆé¢ä¸­çš„ä¸æ˜é£è¡Œç‰©è½¬ç¬å³é€çš„ç°è±¡å°±èƒ½å¤Ÿå¾ˆå¥½è§£é‡Šäº†ã€‚","text":"å‰ä¸ä¹…å’Œæœ‹å‹èŠåˆ°äº†ç»´åº¦çš„è¯é¢˜ï¼Œæœ‹å‹ç»™æˆ‘è®²äº†ä»–åœ¨ä¸€æœ¬æ‚å¿—ä¸Šçœ‹åˆ°çš„æœ‰å…³ç©ºé—´ç»´åº¦çš„æ–‡ç« ã€‚èº«å¤„åœ¨ä¸‰ç»´ç©ºé—´çš„æˆ‘ä»¬æ˜¯å¾ˆéš¾ç†è§£å››ç»´ç©ºé—´çš„ï¼Œæˆ‘ä»¬äººç±»ç†è§£å››ç»´ç©ºé—´å°±å¥½æ¯”äºŒç»´ç©ºé—´çš„ç”Ÿç‰©ç†è§£ä¸‰ç»´ç©ºé—´çš„ç”Ÿç‰©ä¸€æ ·å›°éš¾ã€‚å‡å¦‚èš‚èšæ˜¯ä¸€ç§äºŒç»´ç”Ÿç‰©ï¼Œå®ƒçš„æ´»åŠ¨èŒƒå›´åªèƒ½æ˜¯åœ°é¢ï¼ˆå¹³é¢ï¼‰ï¼Œè€Œè‹è‡å°±æ˜¯ç”Ÿæ´»åœ¨ä¸‰ç»´ç©ºé—´çš„ç”Ÿç‰©ï¼Œå®ƒå¯ä»¥å‘ä¸Šä¸‹ã€å·¦å³ã€å‰åä¸­çš„ä»»æ„ä¸€ä¸ªæ–¹å‘ç§»åŠ¨ã€‚å‡è®¾æŸä¸€å¤©è‹è‡çªç„¶ä»ç©ºä¸­è½ä¸‹åœåˆ°åœ°é¢ä¼‘æ¯äº†å‡ ç§’ï¼Œè¿™æ—¶äºŒç»´ç”Ÿç‰©èš‚èšå‘ç°äº†ä¸‰ç»´ç”Ÿç‰©è‹è‡ï¼Œä½†æ˜¯è‹è‡è½¬ç¬å³é€ã€‚è¿™ç§ç°è±¡å…¶å®æœ‰ç‚¹ç±»ä¼¼äººç±»å‘ç°ä¸æ˜é£è¡Œç‰©ã€‚æˆ‘ä»¬å‡è®¾å¤–æ˜Ÿäººç”Ÿæ´»åœ¨å››ç»´ç©ºé—´ï¼Œå®ƒå¯ä»¥åœ¨æ—¶é—´è½´ä¸Šä»»æ„ç§»åŠ¨ï¼Œè€Œæˆ‘ä»¬äººç±»åªèƒ½ä»æŸä¸ªæ—¶é—´ç‚¹å‡ºå‘å¹¶ä¸”æ²¿ç€æ—¶é—´å¢å¤§çš„æ–¹å‘åŒ€é€Ÿç§»åŠ¨ã€‚ç›¸æ¯”äºå››ç»´ç©ºé—´çš„ç”Ÿç‰©èƒ½å¤Ÿåœ¨æ—¶é—´è½´ä¸Šä»¥ä»»æ„æ–¹å‘ä»»æ„é€Ÿåº¦ç§»åŠ¨è€Œè¨€ï¼Œæˆ‘ä»¬ä¸‰ç»´ç©ºé—´çš„ç”Ÿç‰©å¯èƒ½æ˜¾å¾—æœ‰ç‚¹ç¬¨æ‹™ã€‚ç»è¿‡è¿™æ ·çš„è§£é‡Šï¼Œé‚£ä¹ˆç»å¸¸å‡ºç°åœ¨æ–°é—»ç‰ˆé¢ä¸­çš„ä¸æ˜é£è¡Œç‰©è½¬ç¬å³é€çš„ç°è±¡å°±èƒ½å¤Ÿå¾ˆå¥½è§£é‡Šäº†ã€‚ å…³äºç»´åº¦çš„è®¤çŸ¥éœé‡‘æ›¾åœ¨ä»–çš„è‘—ä½œã€Šæ—¶é—´ç®€å²ã€‹ä¸­åšå‡ºè¿‡è¿™æ ·çš„ç†è§£ï¼šç»´åº¦å¯ä»¥æ¯”å–»æˆé©¾é©¶ç«è½¦ï¼Œä¸€ç»´ä¸–ç•Œçš„ç«è½¦åªèƒ½ç¬”ç›´çš„å¾€å‰è¡Œé©¶ï¼ŒäºŒç»´çš„ç«è½¦é™¤äº†å¯ä»¥å‘å‰è¡Œé©¶ä¹‹å¤–è¿˜å¯ä»¥è½¬å¼¯ï¼Œè€Œä¸‰ç»´ä¸–ç•Œçš„ç«è½¦é™¤äº†å…·æœ‰ä»¥ä¸Šçš„ç‰¹è´¨å¤–ï¼Œé‡åˆ°æœ‰å¡åº¦çš„å±±è¿˜å¯ä»¥å‘ä¸Šè¡Œé©¶ã€‚å¦‚æœå­˜åœ¨å››ç»´ç©ºé—´çš„ç«è½¦ï¼Œé‚£å®ƒå°±å¯ä»¥åšæ—¶é—´æ—…è¡Œäº†ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºå¤–æ˜Ÿäººå¦‚æœå­˜åœ¨çš„è¯åº”è¯¥å°±å­˜åœ¨äºå››ç»´ç©ºé—´ã€‚","categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://chiang97912.github.io/categories/%E9%9A%8F%E7%AC%94/"}],"tags":[{"name":"ç‰©ç†","slug":"ç‰©ç†","permalink":"http://chiang97912.github.io/tags/%E7%89%A9%E7%90%86/"},{"name":"ç©ºé—´ç»´åº¦","slug":"ç©ºé—´ç»´åº¦","permalink":"http://chiang97912.github.io/tags/%E7%A9%BA%E9%97%B4%E7%BB%B4%E5%BA%A6/"}]}],"categories":[{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"http://chiang97912.github.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"},{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"http://chiang97912.github.io/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"},{"name":"æœåŠ¡å™¨é…ç½®","slug":"æœåŠ¡å™¨é…ç½®","permalink":"http://chiang97912.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/"},{"name":"python","slug":"python","permalink":"http://chiang97912.github.io/categories/python/"},{"name":"VIM","slug":"VIM","permalink":"http://chiang97912.github.io/categories/VIM/"},{"name":"NLP","slug":"æ·±åº¦å­¦ä¹ /NLP","permalink":"http://chiang97912.github.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/NLP/"},{"name":"Git","slug":"Git","permalink":"http://chiang97912.github.io/categories/Git/"},{"name":"tensorflow","slug":"tensorflow","permalink":"http://chiang97912.github.io/categories/tensorflow/"},{"name":"PHP","slug":"PHP","permalink":"http://chiang97912.github.io/categories/PHP/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://chiang97912.github.io/categories/%E7%AE%97%E6%B3%95/"},{"name":"ä»£ç ","slug":"ä»£ç ","permalink":"http://chiang97912.github.io/categories/%E4%BB%A3%E7%A0%81/"},{"name":"æ•°å­¦å»ºæ¨¡","slug":"æ•°å­¦å»ºæ¨¡","permalink":"http://chiang97912.github.io/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://chiang97912.github.io/categories/%E7%88%AC%E8%99%AB/"},{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://chiang97912.github.io/categories/%E9%9A%8F%E7%AC%94/"}],"tags":[{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"http://chiang97912.github.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"},{"name":"å¤§æ¨¡å‹","slug":"å¤§æ¨¡å‹","permalink":"http://chiang97912.github.io/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"},{"name":"MoE","slug":"MoE","permalink":"http://chiang97912.github.io/tags/MoE/"},{"name":"æ··åˆä¸“å®¶æ¨¡å‹","slug":"æ··åˆä¸“å®¶æ¨¡å‹","permalink":"http://chiang97912.github.io/tags/%E6%B7%B7%E5%90%88%E4%B8%93%E5%AE%B6%E6%A8%A1%E5%9E%8B/"},{"name":"Transformer","slug":"Transformer","permalink":"http://chiang97912.github.io/tags/Transformer/"},{"name":"BERT","slug":"BERT","permalink":"http://chiang97912.github.io/tags/BERT/"},{"name":"GPT","slug":"GPT","permalink":"http://chiang97912.github.io/tags/GPT/"},{"name":"æ¨¡å‹è¯„ä¼°","slug":"æ¨¡å‹è¯„ä¼°","permalink":"http://chiang97912.github.io/tags/%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0/"},{"name":"Accuracy","slug":"Accuracy","permalink":"http://chiang97912.github.io/tags/Accuracy/"},{"name":"Precision","slug":"Precision","permalink":"http://chiang97912.github.io/tags/Precision/"},{"name":"Recall","slug":"Recall","permalink":"http://chiang97912.github.io/tags/Recall/"},{"name":"F1","slug":"F1","permalink":"http://chiang97912.github.io/tags/F1/"},{"name":"ROC","slug":"ROC","permalink":"http://chiang97912.github.io/tags/ROC/"},{"name":"AUC","slug":"AUC","permalink":"http://chiang97912.github.io/tags/AUC/"},{"name":"MAP","slug":"MAP","permalink":"http://chiang97912.github.io/tags/MAP/"},{"name":"MRR","slug":"MRR","permalink":"http://chiang97912.github.io/tags/MRR/"},{"name":"NDCG","slug":"NDCG","permalink":"http://chiang97912.github.io/tags/NDCG/"},{"name":"Git","slug":"Git","permalink":"http://chiang97912.github.io/tags/Git/"},{"name":"Gogs","slug":"Gogs","permalink":"http://chiang97912.github.io/tags/Gogs/"},{"name":"Gitea","slug":"Gitea","permalink":"http://chiang97912.github.io/tags/Gitea/"},{"name":"python","slug":"python","permalink":"http://chiang97912.github.io/tags/python/"},{"name":"Pyinstaller","slug":"Pyinstaller","permalink":"http://chiang97912.github.io/tags/Pyinstaller/"},{"name":"pythonç¨‹åºæ‰“åŒ…","slug":"pythonç¨‹åºæ‰“åŒ…","permalink":"http://chiang97912.github.io/tags/python%E7%A8%8B%E5%BA%8F%E6%89%93%E5%8C%85/"},{"name":"pipenv","slug":"pipenv","permalink":"http://chiang97912.github.io/tags/pipenv/"},{"name":"virtualenv","slug":"virtualenv","permalink":"http://chiang97912.github.io/tags/virtualenv/"},{"name":"Python","slug":"Python","permalink":"http://chiang97912.github.io/tags/Python/"},{"name":"VIM","slug":"VIM","permalink":"http://chiang97912.github.io/tags/VIM/"},{"name":"C/C++","slug":"C-C","permalink":"http://chiang97912.github.io/tags/C-C/"},{"name":"tensorflow","slug":"tensorflow","permalink":"http://chiang97912.github.io/tags/tensorflow/"},{"name":"Deep Learning","slug":"Deep-Learning","permalink":"http://chiang97912.github.io/tags/Deep-Learning/"},{"name":"NLP","slug":"NLP","permalink":"http://chiang97912.github.io/tags/NLP/"},{"name":"mysql","slug":"mysql","permalink":"http://chiang97912.github.io/tags/mysql/"},{"name":"sql","slug":"sql","permalink":"http://chiang97912.github.io/tags/sql/"},{"name":"lamp","slug":"lamp","permalink":"http://chiang97912.github.io/tags/lamp/"},{"name":"linux","slug":"linux","permalink":"http://chiang97912.github.io/tags/linux/"},{"name":"PHP","slug":"PHP","permalink":"http://chiang97912.github.io/tags/PHP/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://chiang97912.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°å­¦å»ºæ¨¡","slug":"æ•°å­¦å»ºæ¨¡","permalink":"http://chiang97912.github.io/tags/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/"},{"name":"ä»£ç ","slug":"ä»£ç ","permalink":"http://chiang97912.github.io/tags/%E4%BB%A3%E7%A0%81/"},{"name":"æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•","slug":"æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•","permalink":"http://chiang97912.github.io/tags/%E6%A8%A1%E7%B3%8A%E7%BB%BC%E5%90%88%E8%AF%84%E4%BB%B7%E6%B3%95/"},{"name":"ç°è‰²å…³è”åˆ†æ","slug":"ç°è‰²å…³è”åˆ†æ","permalink":"http://chiang97912.github.io/tags/%E7%81%B0%E8%89%B2%E5%85%B3%E8%81%94%E5%88%86%E6%9E%90/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://chiang97912.github.io/tags/%E7%88%AC%E8%99%AB/"},{"name":"æœåŠ¡å™¨é…ç½®","slug":"æœåŠ¡å™¨é…ç½®","permalink":"http://chiang97912.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/"},{"name":"django","slug":"django","permalink":"http://chiang97912.github.io/tags/django/"},{"name":"ç‰©ç†","slug":"ç‰©ç†","permalink":"http://chiang97912.github.io/tags/%E7%89%A9%E7%90%86/"},{"name":"ç©ºé—´ç»´åº¦","slug":"ç©ºé—´ç»´åº¦","permalink":"http://chiang97912.github.io/tags/%E7%A9%BA%E9%97%B4%E7%BB%B4%E5%BA%A6/"}]}